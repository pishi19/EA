### 🔹 0.1 Memory & Loop Infrastructure

#### 🔭 Purpose
Ora’s memory subsystem enables continuity, reasoning over time, and the transformation of raw signals into structured, actionable system state. It is the assistant’s capacity to retain, relate, and reflect — tracking what has been seen, what is in progress, and what deserves further attention. Rather than simply storing data, this subsystem creates coherence between user action, incoming signals, and roadmap-aligned structure.

#### 🧱 Composition
Memory in Ora is built around markdown loop files stored in `/Retrospectives/`. These loops are structured with YAML frontmatter and contain:
- `id`: unique identifier
- `title`: human-readable summary
- `roadmap`: roadmap item ID (e.g., `2.2`)
- `tags`: semantic markers (e.g., `#useful`, `partner`, `crm`)
- `weight`: float representing significance
- `archived`: optional boolean

Loop files also include markdown checklists, freeform notes, and links to signal logs, contacts, or related loops. Loops are created from signals, or manually by the user.

#### 🧠 System Behavior
Each morning at 5:05 AM, `daily_refresh.py` runs. This process:
- Applies decay to loop weight if untouched
- Ingests new feedback tags (e.g., `#false_positive`, `#needs-promotion`)
- Archives completed or stale loops
- Promotes loops based on threshold logic
- Writes summaries to the day’s `Retrospective`
- Rebuilds `loop_status.md` as the dashboard surface

All loops are indexed in:
- **Qdrant**: semantic embeddings for GPT queries
- **SQLite**: structured access for filtering, routing, and status reports

#### 📊 Streamlit Interface
Streamlit serves as the primary interface for observing system memory.
- **Ora Chat Panel**
  - Ask: "What loops are stale?" or "Summarize partner activity."
  - GPT responses are grounded in loop files
- **Memory Dashboard**
  - Loop weight and freshness charts
  - Tag and feedback heatmaps
  - YAML validation reports (missing `roadmap`, broken syntax)

#### 🗂️ Obsidian Interface
Obsidian is used for manual interaction with loop files.
- Edit YAML frontmatter
- Add or complete tasks
- Annotate loops with notes or summaries
- Review backlink structure
- Provide feedback or corrections via checkboxes or YAML

#### 🔁 Feedback Mechanisms
Users reinforce or correct classification by embedding feedback directly in the loop.

Markdown format:
```markdown
## 🔧 Signal Review
- [x] Reinforce signal
- [ ] Not relevant
- [ ] Reclassify contact: prospect
- [ ] Move loop to: Invitee CRM Coordination
```

YAML format:
```yaml
signal_feedback:
  - reinforce
  - reclassify: prospect
  - notes: "This was submitted via RSVP form, not by Mecca staff."
```

#### 🗃️ Loop Lifecycle
- Loops are born from signals, created manually, or generated by GPT.
- They gain weight through feedback and usage.
- They decay over time if inactive.
- They are archived via tag or YAML (`archived: true`).
- They are promoted into project files when thresholds are met.

#### 📎 Use Case: Mecca Program — Sales & Marketing
Ailo partners with Mecca, a high-end retail cosmetics brand in Australia, to host in-store events that showcase Ora to prospective users. These events are both experiential and strategic — connecting consultants, customers, and prospects with the Ailo platform in a high-trust, partner-led environment. Successfully running these events requires coordinated workflows across multiple stakeholder groups and platforms.

##### Roles:
- **Internal (Ailo staff)**: CRM coordination, invitee segmentation, campaign assets, logistics, venue approvals
- **Partner (Mecca staff)**: Store managers, marketing contacts, brand liaisons — e.g., Sophie at sophie@mecca.com.au
- **Prospect (invitees)**: Attendees identified through CRM filters, previous interactions, or interest forms

##### Active Projects (Scoped to Roadmap Items):
- `Partner Coordination` (roadmap: 2.2): Store availability, approvals, confirmations, asset review
- `Invitee CRM Coordination` (roadmap: 2.1): Segmentation, exports, RSVP tracking, CRM updates
- `Event Execution Logistics` (roadmap: 3.1): Staffing, signage, asset delivery, reporting

##### Signal Types:
- **Partner Confirmations**: “Melbourne store is available on October 12.”
- **Internal Tasks**: “Can we pull the CRM invitee list for QLD prospects by tomorrow?”
- **Prospect Responses**: “I’d love to attend the Bondi Junction night!”
- **Asset Updates**: “Here’s the final version of the in-store poster.”

##### Email Ingestion + Contact Role Matching:
Signals from Mecca addresses (e.g., `@mecca.com.au`) are tagged as `partner`. Invitee messages from `gmail.com`, `icloud.com`, or CRM webhooks are tagged as `prospect`. Internal tasks often come via Slack exports, Gmail labels like `@ora-task`, or CLI injections.

##### Classification Logic:
Each signal is classified based on:
- The **contact’s role** (partner, prospect, internal)
- The **associated program/project** (Mecca + roadmap match)
- The **active filters defined in the roadmap item**
- The **feedback provided from prior similar signals**

##### Loop Generation:
When a signal is accepted, it generates or updates a loop under the matching project. For example:

```yaml
id: loop-2025-05-24-mecca-event-confirmation
title: Confirmed Mecca Melbourne Event (Oct 12)
roadmap: 2.2
tags: [partner, CRM, #useful]
contact: sophie@mecca.com.au
weight: 0.64
source: session_logs/email-2025-05-24-sophie.md
```

```markdown
## Checklist
- [x] Confirm venue date and time
- [ ] Update CRM invitee list
- [ ] Send RSVP reminder to Sophie

## Notes
Sophie confirmed Mecca Melbourne for Oct 12. CRM segment for VIC prospects needs syncing by October 5. Connect with Invitee Coordination loop.
```

##### Feedback Example:
```markdown
## 🔧 Signal Review
- [x] Confirm classification is correct
- [ ] Add `invitees` as secondary tag
- [ ] Promote to Project: Invitee List Build
- [ ] Reclassify contact as joint (partner + CRM contact)
```

##### Linked Systems:
- **HubSpot**: CRM integration for segmentation, RSVP capture, and tagging
- **Google Workspace**: Email routing, label-based signal tagging, calendar sync
- **Streamlit**: Dashboard shows loop status, Mecca-specific signal feedback trends, RSVP volumes
- **Obsidian**: Manual loop editing, cross-tagging between Invitee and Partner projects

##### Review Surface:
The Mecca Program is reviewed weekly via Streamlit dashboards and daily via chat. GPT answers questions like:
- “What tasks are incomplete for Mecca Melbourne?”
- “Who hasn’t responded to RSVP confirmations?”
- “What feedback tags have been applied to Mecca-related loops this week?”

These queries are grounded in real memory, not inference. Memory surfaces the truth of the workflow.

#### 🧩 Why It Exists
Without memory, Ora is reactive. With memory, Ora develops coherence, pattern recognition, and the ability to prioritize over time. The memory system connects roadmap to real action, and user input to evolving understanding. It is the base layer of reasoned execution.
