(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{7570:function(e,t,s){Promise.resolve().then(s.bind(s,3709))},3709:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var a=s(7437),r=s(2265),n=s(6070),l=s(5974),c=s(2869),i=s(6596);let o=(0,s(9205).Z)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);var d=s(1047),x=s(3417),u=s(8273);function m(e){var t,s;let{loop:m}=e,[h,f]=(0,r.useState)(400);return(0,a.jsxs)(n.Zb,{className:"w-full",children:[(0,a.jsx)(n.Ol,{children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.ll,{className:"text-lg font-semibold",children:m.title||m.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)(l.C,{variant:"outline",className:"text-xs",children:m.id}),m.phase&&(0,a.jsxs)(l.C,{variant:"secondary",className:"text-xs",children:["Phase ",m.phase]}),m.workstream&&(0,a.jsx)(l.C,{variant:"outline",className:"text-xs",children:m.workstream})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[m.status&&(0,a.jsx)(l.C,{className:"text-xs ".concat((e=>{switch(null==e?void 0:e.toLowerCase()){case"planning":return"bg-blue-100 text-blue-800";case"active":return"bg-green-100 text-green-800";case"completed":default:return"bg-gray-100 text-gray-800";case"blocked":return"bg-red-100 text-red-800"}})(m.status)),children:m.status}),m.score&&(0,a.jsxs)("div",{className:"text-sm font-medium ".concat((s=m.score)?s>=.8?"text-green-600":s>=.6?"text-yellow-600":"text-red-600":"text-gray-500"),children:["Score: ",m.score.toFixed(2)]})]})]})}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[m.summary&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:m.summary}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:null===(t=m.tags)||void 0===t?void 0:t.map((e,t)=>(0,a.jsxs)(l.C,{variant:"outline",className:"text-xs",children:[(0,a.jsx)(o,{className:"h-3 w-3 mr-1"}),e]},t))}),m.created&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,a.jsx)(d.Z,{className:"h-3 w-3"}),"Created: ",new Date(m.created).toLocaleDateString("en-US",{year:"numeric",month:"numeric",day:"numeric"})]}),(0,a.jsx)(i.UQ,{type:"single",collapsible:!0,children:(0,a.jsxs)(i.Qd,{value:"chat",children:[(0,a.jsx)(i.o4,{className:"text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"\uD83D\uDCAC Chat"]})}),(0,a.jsxs)(i.vF,{className:"mt-4",children:[(0,a.jsx)("div",{className:"border rounded-lg overflow-hidden",style:{height:"".concat(h,"px")},children:(0,a.jsx)(u.default,{contextType:"loop",contextId:m.id,filePath:m.filePath,title:"\uD83D\uDCAC Chat - ".concat(m.name)})}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-2 text-xs text-muted-foreground",children:[(0,a.jsx)("span",{children:"Resize chat panel:"}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(c.z,{size:"sm",variant:"ghost",onClick:()=>f(300),className:"h-6 px-2 text-xs",children:"Small"}),(0,a.jsx)(c.z,{size:"sm",variant:"ghost",onClick:()=>f(400),className:"h-6 px-2 text-xs",children:"Medium"}),(0,a.jsx)(c.z,{size:"sm",variant:"ghost",onClick:()=>f(600),className:"h-6 px-2 text-xs",children:"Large"})]})]})]})]})})]})]})}function h(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null),i=async()=>{try{n(!0),c(null);let e=await fetch("/api/demo-loops");if(!e.ok)throw Error("Failed to load loops: ".concat(e.status));let s=await e.json();t(s)}catch(e){console.error("Error loading loops:",e),c(e instanceof Error?e.message:"Failed to load loops")}finally{n(!1)}};return((0,r.useEffect)(()=>{i()},[]),s)?(0,a.jsx)("div",{className:"container mx-auto p-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Contextual Chat Architecture Demo"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading loops with embedded contextual chat..."})]})}):l?(0,a.jsx)("div",{className:"container mx-auto p-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Contextual Chat Architecture Demo"}),(0,a.jsxs)("div",{className:"text-red-600 mb-4",children:["Error: ",l]}),(0,a.jsx)("button",{onClick:i,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Retry"})]})}):(0,a.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Contextual Chat Architecture Demo"}),(0,a.jsx)("p",{className:"text-lg text-muted-foreground",children:"Scoped GPT Chat Integration - Each Loop with Embedded Contextual Chat"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.length," loops loaded • Chat scoped by UUID and file path • Persistent conversation history"]})]}),(0,a.jsx)("div",{className:"space-y-6",children:0===e.length?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"No loops available."})}):e.map(e=>(0,a.jsx)(m,{loop:e},e.id))}),(0,a.jsxs)("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg border text-center",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["\uD83D\uDD04 ",(0,a.jsx)("strong",{children:"Contextual Chat Architecture"})," - Each chat interaction is tied to its semantic context and becomes part of the execution history"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Expand any chat section to interact with that specific loop context • Messages persist to loop files under ## \uD83D\uDCAC Chat sections"})]})]})}},6596:function(e,t,s){"use strict";s.d(t,{Qd:function(){return o},UQ:function(){return i},o4:function(){return d},vF:function(){return x}});var a=s(7437),r=s(2265),n=s(3134),l=s(875),c=s(4508);let i=n.fC,o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.ck,{ref:t,className:(0,c.cn)("border-b",s),...r})});o.displayName="AccordionItem";let d=r.forwardRef((e,t)=>{let{className:s,children:r,...i}=e;return(0,a.jsx)(n.h4,{className:"flex",children:(0,a.jsxs)(n.xz,{ref:t,className:(0,c.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s),...i,children:[r,(0,a.jsx)(l.Z,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});d.displayName=n.xz.displayName;let x=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsx)(n.VY,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...l,children:(0,a.jsx)("div",{className:(0,c.cn)("pb-4 pt-0",s),children:r})})});x.displayName=n.VY.displayName},5974:function(e,t,s){"use strict";s.d(t,{C:function(){return c}});var a=s(7437);s(2265);var r=s(535),n=s(4508);let l=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)(l({variant:s}),t),...r})}},1047:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},3417:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])}},function(e){e.O(0,[855,650,984,437,273,971,117,744],function(){return e(e.s=7570)}),_N_E=e.O()}]);