"use strict";(()=>{var e={};e.id=613,e.ids=[613],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},629:e=>{e.exports=require("fs/promises")},5315:e=>{e.exports=require("path")},2437:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>D,patchFetch:()=>P,requestAsyncStorage:()=>v,routeModule:()=>g,serverHooks:()=>x,staticGenerationAsyncStorage:()=>f});var s={};t.r(s),t.d(s,{POST:()=>h});var a=t(9303),o=t(8716),i=t(3131),n=t(7070),u=t(629),p=t.n(u),l=t(5315),c=t.n(l);let d=["## Purpose","## ✅ Objectives","## \uD83D\uDD27 Tasks","## \uD83E\uDDFE Execution Log","## \uD83E\uDDE0 Memory Trace"],m=["## ✅ Completed Loops","## \uD83C\uDFC1 Phase Complete"];async function h(e){try{let{filePath:r,content:t,fileType:s="loop"}=await e.json();if(!t&&!r)return n.NextResponse.json({message:"Either content or filePath must be provided"},{status:400});let a=t;if(r&&!t){let e=c().resolve(process.cwd(),"../../.."),t=c().join(e,r);try{a=await p().readFile(t,"utf-8")}catch(e){return n.NextResponse.json({message:`Failed to read file: ${r}`,error:e instanceof Error?e.message:"Unknown error"},{status:404})}}let o=function(e,r=d){let t=[],s=[],a=[],o={};for(let i of r){let r=RegExp(`^${i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}`,"gm"),n=e.match(r),u=n?n.length:0;o[i]=u,0===u?(s.push(i),t.push(`Missing required section: "${i}"`)):u>1&&(a.push(i),t.push(`Duplicated section: "${i}" (found ${u} times)`))}return{isValid:0===t.length,errors:t,missingRequiredSections:s,duplicatedSections:a}}(a,"phase"===s?m:d);return o.isValid||console.warn(`Schema validation failed for ${r||"provided content"}:`,{fileType:s,errors:o.errors,missingRequiredSections:o.missingRequiredSections}),n.NextResponse.json({...o,fileType:s,filePath:r||"inline-content"})}catch(r){console.error("Validation API error:",r);let e=r instanceof Error?r.message:"Internal Server Error";return n.NextResponse.json({message:"Failed to validate schema",error:e},{status:500})}}let g=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/validate-schema/route",pathname:"/api/validate-schema",filename:"route",bundlePath:"app/api/validate-schema/route"},resolvedPagePath:"/Users/air/Projects/ora-system/src/ui/react-app/app/api/validate-schema/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:v,staticGenerationAsyncStorage:f,serverHooks:x}=g,D="/api/validate-schema/route";function P(){return(0,i.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:f})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[276,972],()=>t(2437));module.exports=s})();