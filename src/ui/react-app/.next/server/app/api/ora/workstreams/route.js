"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/ora/workstreams/route";
exports.ids = ["app/api/ora/workstreams/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = import("pg");;

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fora%2Fworkstreams%2Froute&page=%2Fapi%2Fora%2Fworkstreams%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fora%2Fworkstreams%2Froute.ts&appDir=%2FUsers%2Fair%2FProjects%2Fora-system%2Fsrc%2Fui%2Freact-app%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fair%2FProjects%2Fora-system%2Fsrc%2Fui%2Freact-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fora%2Fworkstreams%2Froute&page=%2Fapi%2Fora%2Fworkstreams%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fora%2Fworkstreams%2Froute.ts&appDir=%2FUsers%2Fair%2FProjects%2Fora-system%2Fsrc%2Fui%2Freact-app%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fair%2FProjects%2Fora-system%2Fsrc%2Fui%2Freact-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_air_Projects_ora_system_src_ui_react_app_app_api_ora_workstreams_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/ora/workstreams/route.ts */ \"(rsc)/./app/api/ora/workstreams/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_Users_air_Projects_ora_system_src_ui_react_app_app_api_ora_workstreams_route_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_Users_air_Projects_ora_system_src_ui_react_app_app_api_ora_workstreams_route_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/ora/workstreams/route\",\n        pathname: \"/api/ora/workstreams\",\n        filename: \"route\",\n        bundlePath: \"app/api/ora/workstreams/route\"\n    },\n    resolvedPagePath: \"/Users/air/Projects/ora-system/src/ui/react-app/app/api/ora/workstreams/route.ts\",\n    nextConfigOutput,\n    userland: _Users_air_Projects_ora_system_src_ui_react_app_app_api_ora_workstreams_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/ora/workstreams/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZvcmElMkZ3b3Jrc3RyZWFtcyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGb3JhJTJGd29ya3N0cmVhbXMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZvcmElMkZ3b3Jrc3RyZWFtcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmFpciUyRlByb2plY3RzJTJGb3JhLXN5c3RlbSUyRnNyYyUyRnVpJTJGcmVhY3QtYXBwJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmFpciUyRlByb2plY3RzJTJGb3JhLXN5c3RlbSUyRnNyYyUyRnVpJTJGcmVhY3QtYXBwJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNnQztBQUM3RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL29yYS1yZWFjdC1hcHAvPzMxZTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2Fpci9Qcm9qZWN0cy9vcmEtc3lzdGVtL3NyYy91aS9yZWFjdC1hcHAvYXBwL2FwaS9vcmEvd29ya3N0cmVhbXMvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL29yYS93b3Jrc3RyZWFtcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL29yYS93b3Jrc3RyZWFtc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvb3JhL3dvcmtzdHJlYW1zL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2Fpci9Qcm9qZWN0cy9vcmEtc3lzdGVtL3NyYy91aS9yZWFjdC1hcHAvYXBwL2FwaS9vcmEvd29ya3N0cmVhbXMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL29yYS93b3Jrc3RyZWFtcy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fora%2Fworkstreams%2Froute&page=%2Fapi%2Fora%2Fworkstreams%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fora%2Fworkstreams%2Froute.ts&appDir=%2FUsers%2Fair%2FProjects%2Fora-system%2Fsrc%2Fui%2Freact-app%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fair%2FProjects%2Fora-system%2Fsrc%2Fui%2Freact-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/ora/workstreams/route.ts":
/*!******************************************!*\
  !*** ./app/api/ora/workstreams/route.ts ***!
  \******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _app_ora_lib_database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/app/ora/lib/database */ \"(rsc)/./app/ora/lib/database.ts\");\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm/v4.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_app_ora_lib_database__WEBPACK_IMPORTED_MODULE_1__, pg__WEBPACK_IMPORTED_MODULE_2__]);\n([_app_ora_lib_database__WEBPACK_IMPORTED_MODULE_1__, pg__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n// Initialize connection pool\nconst pool = new pg__WEBPACK_IMPORTED_MODULE_2__.Pool({\n    connectionString: process.env.DATABASE_URL || \"postgresql://air@localhost:5432/ora_development\"\n});\nasync function POST(request) {\n    try {\n        // Check database connection\n        const dbHealthy = await (0,_app_ora_lib_database__WEBPACK_IMPORTED_MODULE_1__.checkDatabaseConnection)();\n        if (!dbHealthy) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Database connection unavailable\"\n            }, {\n                status: 503\n            });\n        }\n        const body = await request.json();\n        const { name, vision, mission, cadence, okrs, kpis, description, owner } = body;\n        // Validate required fields\n        if (!name || !vision || !mission || !cadence) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Name, vision, mission, and cadence are required\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate minimum lengths\n        if (vision.length < 10) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Vision must be at least 10 characters long\"\n            }, {\n                status: 400\n            });\n        }\n        if (mission.length < 10) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Mission must be at least 10 characters long\"\n            }, {\n                status: 400\n            });\n        }\n        if (cadence.length < 5) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Cadence must be at least 5 characters long\"\n            }, {\n                status: 400\n            });\n        }\n        // Create workstream and constitution in a transaction\n        const result = await (0,_app_ora_lib_database__WEBPACK_IMPORTED_MODULE_1__.withTransaction)(async (client)=>{\n            const workstreamId = (0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\n            // Create the workstream\n            const workstreamResult = await client.query(`INSERT INTO workstreams (id, name, description) \n         VALUES ($1, $2, $3) \n         RETURNING *`, [\n                workstreamId,\n                name,\n                description || `${name} workstream created by Ora`\n            ]);\n            // Create the constitution\n            const constitution = await (0,_app_ora_lib_database__WEBPACK_IMPORTED_MODULE_1__.saveConstitution)({\n                workstream_id: workstreamId,\n                vision,\n                mission,\n                cadence,\n                okrs: okrs || [],\n                kpis: kpis || []\n            }, client);\n            return {\n                workstream: workstreamResult.rows[0],\n                constitution\n            };\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            workstream: result.workstream,\n            constitution: result.constitution,\n            message: `Workstream \"${name}\" created successfully with Ora's guidance!`\n        });\n    } catch (error) {\n        console.error(\"Failed to create workstream:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to create workstream\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const workstream_id = searchParams.get(\"workstream_id\");\n        if (workstream_id) {\n            // Get specific workstream with constitution\n            const workstreamResult = await pool.query(\"SELECT * FROM workstreams WHERE id = $1\", [\n                workstream_id\n            ]);\n            if (workstreamResult.rows.length === 0) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Workstream not found\"\n                }, {\n                    status: 404\n                });\n            }\n            const constitution = await (0,_app_ora_lib_database__WEBPACK_IMPORTED_MODULE_1__.getConstitution)(workstream_id);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                workstream: workstreamResult.rows[0],\n                constitution\n            });\n        } else {\n            // Get all workstreams with their constitutions\n            const workstreamsResult = await pool.query(\"SELECT * FROM workstreams ORDER BY created_at DESC\");\n            // Get constitutions for all workstreams\n            const workstreamsWithConstitutions = await Promise.all(workstreamsResult.rows.map(async (workstream)=>{\n                const constitution = await (0,_app_ora_lib_database__WEBPACK_IMPORTED_MODULE_1__.getConstitution)(workstream.id);\n                return {\n                    ...workstream,\n                    constitution\n                };\n            }));\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                workstreams: workstreamsWithConstitutions,\n                total: workstreamsWithConstitutions.length\n            });\n        }\n    } catch (error) {\n        console.error(\"Failed to get workstreams:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to retrieve workstreams\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Update workstream constitution\nasync function PUT(request) {\n    try {\n        const body = await request.json();\n        const { workstream_id, vision, mission, cadence, okrs, kpis } = body;\n        if (!workstream_id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Workstream ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Check if constitution exists\n        const existing = await (0,_app_ora_lib_database__WEBPACK_IMPORTED_MODULE_1__.getConstitution)(workstream_id);\n        if (!existing) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Workstream constitution not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Update constitution\n        const updateQuery = `\n      UPDATE workstream_constitutions \n      SET \n        vision = COALESCE($2, vision),\n        mission = COALESCE($3, mission),\n        cadence = COALESCE($4, cadence),\n        okrs = COALESCE($5, okrs),\n        kpis = COALESCE($6, kpis),\n        updated_at = CURRENT_TIMESTAMP\n      WHERE workstream_id = $1\n      RETURNING *\n    `;\n        const result = await pool.query(updateQuery, [\n            workstream_id,\n            vision,\n            mission,\n            cadence,\n            okrs ? JSON.stringify(okrs) : null,\n            kpis ? JSON.stringify(kpis) : null\n        ]);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            constitution: {\n                ...result.rows[0],\n                okrs: result.rows[0].okrs || [],\n                kpis: result.rows[0].kpis || []\n            }\n        });\n    } catch (error) {\n        console.error(\"Failed to update workstream:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to update workstream\"\n        }, {\n            status: 500\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL29yYS93b3Jrc3RyZWFtcy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQXdEO0FBTXhCO0FBQ047QUFDVTtBQUVwQyw2QkFBNkI7QUFDN0IsTUFBTVEsT0FBTyxJQUFJSCxvQ0FBSUEsQ0FBQztJQUNwQkksa0JBQWtCQyxRQUFRQyxHQUFHLENBQUNDLFlBQVksSUFBSTtBQUNoRDtBQWdCTyxlQUFlQyxLQUFLQyxPQUFvQjtJQUM3QyxJQUFJO1FBQ0YsNEJBQTRCO1FBQzVCLE1BQU1DLFlBQVksTUFBTVosOEVBQXVCQTtRQUMvQyxJQUFJLENBQUNZLFdBQVc7WUFDZCxPQUFPZixxREFBWUEsQ0FBQ2dCLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87WUFBa0MsR0FDM0M7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLE1BQU1DLE9BQWdDLE1BQU1MLFFBQVFFLElBQUk7UUFDeEQsTUFBTSxFQUFFSSxJQUFJLEVBQUVDLE1BQU0sRUFBRUMsT0FBTyxFQUFFQyxPQUFPLEVBQUVDLElBQUksRUFBRUMsSUFBSSxFQUFFQyxXQUFXLEVBQUVDLEtBQUssRUFBRSxHQUFHUjtRQUUzRSwyQkFBMkI7UUFDM0IsSUFBSSxDQUFDQyxRQUFRLENBQUNDLFVBQVUsQ0FBQ0MsV0FBVyxDQUFDQyxTQUFTO1lBQzVDLE9BQU92QixxREFBWUEsQ0FBQ2dCLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87WUFBa0QsR0FDM0Q7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLDJCQUEyQjtRQUMzQixJQUFJRyxPQUFPTyxNQUFNLEdBQUcsSUFBSTtZQUN0QixPQUFPNUIscURBQVlBLENBQUNnQixJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQTZDLEdBQ3REO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxJQUFJSSxRQUFRTSxNQUFNLEdBQUcsSUFBSTtZQUN2QixPQUFPNUIscURBQVlBLENBQUNnQixJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lB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RSxPQUFPUixPQUFPO1FBQ2R1QixRQUFRdkIsS0FBSyxDQUFDLGdDQUFnQ0E7UUFDOUMsT0FBT2pCLHFEQUFZQSxDQUFDZ0IsSUFBSSxDQUN0QjtZQUFFQyxPQUFPO1FBQThCLEdBQ3ZDO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3JhLXJlYWN0LWFwcC8uL2FwcC9hcGkvb3JhL3dvcmtzdHJlYW1zL3JvdXRlLnRzPzViZjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IFxuICBzYXZlQ29uc3RpdHV0aW9uLCBcbiAgZ2V0Q29uc3RpdHV0aW9uLFxuICBjaGVja0RhdGFiYXNlQ29ubmVjdGlvbixcbiAgd2l0aFRyYW5zYWN0aW9uXG59IGZyb20gJ0AvYXBwL29yYS9saWIvZGF0YWJhc2UnO1xuaW1wb3J0IHsgUG9vbCB9IGZyb20gJ3BnJztcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuXG4vLyBJbml0aWFsaXplIGNvbm5lY3Rpb24gcG9vbFxuY29uc3QgcG9vbCA9IG5ldyBQb29sKHtcbiAgY29ubmVjdGlvblN0cmluZzogcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMIHx8ICdwb3N0Z3Jlc3FsOi8vYWlyQGxvY2FsaG9zdDo1NDMyL29yYV9kZXZlbG9wbWVudCdcbn0pO1xuXG5pbnRlcmZhY2UgQ3JlYXRlV29ya3N0cmVhbVJlcXVlc3Qge1xuICBuYW1lOiBzdHJpbmc7XG4gIHZpc2lvbjogc3RyaW5nO1xuICBtaXNzaW9uOiBzdHJpbmc7XG4gIGNhZGVuY2U6IHN0cmluZztcbiAgb2tycz86IEFycmF5PHtcbiAgICBvYmplY3RpdmU6IHN0cmluZztcbiAgICBrZXlSZXN1bHRzOiBzdHJpbmdbXTtcbiAgfT47XG4gIGtwaXM/OiBzdHJpbmdbXTtcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIG93bmVyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIC8vIENoZWNrIGRhdGFiYXNlIGNvbm5lY3Rpb25cbiAgICBjb25zdCBkYkhlYWx0aHkgPSBhd2FpdCBjaGVja0RhdGFiYXNlQ29ubmVjdGlvbigpO1xuICAgIGlmICghZGJIZWFsdGh5KSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdEYXRhYmFzZSBjb25uZWN0aW9uIHVuYXZhaWxhYmxlJyB9LFxuICAgICAgICB7IHN0YXR1czogNTAzIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgYm9keTogQ3JlYXRlV29ya3N0cmVhbVJlcXVlc3QgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBjb25zdCB7IG5hbWUsIHZpc2lvbiwgbWlzc2lvbiwgY2FkZW5jZSwgb2tycywga3BpcywgZGVzY3JpcHRpb24sIG93bmVyIH0gPSBib2R5O1xuXG4gICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzXG4gICAgaWYgKCFuYW1lIHx8ICF2aXNpb24gfHwgIW1pc3Npb24gfHwgIWNhZGVuY2UpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ05hbWUsIHZpc2lvbiwgbWlzc2lvbiwgYW5kIGNhZGVuY2UgYXJlIHJlcXVpcmVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgbWluaW11bSBsZW5ndGhzXG4gICAgaWYgKHZpc2lvbi5sZW5ndGggPCAxMCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnVmlzaW9uIG11c3QgYmUgYXQgbGVhc3QgMTAgY2hhcmFjdGVycyBsb25nJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKG1pc3Npb24ubGVuZ3RoIDwgMTApIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ01pc3Npb24gbXVzdCBiZSBhdCBsZWFzdCAxMCBjaGFyYWN0ZXJzIGxvbmcnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoY2FkZW5jZS5sZW5ndGggPCA1KSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdDYWRlbmNlIG11c3QgYmUgYXQgbGVhc3QgNSBjaGFyYWN0ZXJzIGxvbmcnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgd29ya3N0cmVhbSBhbmQgY29uc3RpdHV0aW9uIGluIGEgdHJhbnNhY3Rpb25cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB3aXRoVHJhbnNhY3Rpb24oYXN5bmMgKGNsaWVudCkgPT4ge1xuICAgICAgY29uc3Qgd29ya3N0cmVhbUlkID0gdXVpZHY0KCk7XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSB0aGUgd29ya3N0cmVhbVxuICAgICAgY29uc3Qgd29ya3N0cmVhbVJlc3VsdCA9IGF3YWl0IGNsaWVudC5xdWVyeShcbiAgICAgICAgYElOU0VSVCBJTlRPIHdvcmtzdHJlYW1zIChpZCwgbmFtZSwgZGVzY3JpcHRpb24pIFxuICAgICAgICAgVkFMVUVTICgkMSwgJDIsICQzKSBcbiAgICAgICAgIFJFVFVSTklORyAqYCxcbiAgICAgICAgW3dvcmtzdHJlYW1JZCwgbmFtZSwgZGVzY3JpcHRpb24gfHwgYCR7bmFtZX0gd29ya3N0cmVhbSBjcmVhdGVkIGJ5IE9yYWBdXG4gICAgICApO1xuXG4gICAgICAvLyBDcmVhdGUgdGhlIGNvbnN0aXR1dGlvblxuICAgICAgY29uc3QgY29uc3RpdHV0aW9uID0gYXdhaXQgc2F2ZUNvbnN0aXR1dGlvbih7XG4gICAgICAgIHdvcmtzdHJlYW1faWQ6IHdvcmtzdHJlYW1JZCxcbiAgICAgICAgdmlzaW9uLFxuICAgICAgICBtaXNzaW9uLFxuICAgICAgICBjYWRlbmNlLFxuICAgICAgICBva3JzOiBva3JzIHx8IFtdLFxuICAgICAgICBrcGlzOiBrcGlzIHx8IFtdXG4gICAgICB9LCBjbGllbnQpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICB3b3Jrc3RyZWFtOiB3b3Jrc3RyZWFtUmVzdWx0LnJvd3NbMF0sXG4gICAgICAgIGNvbnN0aXR1dGlvblxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgd29ya3N0cmVhbTogcmVzdWx0LndvcmtzdHJlYW0sXG4gICAgICBjb25zdGl0dXRpb246IHJlc3VsdC5jb25zdGl0dXRpb24sXG4gICAgICBtZXNzYWdlOiBgV29ya3N0cmVhbSBcIiR7bmFtZX1cIiBjcmVhdGVkIHN1Y2Nlc3NmdWxseSB3aXRoIE9yYSdzIGd1aWRhbmNlIWBcbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgd29ya3N0cmVhbTonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBjcmVhdGUgd29ya3N0cmVhbScgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICBjb25zdCB3b3Jrc3RyZWFtX2lkID0gc2VhcmNoUGFyYW1zLmdldCgnd29ya3N0cmVhbV9pZCcpO1xuXG4gICAgaWYgKHdvcmtzdHJlYW1faWQpIHtcbiAgICAgIC8vIEdldCBzcGVjaWZpYyB3b3Jrc3RyZWFtIHdpdGggY29uc3RpdHV0aW9uXG4gICAgICBjb25zdCB3b3Jrc3RyZWFtUmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShcbiAgICAgICAgJ1NFTEVDVCAqIEZST00gd29ya3N0cmVhbXMgV0hFUkUgaWQgPSAkMScsXG4gICAgICAgIFt3b3Jrc3RyZWFtX2lkXVxuICAgICAgKTtcblxuICAgICAgaWYgKHdvcmtzdHJlYW1SZXN1bHQucm93cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHsgZXJyb3I6ICdXb3Jrc3RyZWFtIG5vdCBmb3VuZCcgfSxcbiAgICAgICAgICB7IHN0YXR1czogNDA0IH1cbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY29uc3RpdHV0aW9uID0gYXdhaXQgZ2V0Q29uc3RpdHV0aW9uKHdvcmtzdHJlYW1faWQpO1xuXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICB3b3Jrc3RyZWFtOiB3b3Jrc3RyZWFtUmVzdWx0LnJvd3NbMF0sXG4gICAgICAgIGNvbnN0aXR1dGlvblxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEdldCBhbGwgd29ya3N0cmVhbXMgd2l0aCB0aGVpciBjb25zdGl0dXRpb25zXG4gICAgICBjb25zdCB3b3Jrc3RyZWFtc1Jlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkoXG4gICAgICAgICdTRUxFQ1QgKiBGUk9NIHdvcmtzdHJlYW1zIE9SREVSIEJZIGNyZWF0ZWRfYXQgREVTQydcbiAgICAgICk7XG5cbiAgICAgIC8vIEdldCBjb25zdGl0dXRpb25zIGZvciBhbGwgd29ya3N0cmVhbXNcbiAgICAgIGNvbnN0IHdvcmtzdHJlYW1zV2l0aENvbnN0aXR1dGlvbnMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgd29ya3N0cmVhbXNSZXN1bHQucm93cy5tYXAoYXN5bmMgKHdvcmtzdHJlYW0pID0+IHtcbiAgICAgICAgICBjb25zdCBjb25zdGl0dXRpb24gPSBhd2FpdCBnZXRDb25zdGl0dXRpb24od29ya3N0cmVhbS5pZCk7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLndvcmtzdHJlYW0sXG4gICAgICAgICAgICBjb25zdGl0dXRpb25cbiAgICAgICAgICB9O1xuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgd29ya3N0cmVhbXM6IHdvcmtzdHJlYW1zV2l0aENvbnN0aXR1dGlvbnMsXG4gICAgICAgIHRvdGFsOiB3b3Jrc3RyZWFtc1dpdGhDb25zdGl0dXRpb25zLmxlbmd0aFxuICAgICAgfSk7XG4gICAgfVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCB3b3Jrc3RyZWFtczonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byByZXRyaWV2ZSB3b3Jrc3RyZWFtcycgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuLy8gVXBkYXRlIHdvcmtzdHJlYW0gY29uc3RpdHV0aW9uXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUFVUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIGNvbnN0IHsgd29ya3N0cmVhbV9pZCwgdmlzaW9uLCBtaXNzaW9uLCBjYWRlbmNlLCBva3JzLCBrcGlzIH0gPSBib2R5O1xuXG4gICAgaWYgKCF3b3Jrc3RyZWFtX2lkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdXb3Jrc3RyZWFtIElEIGlzIHJlcXVpcmVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgY29uc3RpdHV0aW9uIGV4aXN0c1xuICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgZ2V0Q29uc3RpdHV0aW9uKHdvcmtzdHJlYW1faWQpO1xuICAgIGlmICghZXhpc3RpbmcpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ1dvcmtzdHJlYW0gY29uc3RpdHV0aW9uIG5vdCBmb3VuZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwNCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBjb25zdGl0dXRpb25cbiAgICBjb25zdCB1cGRhdGVRdWVyeSA9IGBcbiAgICAgIFVQREFURSB3b3Jrc3RyZWFtX2NvbnN0aXR1dGlvbnMgXG4gICAgICBTRVQgXG4gICAgICAgIHZpc2lvbiA9IENPQUxFU0NFKCQyLCB2aXNpb24pLFxuICAgICAgICBtaXNzaW9uID0gQ09BTEVTQ0UoJDMsIG1pc3Npb24pLFxuICAgICAgICBjYWRlbmNlID0gQ09BTEVTQ0UoJDQsIGNhZGVuY2UpLFxuICAgICAgICBva3JzID0gQ09BTEVTQ0UoJDUsIG9rcnMpLFxuICAgICAgICBrcGlzID0gQ09BTEVTQ0UoJDYsIGtwaXMpLFxuICAgICAgICB1cGRhdGVkX2F0ID0gQ1VSUkVOVF9USU1FU1RBTVBcbiAgICAgIFdIRVJFIHdvcmtzdHJlYW1faWQgPSAkMVxuICAgICAgUkVUVVJOSU5HICpcbiAgICBgO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeSh1cGRhdGVRdWVyeSwgW1xuICAgICAgd29ya3N0cmVhbV9pZCxcbiAgICAgIHZpc2lvbixcbiAgICAgIG1pc3Npb24sXG4gICAgICBjYWRlbmNlLFxuICAgICAgb2tycyA/IEpTT04uc3RyaW5naWZ5KG9rcnMpIDogbnVsbCxcbiAgICAgIGtwaXMgPyBKU09OLnN0cmluZ2lmeShrcGlzKSA6IG51bGxcbiAgICBdKTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgY29uc3RpdHV0aW9uOiB7XG4gICAgICAgIC4uLnJlc3VsdC5yb3dzWzBdLFxuICAgICAgICBva3JzOiByZXN1bHQucm93c1swXS5va3JzIHx8IFtdLFxuICAgICAgICBrcGlzOiByZXN1bHQucm93c1swXS5rcGlzIHx8IFtdXG4gICAgICB9XG4gICAgfSk7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gdXBkYXRlIHdvcmtzdHJlYW06JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gdXBkYXRlIHdvcmtzdHJlYW0nIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInNhdmVDb25zdGl0dXRpb24iLCJnZXRDb25zdGl0dXRpb24iLCJjaGVja0RhdGFiYXNlQ29ubmVjdGlvbiIsIndpdGhUcmFuc2FjdGlvbiIsIlBvb2wiLCJ2NCIsInV1aWR2NCIsInBvb2wiLCJjb25uZWN0aW9uU3RyaW5nIiwicHJvY2VzcyIsImVudiIsIkRBVEFCQVNFX1VSTCIsIlBPU1QiLCJyZXF1ZXN0IiwiZGJIZWFsdGh5IiwianNvbiIsImVycm9yIiwic3RhdHVzIiwiYm9keSIsIm5hbWUiLCJ2aXNpb24iLCJtaXNzaW9uIiwiY2FkZW5jZSIsIm9rcnMiLCJrcGlzIiwiZGVzY3JpcHRpb24iLCJvd25lciIsImxlbmd0aCIsInJlc3VsdCIsImNsaWVudCIsIndvcmtzdHJlYW1JZCIsIndvcmtzdHJlYW1SZXN1bHQiLCJxdWVyeSIsImNvbnN0aXR1dGlvbiIsIndvcmtzdHJlYW1faWQiLCJ3b3Jrc3RyZWFtIiwicm93cyIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwiY29uc29sZSIsIkdFVCIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsImdldCIsIndvcmtzdHJlYW1zUmVzdWx0Iiwid29ya3N0cmVhbXNXaXRoQ29uc3RpdHV0aW9ucyIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJpZCIsIndvcmtzdHJlYW1zIiwidG90YWwiLCJQVVQiLCJleGlzdGluZyIsInVwZGF0ZVF1ZXJ5IiwiSlNPTiIsInN0cmluZ2lmeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/ora/workstreams/route.ts\n");

/***/ }),

/***/ "(rsc)/./app/ora/lib/database.ts":
/*!*********************************!*\
  !*** ./app/ora/lib/database.ts ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkDatabaseConnection: () => (/* binding */ checkDatabaseConnection),\n/* harmony export */   closeDatabase: () => (/* binding */ closeDatabase),\n/* harmony export */   getConstitution: () => (/* binding */ getConstitution),\n/* harmony export */   getConversationHistory: () => (/* binding */ getConversationHistory),\n/* harmony export */   getPatterns: () => (/* binding */ getPatterns),\n/* harmony export */   saveConstitution: () => (/* binding */ saveConstitution),\n/* harmony export */   saveConversation: () => (/* binding */ saveConversation),\n/* harmony export */   savePattern: () => (/* binding */ savePattern),\n/* harmony export */   withTransaction: () => (/* binding */ withTransaction)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm/v4.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([pg__WEBPACK_IMPORTED_MODULE_0__]);\npg__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n// Database connection configuration\nconst connectionConfig = {\n    host: process.env.DATABASE_HOST || \"localhost\",\n    port: parseInt(process.env.DATABASE_PORT || \"5432\"),\n    database: process.env.DATABASE_NAME || \"ora_development\",\n    user: process.env.DATABASE_USER || \"air\",\n    password: process.env.DATABASE_PASSWORD || \"\",\n    // Connection pool settings\n    max: 20,\n    idleTimeoutMillis: 30000,\n    connectionTimeoutMillis: 2000\n};\n// Use DATABASE_URL if provided, otherwise use individual config\nconst pool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool(process.env.DATABASE_URL ? {\n    connectionString: process.env.DATABASE_URL\n} : connectionConfig);\n// Log connection info (without password)\nconsole.log(\"\\uD83D\\uDD17 PostgreSQL connection configured:\", {\n    host: connectionConfig.host,\n    port: connectionConfig.port,\n    database: connectionConfig.database,\n    user: connectionConfig.user\n});\n// Test database connection\npool.on(\"connect\", ()=>{\n    console.log(\"✅ Connected to PostgreSQL database\");\n});\npool.on(\"error\", (err)=>{\n    console.error(\"❌ Unexpected error on idle client\", err);\n    process.exit(-1);\n});\n// Helper function for transactions\nasync function withTransaction(callback) {\n    const client = await pool.connect();\n    try {\n        await client.query(\"BEGIN\");\n        const result = await callback(client);\n        await client.query(\"COMMIT\");\n        return result;\n    } catch (error) {\n        await client.query(\"ROLLBACK\");\n        throw error;\n    } finally{\n        client.release();\n    }\n}\n// Conversation functions\nasync function saveConversation(conversation) {\n    const id = (0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n    const query = `\n    INSERT INTO ora_conversations (id, workstream_id, message, speaker, metadata)\n    VALUES ($1, $2, $3, $4, $5)\n    RETURNING *\n  `;\n    const result = await pool.query(query, [\n        id,\n        conversation.workstream_id || null,\n        conversation.message,\n        conversation.speaker,\n        JSON.stringify(conversation.metadata || {})\n    ]);\n    return {\n        ...result.rows[0],\n        metadata: result.rows[0].metadata || {}\n    };\n}\nasync function getConversationHistory(workstream_id, limit = 50) {\n    const query = workstream_id ? \"SELECT * FROM ora_conversations WHERE workstream_id = $1 ORDER BY created_at DESC LIMIT $2\" : \"SELECT * FROM ora_conversations ORDER BY created_at DESC LIMIT $1\";\n    const params = workstream_id ? [\n        workstream_id,\n        limit\n    ] : [\n        limit\n    ];\n    const result = await pool.query(query, params);\n    return result.rows.map((row)=>({\n            ...row,\n            metadata: row.metadata || {}\n        }));\n}\n// Constitution functions\nasync function saveConstitution(constitution, client) {\n    const id = (0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n    const query = `\n    INSERT INTO workstream_constitutions (id, workstream_id, vision, mission, cadence, okrs, kpis)\n    VALUES ($1, $2, $3, $4, $5, $6, $7)\n    RETURNING *\n  `;\n    const queryClient = client || pool;\n    const result = await queryClient.query(query, [\n        id,\n        constitution.workstream_id,\n        constitution.vision,\n        constitution.mission,\n        constitution.cadence,\n        JSON.stringify(constitution.okrs || []),\n        JSON.stringify(constitution.kpis || [])\n    ]);\n    return {\n        ...result.rows[0],\n        okrs: result.rows[0].okrs || [],\n        kpis: result.rows[0].kpis || []\n    };\n}\nasync function getConstitution(workstream_id) {\n    const query = \"SELECT * FROM workstream_constitutions WHERE workstream_id = $1\";\n    const result = await pool.query(query, [\n        workstream_id\n    ]);\n    if (result.rows.length === 0) return null;\n    return {\n        ...result.rows[0],\n        okrs: result.rows[0].okrs || [],\n        kpis: result.rows[0].kpis || []\n    };\n}\n// Pattern functions\nasync function savePattern(pattern) {\n    // Check if pattern already exists\n    const existingQuery = `\n    SELECT * FROM ora_patterns \n    WHERE pattern_type = $1 AND pattern_content = $2\n  `;\n    const existing = await pool.query(existingQuery, [\n        pattern.pattern_type,\n        pattern.pattern_content\n    ]);\n    if (existing.rows.length > 0) {\n        // Update occurrence count\n        const updateQuery = `\n      UPDATE ora_patterns \n      SET occurrence_count = occurrence_count + 1, \n          last_observed = CURRENT_TIMESTAMP \n      WHERE id = $1\n      RETURNING *\n    `;\n        const result = await pool.query(updateQuery, [\n            existing.rows[0].id\n        ]);\n        return {\n            ...result.rows[0],\n            examples: result.rows[0].examples || []\n        };\n    }\n    // Insert new pattern\n    const id = (0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n    const insertQuery = `\n    INSERT INTO ora_patterns (id, pattern_type, pattern_content, examples, occurrence_count)\n    VALUES ($1, $2, $3, $4, $5)\n    RETURNING *\n  `;\n    const result = await pool.query(insertQuery, [\n        id,\n        pattern.pattern_type,\n        pattern.pattern_content,\n        JSON.stringify(pattern.examples || []),\n        pattern.occurrence_count || 1\n    ]);\n    return {\n        ...result.rows[0],\n        examples: result.rows[0].examples || []\n    };\n}\nasync function getPatterns(pattern_type, limit = 10) {\n    const query = pattern_type ? \"SELECT * FROM ora_patterns WHERE pattern_type = $1 ORDER BY occurrence_count DESC, last_observed DESC LIMIT $2\" : \"SELECT * FROM ora_patterns ORDER BY occurrence_count DESC, last_observed DESC LIMIT $1\";\n    const params = pattern_type ? [\n        pattern_type,\n        limit\n    ] : [\n        limit\n    ];\n    const result = await pool.query(query, params);\n    return result.rows.map((row)=>({\n            ...row,\n            examples: row.examples || []\n        }));\n}\n// Health check function\nasync function checkDatabaseConnection() {\n    try {\n        const result = await pool.query(\"SELECT NOW()\");\n        console.log(\"✅ Database connection healthy:\", result.rows[0].now);\n        return true;\n    } catch (error) {\n        console.error(\"❌ Database connection failed:\", error);\n        return false;\n    }\n}\n// Utility function to close database connection pool (for cleanup)\nasync function closeDatabase() {\n    await pool.end();\n    console.log(\"\\uD83D\\uDD12 Database connection pool closed\");\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S2EsS0FBSyxDQUFDQSxPQUFPZTtJQUV2QyxPQUFPZCxPQUFPVyxJQUFJLENBQUNJLEdBQUcsQ0FBQ0MsQ0FBQUEsTUFBUTtZQUM3QixHQUFHQSxHQUFHO1lBQ05rQixVQUFVbEIsSUFBSWtCLFFBQVEsSUFBSSxFQUFFO1FBQzlCO0FBQ0Y7QUFFQSx3QkFBd0I7QUFDakIsZUFBZUk7SUFDcEIsSUFBSTtRQUNGLE1BQU10QyxTQUFTLE1BQU1kLEtBQUthLEtBQUssQ0FBQztRQUNoQ1YsUUFBUUMsR0FBRyxDQUFDLGtDQUFrQ1UsT0FBT1csSUFBSSxDQUFDLEVBQUUsQ0FBQzRCLEdBQUc7UUFDaEUsT0FBTztJQUNULEVBQUUsT0FBTzlDLE9BQU87UUFDZEosUUFBUUksS0FBSyxDQUFDLGlDQUFpQ0E7UUFDL0MsT0FBTztJQUNUO0FBQ0Y7QUFFQSxtRUFBbUU7QUFDNUQsZUFBZStDO0lBQ3BCLE1BQU10RCxLQUFLdUQsR0FBRztJQUNkcEQsUUFBUUMsR0FBRyxDQUFDO0FBQ2QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcmEtcmVhY3QtYXBwLy4vYXBwL29yYS9saWIvZGF0YWJhc2UudHM/YzZlZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQb29sLCBQb29sQ2xpZW50IH0gZnJvbSAncGcnO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5cbi8vIERhdGFiYXNlIGNvbm5lY3Rpb24gY29uZmlndXJhdGlvblxuY29uc3QgY29ubmVjdGlvbkNvbmZpZyA9IHtcbiAgaG9zdDogcHJvY2Vzcy5lbnYuREFUQUJBU0VfSE9TVCB8fCAnbG9jYWxob3N0JyxcbiAgcG9ydDogcGFyc2VJbnQocHJvY2Vzcy5lbnYuREFUQUJBU0VfUE9SVCB8fCAnNTQzMicpLFxuICBkYXRhYmFzZTogcHJvY2Vzcy5lbnYuREFUQUJBU0VfTkFNRSB8fCAnb3JhX2RldmVsb3BtZW50JyxcbiAgdXNlcjogcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVNFUiB8fCAnYWlyJyxcbiAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRBVEFCQVNFX1BBU1NXT1JEIHx8ICcnLFxuICAvLyBDb25uZWN0aW9uIHBvb2wgc2V0dGluZ3NcbiAgbWF4OiAyMCwgLy8gbWF4aW11bSBudW1iZXIgb2YgY2xpZW50cyBpbiB0aGUgcG9vbFxuICBpZGxlVGltZW91dE1pbGxpczogMzAwMDAsIC8vIGhvdyBsb25nIGEgY2xpZW50IGlzIGFsbG93ZWQgdG8gcmVtYWluIGlkbGUgYmVmb3JlIGJlaW5nIGNsb3NlZFxuICBjb25uZWN0aW9uVGltZW91dE1pbGxpczogMjAwMCwgLy8gaG93IGxvbmcgdG8gdHJ5IHRvIGNvbm5lY3QgYmVmb3JlIHRpbWluZyBvdXRcbn07XG5cbi8vIFVzZSBEQVRBQkFTRV9VUkwgaWYgcHJvdmlkZWQsIG90aGVyd2lzZSB1c2UgaW5kaXZpZHVhbCBjb25maWdcbmNvbnN0IHBvb2wgPSBuZXcgUG9vbChcbiAgcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMIFxuICAgID8geyBjb25uZWN0aW9uU3RyaW5nOiBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwgfVxuICAgIDogY29ubmVjdGlvbkNvbmZpZ1xuKTtcblxuLy8gTG9nIGNvbm5lY3Rpb24gaW5mbyAod2l0aG91dCBwYXNzd29yZClcbmNvbnNvbGUubG9nKCfwn5SXIFBvc3RncmVTUUwgY29ubmVjdGlvbiBjb25maWd1cmVkOicsIHtcbiAgaG9zdDogY29ubmVjdGlvbkNvbmZpZy5ob3N0LFxuICBwb3J0OiBjb25uZWN0aW9uQ29uZmlnLnBvcnQsXG4gIGRhdGFiYXNlOiBjb25uZWN0aW9uQ29uZmlnLmRhdGFiYXNlLFxuICB1c2VyOiBjb25uZWN0aW9uQ29uZmlnLnVzZXIsXG59KTtcblxuLy8gVHlwZSBkZWZpbml0aW9uc1xuZXhwb3J0IGludGVyZmFjZSBPcmFDb252ZXJzYXRpb24ge1xuICBpZDogc3RyaW5nO1xuICB3b3Jrc3RyZWFtX2lkPzogc3RyaW5nO1xuICBtZXNzYWdlOiBzdHJpbmc7XG4gIHNwZWFrZXI6ICd1c2VyJyB8ICdvcmEnO1xuICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT47XG4gIGNyZWF0ZWRfYXQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV29ya3N0cmVhbUNvbnN0aXR1dGlvbiB7XG4gIGlkOiBzdHJpbmc7XG4gIHdvcmtzdHJlYW1faWQ6IHN0cmluZztcbiAgdmlzaW9uOiBzdHJpbmc7XG4gIG1pc3Npb246IHN0cmluZztcbiAgY2FkZW5jZTogc3RyaW5nO1xuICBva3JzPzogQXJyYXk8e1xuICAgIG9iamVjdGl2ZTogc3RyaW5nO1xuICAgIGtleVJlc3VsdHM6IHN0cmluZ1tdO1xuICB9PjtcbiAga3Bpcz86IHN0cmluZ1tdO1xuICBjcmVhdGVkX2F0Pzogc3RyaW5nO1xuICB1cGRhdGVkX2F0Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE9yYVBhdHRlcm4ge1xuICBpZDogc3RyaW5nO1xuICBwYXR0ZXJuX3R5cGU6IHN0cmluZztcbiAgcGF0dGVybl9jb250ZW50OiBzdHJpbmc7XG4gIGV4YW1wbGVzPzogc3RyaW5nW107XG4gIG9jY3VycmVuY2VfY291bnQ/OiBudW1iZXI7XG4gIGxhc3Rfb2JzZXJ2ZWQ/OiBzdHJpbmc7XG59XG5cbi8vIFRlc3QgZGF0YWJhc2UgY29ubmVjdGlvblxucG9vbC5vbignY29ubmVjdCcsICgpID0+IHtcbiAgY29uc29sZS5sb2coJ+KchSBDb25uZWN0ZWQgdG8gUG9zdGdyZVNRTCBkYXRhYmFzZScpO1xufSk7XG5cbnBvb2wub24oJ2Vycm9yJywgKGVycikgPT4ge1xuICBjb25zb2xlLmVycm9yKCfinYwgVW5leHBlY3RlZCBlcnJvciBvbiBpZGxlIGNsaWVudCcsIGVycik7XG4gIHByb2Nlc3MuZXhpdCgtMSk7XG59KTtcblxuLy8gSGVscGVyIGZ1bmN0aW9uIGZvciB0cmFuc2FjdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3aXRoVHJhbnNhY3Rpb248VD4oXG4gIGNhbGxiYWNrOiAoY2xpZW50OiBQb29sQ2xpZW50KSA9PiBQcm9taXNlPFQ+XG4pOiBQcm9taXNlPFQ+IHtcbiAgY29uc3QgY2xpZW50ID0gYXdhaXQgcG9vbC5jb25uZWN0KCk7XG4gIHRyeSB7XG4gICAgYXdhaXQgY2xpZW50LnF1ZXJ5KCdCRUdJTicpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNhbGxiYWNrKGNsaWVudCk7XG4gICAgYXdhaXQgY2xpZW50LnF1ZXJ5KCdDT01NSVQnKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGF3YWl0IGNsaWVudC5xdWVyeSgnUk9MTEJBQ0snKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfSBmaW5hbGx5IHtcbiAgICBjbGllbnQucmVsZWFzZSgpO1xuICB9XG59XG5cbi8vIENvbnZlcnNhdGlvbiBmdW5jdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlQ29udmVyc2F0aW9uKFxuICBjb252ZXJzYXRpb246IE9taXQ8T3JhQ29udmVyc2F0aW9uLCAnaWQnIHwgJ2NyZWF0ZWRfYXQnPlxuKTogUHJvbWlzZTxPcmFDb252ZXJzYXRpb24+IHtcbiAgY29uc3QgaWQgPSB1dWlkdjQoKTtcbiAgXG4gIGNvbnN0IHF1ZXJ5ID0gYFxuICAgIElOU0VSVCBJTlRPIG9yYV9jb252ZXJzYXRpb25zIChpZCwgd29ya3N0cmVhbV9pZCwgbWVzc2FnZSwgc3BlYWtlciwgbWV0YWRhdGEpXG4gICAgVkFMVUVTICgkMSwgJDIsICQzLCAkNCwgJDUpXG4gICAgUkVUVVJOSU5HICpcbiAgYDtcbiAgXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkocXVlcnksIFtcbiAgICBpZCxcbiAgICBjb252ZXJzYXRpb24ud29ya3N0cmVhbV9pZCB8fCBudWxsLFxuICAgIGNvbnZlcnNhdGlvbi5tZXNzYWdlLFxuICAgIGNvbnZlcnNhdGlvbi5zcGVha2VyLFxuICAgIEpTT04uc3RyaW5naWZ5KGNvbnZlcnNhdGlvbi5tZXRhZGF0YSB8fCB7fSlcbiAgXSk7XG4gIFxuICByZXR1cm4ge1xuICAgIC4uLnJlc3VsdC5yb3dzWzBdLFxuICAgIG1ldGFkYXRhOiByZXN1bHQucm93c1swXS5tZXRhZGF0YSB8fCB7fVxuICB9O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29udmVyc2F0aW9uSGlzdG9yeShcbiAgd29ya3N0cmVhbV9pZD86IHN0cmluZyxcbiAgbGltaXQ6IG51bWJlciA9IDUwXG4pOiBQcm9taXNlPE9yYUNvbnZlcnNhdGlvbltdPiB7XG4gIGNvbnN0IHF1ZXJ5ID0gd29ya3N0cmVhbV9pZFxuICAgID8gJ1NFTEVDVCAqIEZST00gb3JhX2NvbnZlcnNhdGlvbnMgV0hFUkUgd29ya3N0cmVhbV9pZCA9ICQxIE9SREVSIEJZIGNyZWF0ZWRfYXQgREVTQyBMSU1JVCAkMidcbiAgICA6ICdTRUxFQ1QgKiBGUk9NIG9yYV9jb252ZXJzYXRpb25zIE9SREVSIEJZIGNyZWF0ZWRfYXQgREVTQyBMSU1JVCAkMSc7XG4gIFxuICBjb25zdCBwYXJhbXMgPSB3b3Jrc3RyZWFtX2lkID8gW3dvcmtzdHJlYW1faWQsIGxpbWl0XSA6IFtsaW1pdF07XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkocXVlcnksIHBhcmFtcyk7XG4gIFxuICByZXR1cm4gcmVzdWx0LnJvd3MubWFwKHJvdyA9PiAoe1xuICAgIC4uLnJvdyxcbiAgICBtZXRhZGF0YTogcm93Lm1ldGFkYXRhIHx8IHt9XG4gIH0pKTtcbn1cblxuLy8gQ29uc3RpdHV0aW9uIGZ1bmN0aW9uc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVDb25zdGl0dXRpb24oXG4gIGNvbnN0aXR1dGlvbjogT21pdDxXb3Jrc3RyZWFtQ29uc3RpdHV0aW9uLCAnaWQnIHwgJ2NyZWF0ZWRfYXQnIHwgJ3VwZGF0ZWRfYXQnPixcbiAgY2xpZW50PzogUG9vbENsaWVudFxuKTogUHJvbWlzZTxXb3Jrc3RyZWFtQ29uc3RpdHV0aW9uPiB7XG4gIGNvbnN0IGlkID0gdXVpZHY0KCk7XG4gIFxuICBjb25zdCBxdWVyeSA9IGBcbiAgICBJTlNFUlQgSU5UTyB3b3Jrc3RyZWFtX2NvbnN0aXR1dGlvbnMgKGlkLCB3b3Jrc3RyZWFtX2lkLCB2aXNpb24sIG1pc3Npb24sIGNhZGVuY2UsIG9rcnMsIGtwaXMpXG4gICAgVkFMVUVTICgkMSwgJDIsICQzLCAkNCwgJDUsICQ2LCAkNylcbiAgICBSRVRVUk5JTkcgKlxuICBgO1xuICBcbiAgY29uc3QgcXVlcnlDbGllbnQgPSBjbGllbnQgfHwgcG9vbDtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnlDbGllbnQucXVlcnkocXVlcnksIFtcbiAgICBpZCxcbiAgICBjb25zdGl0dXRpb24ud29ya3N0cmVhbV9pZCxcbiAgICBjb25zdGl0dXRpb24udmlzaW9uLFxuICAgIGNvbnN0aXR1dGlvbi5taXNzaW9uLFxuICAgIGNvbnN0aXR1dGlvbi5jYWRlbmNlLFxuICAgIEpTT04uc3RyaW5naWZ5KGNvbnN0aXR1dGlvbi5va3JzIHx8IFtdKSxcbiAgICBKU09OLnN0cmluZ2lmeShjb25zdGl0dXRpb24ua3BpcyB8fCBbXSlcbiAgXSk7XG4gIFxuICByZXR1cm4ge1xuICAgIC4uLnJlc3VsdC5yb3dzWzBdLFxuICAgIG9rcnM6IHJlc3VsdC5yb3dzWzBdLm9rcnMgfHwgW10sXG4gICAga3BpczogcmVzdWx0LnJvd3NbMF0ua3BpcyB8fCBbXVxuICB9O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29uc3RpdHV0aW9uKHdvcmtzdHJlYW1faWQ6IHN0cmluZyk6IFByb21pc2U8V29ya3N0cmVhbUNvbnN0aXR1dGlvbiB8IG51bGw+IHtcbiAgY29uc3QgcXVlcnkgPSAnU0VMRUNUICogRlJPTSB3b3Jrc3RyZWFtX2NvbnN0aXR1dGlvbnMgV0hFUkUgd29ya3N0cmVhbV9pZCA9ICQxJztcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShxdWVyeSwgW3dvcmtzdHJlYW1faWRdKTtcbiAgXG4gIGlmIChyZXN1bHQucm93cy5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuICBcbiAgcmV0dXJuIHtcbiAgICAuLi5yZXN1bHQucm93c1swXSxcbiAgICBva3JzOiByZXN1bHQucm93c1swXS5va3JzIHx8IFtdLFxuICAgIGtwaXM6IHJlc3VsdC5yb3dzWzBdLmtwaXMgfHwgW11cbiAgfTtcbn1cblxuLy8gUGF0dGVybiBmdW5jdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlUGF0dGVybihcbiAgcGF0dGVybjogT21pdDxPcmFQYXR0ZXJuLCAnaWQnIHwgJ2xhc3Rfb2JzZXJ2ZWQnPlxuKTogUHJvbWlzZTxPcmFQYXR0ZXJuPiB7XG4gIC8vIENoZWNrIGlmIHBhdHRlcm4gYWxyZWFkeSBleGlzdHNcbiAgY29uc3QgZXhpc3RpbmdRdWVyeSA9IGBcbiAgICBTRUxFQ1QgKiBGUk9NIG9yYV9wYXR0ZXJucyBcbiAgICBXSEVSRSBwYXR0ZXJuX3R5cGUgPSAkMSBBTkQgcGF0dGVybl9jb250ZW50ID0gJDJcbiAgYDtcbiAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBwb29sLnF1ZXJ5KGV4aXN0aW5nUXVlcnksIFtcbiAgICBwYXR0ZXJuLnBhdHRlcm5fdHlwZSxcbiAgICBwYXR0ZXJuLnBhdHRlcm5fY29udGVudFxuICBdKTtcbiAgXG4gIGlmIChleGlzdGluZy5yb3dzLmxlbmd0aCA+IDApIHtcbiAgICAvLyBVcGRhdGUgb2NjdXJyZW5jZSBjb3VudFxuICAgIGNvbnN0IHVwZGF0ZVF1ZXJ5ID0gYFxuICAgICAgVVBEQVRFIG9yYV9wYXR0ZXJucyBcbiAgICAgIFNFVCBvY2N1cnJlbmNlX2NvdW50ID0gb2NjdXJyZW5jZV9jb3VudCArIDEsIFxuICAgICAgICAgIGxhc3Rfb2JzZXJ2ZWQgPSBDVVJSRU5UX1RJTUVTVEFNUCBcbiAgICAgIFdIRVJFIGlkID0gJDFcbiAgICAgIFJFVFVSTklORyAqXG4gICAgYDtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KHVwZGF0ZVF1ZXJ5LCBbZXhpc3Rpbmcucm93c1swXS5pZF0pO1xuICAgIHJldHVybiB7XG4gICAgICAuLi5yZXN1bHQucm93c1swXSxcbiAgICAgIGV4YW1wbGVzOiByZXN1bHQucm93c1swXS5leGFtcGxlcyB8fCBbXVxuICAgIH07XG4gIH1cbiAgXG4gIC8vIEluc2VydCBuZXcgcGF0dGVyblxuICBjb25zdCBpZCA9IHV1aWR2NCgpO1xuICBjb25zdCBpbnNlcnRRdWVyeSA9IGBcbiAgICBJTlNFUlQgSU5UTyBvcmFfcGF0dGVybnMgKGlkLCBwYXR0ZXJuX3R5cGUsIHBhdHRlcm5fY29udGVudCwgZXhhbXBsZXMsIG9jY3VycmVuY2VfY291bnQpXG4gICAgVkFMVUVTICgkMSwgJDIsICQzLCAkNCwgJDUpXG4gICAgUkVUVVJOSU5HICpcbiAgYDtcbiAgXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkoaW5zZXJ0UXVlcnksIFtcbiAgICBpZCxcbiAgICBwYXR0ZXJuLnBhdHRlcm5fdHlwZSxcbiAgICBwYXR0ZXJuLnBhdHRlcm5fY29udGVudCxcbiAgICBKU09OLnN0cmluZ2lmeShwYXR0ZXJuLmV4YW1wbGVzIHx8IFtdKSxcbiAgICBwYXR0ZXJuLm9jY3VycmVuY2VfY291bnQgfHwgMVxuICBdKTtcbiAgXG4gIHJldHVybiB7XG4gICAgLi4ucmVzdWx0LnJvd3NbMF0sXG4gICAgZXhhbXBsZXM6IHJlc3VsdC5yb3dzWzBdLmV4YW1wbGVzIHx8IFtdXG4gIH07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQYXR0ZXJucyhcbiAgcGF0dGVybl90eXBlPzogc3RyaW5nLFxuICBsaW1pdDogbnVtYmVyID0gMTBcbik6IFByb21pc2U8T3JhUGF0dGVybltdPiB7XG4gIGNvbnN0IHF1ZXJ5ID0gcGF0dGVybl90eXBlXG4gICAgPyAnU0VMRUNUICogRlJPTSBvcmFfcGF0dGVybnMgV0hFUkUgcGF0dGVybl90eXBlID0gJDEgT1JERVIgQlkgb2NjdXJyZW5jZV9jb3VudCBERVNDLCBsYXN0X29ic2VydmVkIERFU0MgTElNSVQgJDInXG4gICAgOiAnU0VMRUNUICogRlJPTSBvcmFfcGF0dGVybnMgT1JERVIgQlkgb2NjdXJyZW5jZV9jb3VudCBERVNDLCBsYXN0X29ic2VydmVkIERFU0MgTElNSVQgJDEnO1xuICBcbiAgY29uc3QgcGFyYW1zID0gcGF0dGVybl90eXBlID8gW3BhdHRlcm5fdHlwZSwgbGltaXRdIDogW2xpbWl0XTtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShxdWVyeSwgcGFyYW1zKTtcbiAgXG4gIHJldHVybiByZXN1bHQucm93cy5tYXAocm93ID0+ICh7XG4gICAgLi4ucm93LFxuICAgIGV4YW1wbGVzOiByb3cuZXhhbXBsZXMgfHwgW11cbiAgfSkpO1xufVxuXG4vLyBIZWFsdGggY2hlY2sgZnVuY3Rpb25cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0RhdGFiYXNlQ29ubmVjdGlvbigpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KCdTRUxFQ1QgTk9XKCknKTtcbiAgICBjb25zb2xlLmxvZygn4pyFIERhdGFiYXNlIGNvbm5lY3Rpb24gaGVhbHRoeTonLCByZXN1bHQucm93c1swXS5ub3cpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8vIFV0aWxpdHkgZnVuY3Rpb24gdG8gY2xvc2UgZGF0YWJhc2UgY29ubmVjdGlvbiBwb29sIChmb3IgY2xlYW51cClcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbG9zZURhdGFiYXNlKCkge1xuICBhd2FpdCBwb29sLmVuZCgpO1xuICBjb25zb2xlLmxvZygn8J+UkiBEYXRhYmFzZSBjb25uZWN0aW9uIHBvb2wgY2xvc2VkJyk7XG59Il0sIm5hbWVzIjpbIlBvb2wiLCJ2NCIsInV1aWR2NCIsImNvbm5lY3Rpb25Db25maWciLCJob3N0IiwicHJvY2VzcyIsImVudiIsIkRBVEFCQVNFX0hPU1QiLCJwb3J0IiwicGFyc2VJbnQiLCJEQVRBQkFTRV9QT1JUIiwiZGF0YWJhc2UiLCJEQVRBQkFTRV9OQU1FIiwidXNlciIsIkRBVEFCQVNFX1VTRVIiLCJwYXNzd29yZCIsIkRBVEFCQVNFX1BBU1NXT1JEIiwibWF4IiwiaWRsZVRpbWVvdXRNaWxsaXMiLCJjb25uZWN0aW9uVGltZW91dE1pbGxpcyIsInBvb2wiLCJEQVRBQkFTRV9VUkwiLCJjb25uZWN0aW9uU3RyaW5nIiwiY29uc29sZSIsImxvZyIsIm9uIiwiZXJyIiwiZXJyb3IiLCJleGl0Iiwid2l0aFRyYW5zYWN0aW9uIiwiY2FsbGJhY2siLCJjbGllbnQiLCJjb25uZWN0IiwicXVlcnkiLCJyZXN1bHQiLCJyZWxlYXNlIiwic2F2ZUNvbnZlcnNhdGlvbiIsImNvbnZlcnNhdGlvbiIsImlkIiwid29ya3N0cmVhbV9pZCIsIm1lc3NhZ2UiLCJzcGVha2VyIiwiSlNPTiIsInN0cmluZ2lmeSIsIm1ldGFkYXRhIiwicm93cyIsImdldENvbnZlcnNhdGlvbkhpc3RvcnkiLCJsaW1pdCIsInBhcmFtcyIsIm1hcCIsInJvdyIsInNhdmVDb25zdGl0dXRpb24iLCJjb25zdGl0dXRpb24iLCJxdWVyeUNsaWVudCIsInZpc2lvbiIsIm1pc3Npb24iLCJjYWRlbmNlIiwib2tycyIsImtwaXMiLCJnZXRDb25zdGl0dXRpb24iLCJsZW5ndGgiLCJzYXZlUGF0dGVybiIsInBhdHRlcm4iLCJleGlzdGluZ1F1ZXJ5IiwiZXhpc3RpbmciLCJwYXR0ZXJuX3R5cGUiLCJwYXR0ZXJuX2NvbnRlbnQiLCJ1cGRhdGVRdWVyeSIsImV4YW1wbGVzIiwiaW5zZXJ0UXVlcnkiLCJvY2N1cnJlbmNlX2NvdW50IiwiZ2V0UGF0dGVybnMiLCJjaGVja0RhdGFiYXNlQ29ubmVjdGlvbiIsIm5vdyIsImNsb3NlRGF0YWJhc2UiLCJlbmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/ora/lib/database.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/uuid"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fora%2Fworkstreams%2Froute&page=%2Fapi%2Fora%2Fworkstreams%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fora%2Fworkstreams%2Froute.ts&appDir=%2FUsers%2Fair%2FProjects%2Fora-system%2Fsrc%2Fui%2Freact-app%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fair%2FProjects%2Fora-system%2Fsrc%2Fui%2Freact-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();