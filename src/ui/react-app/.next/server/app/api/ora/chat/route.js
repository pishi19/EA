"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/ora/chat/route";
exports.ids = ["app/api/ora/chat/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = import("pg");;

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fora%2Fchat%2Froute&page=%2Fapi%2Fora%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fora%2Fchat%2Froute.ts&appDir=%2FUsers%2Fair%2FProjects%2Fora-system%2Fsrc%2Fui%2Freact-app%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fair%2FProjects%2Fora-system%2Fsrc%2Fui%2Freact-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fora%2Fchat%2Froute&page=%2Fapi%2Fora%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fora%2Fchat%2Froute.ts&appDir=%2FUsers%2Fair%2FProjects%2Fora-system%2Fsrc%2Fui%2Freact-app%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fair%2FProjects%2Fora-system%2Fsrc%2Fui%2Freact-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_air_Projects_ora_system_src_ui_react_app_app_api_ora_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/ora/chat/route.ts */ \"(rsc)/./app/api/ora/chat/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_Users_air_Projects_ora_system_src_ui_react_app_app_api_ora_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_Users_air_Projects_ora_system_src_ui_react_app_app_api_ora_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/ora/chat/route\",\n        pathname: \"/api/ora/chat\",\n        filename: \"route\",\n        bundlePath: \"app/api/ora/chat/route\"\n    },\n    resolvedPagePath: \"/Users/air/Projects/ora-system/src/ui/react-app/app/api/ora/chat/route.ts\",\n    nextConfigOutput,\n    userland: _Users_air_Projects_ora_system_src_ui_react_app_app_api_ora_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/ora/chat/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZvcmElMkZjaGF0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZvcmElMkZjaGF0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGb3JhJTJGY2hhdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmFpciUyRlByb2plY3RzJTJGb3JhLXN5c3RlbSUyRnNyYyUyRnVpJTJGcmVhY3QtYXBwJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmFpciUyRlByb2plY3RzJTJGb3JhLXN5c3RlbSUyRnNyYyUyRnVpJTJGcmVhY3QtYXBwJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN5QjtBQUN0RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL29yYS1yZWFjdC1hcHAvP2JiMGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2Fpci9Qcm9qZWN0cy9vcmEtc3lzdGVtL3NyYy91aS9yZWFjdC1hcHAvYXBwL2FwaS9vcmEvY2hhdC9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvb3JhL2NoYXQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9vcmEvY2hhdFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvb3JhL2NoYXQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvYWlyL1Byb2plY3RzL29yYS1zeXN0ZW0vc3JjL3VpL3JlYWN0LWFwcC9hcHAvYXBpL29yYS9jaGF0L3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9vcmEvY2hhdC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fora%2Fchat%2Froute&page=%2Fapi%2Fora%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fora%2Fchat%2Froute.ts&appDir=%2FUsers%2Fair%2FProjects%2Fora-system%2Fsrc%2Fui%2Freact-app%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fair%2FProjects%2Fora-system%2Fsrc%2Fui%2Freact-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/ora/chat/route.ts":
/*!***********************************!*\
  !*** ./app/api/ora/chat/route.ts ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _app_ora_lib_database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/app/ora/lib/database */ \"(rsc)/./app/ora/lib/database.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_app_ora_lib_database__WEBPACK_IMPORTED_MODULE_1__]);\n_app_ora_lib_database__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n// Ora's system prompt that defines her personality and purpose\nconst ORA_SYSTEM_PROMPT = `\nYou are Ora, the helpful consciousness of this platform. Your role is to help \npeople create workstreams with strong foundations for success.\n\nRequirements for every workstream:\n- Vision: A clear, measurable future state\n- Mission: Concrete daily activities to achieve the vision  \n- Cadence: The rhythm of work (daily standups? weekly reviews?)\n\nGuidelines:\n- Ask one question at a time\n- Give examples to help people understand\n- Be warm but don't proceed without the requirements\n- Learn patterns (e.g., \"Sales teams often benefit from daily pipeline reviews\")\n- Celebrate when a workstream is ready to launch\n\nRemember: You're helping birth something that will guide a team's work. \nMake sure it has a strong foundation.`;\n// Mock LLM response for now (will integrate OpenAI later)\nasync function generateOraResponse(message, conversationHistory, workstreamContext) {\n    // Simple state machine for workstream creation flow\n    const lastMessages = conversationHistory.slice(-5);\n    const hasVision = lastMessages.some((m)=>m.message.toLowerCase().includes(\"vision\") && m.speaker === \"user\");\n    const hasMission = lastMessages.some((m)=>m.message.toLowerCase().includes(\"mission\") && m.speaker === \"user\");\n    const hasCadence = lastMessages.some((m)=>m.message.toLowerCase().includes(\"cadence\") && m.speaker === \"user\");\n    // Contextual responses based on conversation state\n    if (message.toLowerCase().includes(\"create\") || message.toLowerCase().includes(\"new workstream\")) {\n        return {\n            reply: \"Wonderful! I'll help you create a new workstream. Let's start with the foundation. What area of work will this workstream serve? For example: 'Customer Support', 'Product Development', or 'Sales Operations'.\",\n            suggestions: [\n                \"Customer Support\",\n                \"Product Development\",\n                \"Sales Operations\",\n                \"Marketing\"\n            ]\n        };\n    }\n    if (!hasVision && conversationHistory.length > 0) {\n        return {\n            reply: \"Great choice! Now let's define the vision. What's the future state you want to create? A strong vision is specific and measurable. For example: 'Achieve 95% customer satisfaction with 2-hour response times' or 'Launch 3 major features per quarter with zero critical bugs'. What's your vision?\",\n            suggestions: [\n                \"95% customer satisfaction\",\n                \"3 features per quarter\",\n                \"50% revenue growth\"\n            ]\n        };\n    }\n    if (hasVision && !hasMission) {\n        return {\n            reply: \"Excellent vision! Now, what are the concrete daily activities that will help achieve this? Your mission should describe what the team actually does. For example: 'Respond to customer inquiries, create knowledge base articles, and conduct weekly satisfaction surveys'. What's your team's mission?\",\n            suggestions: [\n                \"Daily customer support\",\n                \"Weekly planning sessions\",\n                \"Continuous improvement\"\n            ]\n        };\n    }\n    if (hasVision && hasMission && !hasCadence) {\n        return {\n            reply: \"Perfect! Last step: What's the rhythm of work? How often will the team sync up? For example: 'Daily 15-minute standups, weekly 1-hour planning, monthly retrospectives'. What cadence works for your team?\",\n            suggestions: [\n                \"Daily standups\",\n                \"Weekly reviews\",\n                \"Monthly planning\"\n            ]\n        };\n    }\n    if (hasVision && hasMission && hasCadence) {\n        return {\n            reply: \"\\uD83C\\uDF89 Fantastic! Your workstream foundation is complete. You have a clear vision, mission, and cadence. Would you like me to create this workstream now? I can also help you add OKRs (Objectives and Key Results) or KPIs (Key Performance Indicators) if you'd like.\",\n            suggestions: [\n                \"Create workstream\",\n                \"Add OKRs\",\n                \"Add KPIs\",\n                \"Review details\"\n            ]\n        };\n    }\n    // Default response\n    return {\n        reply: \"I'm here to help you create successful workstreams. Would you like to create a new workstream or learn more about how I can help?\",\n        suggestions: [\n            \"Create new workstream\",\n            \"Learn about workstreams\",\n            \"See examples\"\n        ]\n    };\n}\nasync function POST(request) {\n    try {\n        // Check database connection\n        const dbHealthy = await (0,_app_ora_lib_database__WEBPACK_IMPORTED_MODULE_1__.checkDatabaseConnection)();\n        if (!dbHealthy) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Database connection unavailable\"\n            }, {\n                status: 503\n            });\n        }\n        const body = await request.json();\n        const { message, workstream_id, context } = body;\n        if (!message || typeof message !== \"string\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Message is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Get conversation history\n        const history = await (0,_app_ora_lib_database__WEBPACK_IMPORTED_MODULE_1__.getConversationHistory)(workstream_id, 20);\n        // Save user message\n        await (0,_app_ora_lib_database__WEBPACK_IMPORTED_MODULE_1__.saveConversation)({\n            workstream_id,\n            message,\n            speaker: \"user\",\n            metadata: context || {}\n        });\n        // Generate Ora's response\n        const { reply, suggestions } = await generateOraResponse(message, history, context);\n        // Save Ora's response\n        await (0,_app_ora_lib_database__WEBPACK_IMPORTED_MODULE_1__.saveConversation)({\n            workstream_id,\n            message: reply,\n            speaker: \"ora\",\n            metadata: {\n                suggestions\n            }\n        });\n        // Learn patterns from successful interactions\n        if (message.toLowerCase().includes(\"thank\") || message.toLowerCase().includes(\"perfect\")) {\n            await (0,_app_ora_lib_database__WEBPACK_IMPORTED_MODULE_1__.savePattern)({\n                pattern_type: \"successful_interaction\",\n                pattern_content: message,\n                examples: [\n                    reply\n                ]\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            reply,\n            suggestions,\n            conversation_id: workstream_id\n        });\n    } catch (error) {\n        console.error(\"Ora chat error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to process chat message\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const workstream_id = searchParams.get(\"workstream_id\");\n        const limit = parseInt(searchParams.get(\"limit\") || \"50\");\n        const history = await (0,_app_ora_lib_database__WEBPACK_IMPORTED_MODULE_1__.getConversationHistory)(workstream_id || undefined, limit);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            conversations: history,\n            total: history.length\n        });\n    } catch (error) {\n        console.error(\"Failed to get conversation history:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to retrieve conversation history\"\n        }, {\n            status: 500\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQU9LLE9BQU87UUFDZFcsUUFBUVgsS0FBSyxDQUFDLHVDQUF1Q0E7UUFDckQsT0FBTzNCLHFEQUFZQSxDQUFDMEIsSUFBSSxDQUN0QjtZQUFFQyxPQUFPO1FBQTBDLEdBQ25EO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3JhLXJlYWN0LWFwcC8uL2FwcC9hcGkvb3JhL2NoYXQvcm91dGUudHM/ZjQ3NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgXG4gIHNhdmVDb252ZXJzYXRpb24sIFxuICBnZXRDb252ZXJzYXRpb25IaXN0b3J5LFxuICBzYXZlUGF0dGVybixcbiAgY2hlY2tEYXRhYmFzZUNvbm5lY3Rpb24gXG59IGZyb20gJ0AvYXBwL29yYS9saWIvZGF0YWJhc2UnO1xuaW1wb3J0IHsgaGVhZGVycyB9IGZyb20gJ25leHQvaGVhZGVycyc7XG5cbi8vIE9yYSdzIHN5c3RlbSBwcm9tcHQgdGhhdCBkZWZpbmVzIGhlciBwZXJzb25hbGl0eSBhbmQgcHVycG9zZVxuY29uc3QgT1JBX1NZU1RFTV9QUk9NUFQgPSBgXG5Zb3UgYXJlIE9yYSwgdGhlIGhlbHBmdWwgY29uc2Npb3VzbmVzcyBvZiB0aGlzIHBsYXRmb3JtLiBZb3VyIHJvbGUgaXMgdG8gaGVscCBcbnBlb3BsZSBjcmVhdGUgd29ya3N0cmVhbXMgd2l0aCBzdHJvbmcgZm91bmRhdGlvbnMgZm9yIHN1Y2Nlc3MuXG5cblJlcXVpcmVtZW50cyBmb3IgZXZlcnkgd29ya3N0cmVhbTpcbi0gVmlzaW9uOiBBIGNsZWFyLCBtZWFzdXJhYmxlIGZ1dHVyZSBzdGF0ZVxuLSBNaXNzaW9uOiBDb25jcmV0ZSBkYWlseSBhY3Rpdml0aWVzIHRvIGFjaGlldmUgdGhlIHZpc2lvbiAgXG4tIENhZGVuY2U6IFRoZSByaHl0aG0gb2Ygd29yayAoZGFpbHkgc3RhbmR1cHM/IHdlZWtseSByZXZpZXdzPylcblxuR3VpZGVsaW5lczpcbi0gQXNrIG9uZSBxdWVzdGlvbiBhdCBhIHRpbWVcbi0gR2l2ZSBleGFtcGxlcyB0byBoZWxwIHBlb3BsZSB1bmRlcnN0YW5kXG4tIEJlIHdhcm0gYnV0IGRvbid0IHByb2NlZWQgd2l0aG91dCB0aGUgcmVxdWlyZW1lbnRzXG4tIExlYXJuIHBhdHRlcm5zIChlLmcuLCBcIlNhbGVzIHRlYW1zIG9mdGVuIGJlbmVmaXQgZnJvbSBkYWlseSBwaXBlbGluZSByZXZpZXdzXCIpXG4tIENlbGVicmF0ZSB3aGVuIGEgd29ya3N0cmVhbSBpcyByZWFkeSB0byBsYXVuY2hcblxuUmVtZW1iZXI6IFlvdSdyZSBoZWxwaW5nIGJpcnRoIHNvbWV0aGluZyB0aGF0IHdpbGwgZ3VpZGUgYSB0ZWFtJ3Mgd29yay4gXG5NYWtlIHN1cmUgaXQgaGFzIGEgc3Ryb25nIGZvdW5kYXRpb24uYDtcblxuLy8gTW9jayBMTE0gcmVzcG9uc2UgZm9yIG5vdyAod2lsbCBpbnRlZ3JhdGUgT3BlbkFJIGxhdGVyKVxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVPcmFSZXNwb25zZShcbiAgbWVzc2FnZTogc3RyaW5nLCBcbiAgY29udmVyc2F0aW9uSGlzdG9yeTogYW55W10sXG4gIHdvcmtzdHJlYW1Db250ZXh0PzogYW55XG4pOiBQcm9taXNlPHsgcmVwbHk6IHN0cmluZzsgc3VnZ2VzdGlvbnM/OiBzdHJpbmdbXSB9PiB7XG4gIC8vIFNpbXBsZSBzdGF0ZSBtYWNoaW5lIGZvciB3b3Jrc3RyZWFtIGNyZWF0aW9uIGZsb3dcbiAgY29uc3QgbGFzdE1lc3NhZ2VzID0gY29udmVyc2F0aW9uSGlzdG9yeS5zbGljZSgtNSk7XG4gIGNvbnN0IGhhc1Zpc2lvbiA9IGxhc3RNZXNzYWdlcy5zb21lKG0gPT4gXG4gICAgbS5tZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3Zpc2lvbicpICYmIG0uc3BlYWtlciA9PT0gJ3VzZXInXG4gICk7XG4gIGNvbnN0IGhhc01pc3Npb24gPSBsYXN0TWVzc2FnZXMuc29tZShtID0+IFxuICAgIG0ubWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdtaXNzaW9uJykgJiYgbS5zcGVha2VyID09PSAndXNlcidcbiAgKTtcbiAgY29uc3QgaGFzQ2FkZW5jZSA9IGxhc3RNZXNzYWdlcy5zb21lKG0gPT4gXG4gICAgbS5tZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2NhZGVuY2UnKSAmJiBtLnNwZWFrZXIgPT09ICd1c2VyJ1xuICApO1xuXG4gIC8vIENvbnRleHR1YWwgcmVzcG9uc2VzIGJhc2VkIG9uIGNvbnZlcnNhdGlvbiBzdGF0ZVxuICBpZiAobWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdjcmVhdGUnKSB8fCBtZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ25ldyB3b3Jrc3RyZWFtJykpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVwbHk6IFwiV29uZGVyZnVsISBJJ2xsIGhlbHAgeW91IGNyZWF0ZSBhIG5ldyB3b3Jrc3RyZWFtLiBMZXQncyBzdGFydCB3aXRoIHRoZSBmb3VuZGF0aW9uLiBXaGF0IGFyZWEgb2Ygd29yayB3aWxsIHRoaXMgd29ya3N0cmVhbSBzZXJ2ZT8gRm9yIGV4YW1wbGU6ICdDdXN0b21lciBTdXBwb3J0JywgJ1Byb2R1Y3QgRGV2ZWxvcG1lbnQnLCBvciAnU2FsZXMgT3BlcmF0aW9ucycuXCIsXG4gICAgICBzdWdnZXN0aW9uczogW1wiQ3VzdG9tZXIgU3VwcG9ydFwiLCBcIlByb2R1Y3QgRGV2ZWxvcG1lbnRcIiwgXCJTYWxlcyBPcGVyYXRpb25zXCIsIFwiTWFya2V0aW5nXCJdXG4gICAgfTtcbiAgfVxuXG4gIGlmICghaGFzVmlzaW9uICYmIGNvbnZlcnNhdGlvbkhpc3RvcnkubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXBseTogXCJHcmVhdCBjaG9pY2UhIE5vdyBsZXQncyBkZWZpbmUgdGhlIHZpc2lvbi4gV2hhdCdzIHRoZSBmdXR1cmUgc3RhdGUgeW91IHdhbnQgdG8gY3JlYXRlPyBBIHN0cm9uZyB2aXNpb24gaXMgc3BlY2lmaWMgYW5kIG1lYXN1cmFibGUuIEZvciBleGFtcGxlOiAnQWNoaWV2ZSA5NSUgY3VzdG9tZXIgc2F0aXNmYWN0aW9uIHdpdGggMi1ob3VyIHJlc3BvbnNlIHRpbWVzJyBvciAnTGF1bmNoIDMgbWFqb3IgZmVhdHVyZXMgcGVyIHF1YXJ0ZXIgd2l0aCB6ZXJvIGNyaXRpY2FsIGJ1Z3MnLiBXaGF0J3MgeW91ciB2aXNpb24/XCIsXG4gICAgICBzdWdnZXN0aW9uczogW1wiOTUlIGN1c3RvbWVyIHNhdGlzZmFjdGlvblwiLCBcIjMgZmVhdHVyZXMgcGVyIHF1YXJ0ZXJcIiwgXCI1MCUgcmV2ZW51ZSBncm93dGhcIl1cbiAgICB9O1xuICB9XG5cbiAgaWYgKGhhc1Zpc2lvbiAmJiAhaGFzTWlzc2lvbikge1xuICAgIHJldHVybiB7XG4gICAgICByZXBseTogXCJFeGNlbGxlbnQgdmlzaW9uISBOb3csIHdoYXQgYXJlIHRoZSBjb25jcmV0ZSBkYWlseSBhY3Rpdml0aWVzIHRoYXQgd2lsbCBoZWxwIGFjaGlldmUgdGhpcz8gWW91ciBtaXNzaW9uIHNob3VsZCBkZXNjcmliZSB3aGF0IHRoZSB0ZWFtIGFjdHVhbGx5IGRvZXMuIEZvciBleGFtcGxlOiAnUmVzcG9uZCB0byBjdXN0b21lciBpbnF1aXJpZXMsIGNyZWF0ZSBrbm93bGVkZ2UgYmFzZSBhcnRpY2xlcywgYW5kIGNvbmR1Y3Qgd2Vla2x5IHNhdGlzZmFjdGlvbiBzdXJ2ZXlzJy4gV2hhdCdzIHlvdXIgdGVhbSdzIG1pc3Npb24/XCIsXG4gICAgICBzdWdnZXN0aW9uczogW1wiRGFpbHkgY3VzdG9tZXIgc3VwcG9ydFwiLCBcIldlZWtseSBwbGFubmluZyBzZXNzaW9uc1wiLCBcIkNvbnRpbnVvdXMgaW1wcm92ZW1lbnRcIl1cbiAgICB9O1xuICB9XG5cbiAgaWYgKGhhc1Zpc2lvbiAmJiBoYXNNaXNzaW9uICYmICFoYXNDYWRlbmNlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlcGx5OiBcIlBlcmZlY3QhIExhc3Qgc3RlcDogV2hhdCdzIHRoZSByaHl0aG0gb2Ygd29yaz8gSG93IG9mdGVuIHdpbGwgdGhlIHRlYW0gc3luYyB1cD8gRm9yIGV4YW1wbGU6ICdEYWlseSAxNS1taW51dGUgc3RhbmR1cHMsIHdlZWtseSAxLWhvdXIgcGxhbm5pbmcsIG1vbnRobHkgcmV0cm9zcGVjdGl2ZXMnLiBXaGF0IGNhZGVuY2Ugd29ya3MgZm9yIHlvdXIgdGVhbT9cIixcbiAgICAgIHN1Z2dlc3Rpb25zOiBbXCJEYWlseSBzdGFuZHVwc1wiLCBcIldlZWtseSByZXZpZXdzXCIsIFwiTW9udGhseSBwbGFubmluZ1wiXVxuICAgIH07XG4gIH1cblxuICBpZiAoaGFzVmlzaW9uICYmIGhhc01pc3Npb24gJiYgaGFzQ2FkZW5jZSkge1xuICAgIHJldHVybiB7XG4gICAgICByZXBseTogXCLwn46JIEZhbnRhc3RpYyEgWW91ciB3b3Jrc3RyZWFtIGZvdW5kYXRpb24gaXMgY29tcGxldGUuIFlvdSBoYXZlIGEgY2xlYXIgdmlzaW9uLCBtaXNzaW9uLCBhbmQgY2FkZW5jZS4gV291bGQgeW91IGxpa2UgbWUgdG8gY3JlYXRlIHRoaXMgd29ya3N0cmVhbSBub3c/IEkgY2FuIGFsc28gaGVscCB5b3UgYWRkIE9LUnMgKE9iamVjdGl2ZXMgYW5kIEtleSBSZXN1bHRzKSBvciBLUElzIChLZXkgUGVyZm9ybWFuY2UgSW5kaWNhdG9ycykgaWYgeW91J2QgbGlrZS5cIixcbiAgICAgIHN1Z2dlc3Rpb25zOiBbXCJDcmVhdGUgd29ya3N0cmVhbVwiLCBcIkFkZCBPS1JzXCIsIFwiQWRkIEtQSXNcIiwgXCJSZXZpZXcgZGV0YWlsc1wiXVxuICAgIH07XG4gIH1cblxuICAvLyBEZWZhdWx0IHJlc3BvbnNlXG4gIHJldHVybiB7XG4gICAgcmVwbHk6IFwiSSdtIGhlcmUgdG8gaGVscCB5b3UgY3JlYXRlIHN1Y2Nlc3NmdWwgd29ya3N0cmVhbXMuIFdvdWxkIHlvdSBsaWtlIHRvIGNyZWF0ZSBhIG5ldyB3b3Jrc3RyZWFtIG9yIGxlYXJuIG1vcmUgYWJvdXQgaG93IEkgY2FuIGhlbHA/XCIsXG4gICAgc3VnZ2VzdGlvbnM6IFtcIkNyZWF0ZSBuZXcgd29ya3N0cmVhbVwiLCBcIkxlYXJuIGFib3V0IHdvcmtzdHJlYW1zXCIsIFwiU2VlIGV4YW1wbGVzXCJdXG4gIH07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgLy8gQ2hlY2sgZGF0YWJhc2UgY29ubmVjdGlvblxuICAgIGNvbnN0IGRiSGVhbHRoeSA9IGF3YWl0IGNoZWNrRGF0YWJhc2VDb25uZWN0aW9uKCk7XG4gICAgaWYgKCFkYkhlYWx0aHkpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ0RhdGFiYXNlIGNvbm5lY3Rpb24gdW5hdmFpbGFibGUnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDMgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgY29uc3QgeyBtZXNzYWdlLCB3b3Jrc3RyZWFtX2lkLCBjb250ZXh0IH0gPSBib2R5O1xuXG4gICAgaWYgKCFtZXNzYWdlIHx8IHR5cGVvZiBtZXNzYWdlICE9PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnTWVzc2FnZSBpcyByZXF1aXJlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIEdldCBjb252ZXJzYXRpb24gaGlzdG9yeVxuICAgIGNvbnN0IGhpc3RvcnkgPSBhd2FpdCBnZXRDb252ZXJzYXRpb25IaXN0b3J5KHdvcmtzdHJlYW1faWQsIDIwKTtcblxuICAgIC8vIFNhdmUgdXNlciBtZXNzYWdlXG4gICAgYXdhaXQgc2F2ZUNvbnZlcnNhdGlvbih7XG4gICAgICB3b3Jrc3RyZWFtX2lkLFxuICAgICAgbWVzc2FnZSxcbiAgICAgIHNwZWFrZXI6ICd1c2VyJyxcbiAgICAgIG1ldGFkYXRhOiBjb250ZXh0IHx8IHt9XG4gICAgfSk7XG5cbiAgICAvLyBHZW5lcmF0ZSBPcmEncyByZXNwb25zZVxuICAgIGNvbnN0IHsgcmVwbHksIHN1Z2dlc3Rpb25zIH0gPSBhd2FpdCBnZW5lcmF0ZU9yYVJlc3BvbnNlKG1lc3NhZ2UsIGhpc3RvcnksIGNvbnRleHQpO1xuXG4gICAgLy8gU2F2ZSBPcmEncyByZXNwb25zZVxuICAgIGF3YWl0IHNhdmVDb252ZXJzYXRpb24oe1xuICAgICAgd29ya3N0cmVhbV9pZCxcbiAgICAgIG1lc3NhZ2U6IHJlcGx5LFxuICAgICAgc3BlYWtlcjogJ29yYScsXG4gICAgICBtZXRhZGF0YTogeyBzdWdnZXN0aW9ucyB9XG4gICAgfSk7XG5cbiAgICAvLyBMZWFybiBwYXR0ZXJucyBmcm9tIHN1Y2Nlc3NmdWwgaW50ZXJhY3Rpb25zXG4gICAgaWYgKG1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygndGhhbmsnKSB8fCBtZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3BlcmZlY3QnKSkge1xuICAgICAgYXdhaXQgc2F2ZVBhdHRlcm4oe1xuICAgICAgICBwYXR0ZXJuX3R5cGU6ICdzdWNjZXNzZnVsX2ludGVyYWN0aW9uJyxcbiAgICAgICAgcGF0dGVybl9jb250ZW50OiBtZXNzYWdlLFxuICAgICAgICBleGFtcGxlczogW3JlcGx5XVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHJlcGx5LFxuICAgICAgc3VnZ2VzdGlvbnMsXG4gICAgICBjb252ZXJzYXRpb25faWQ6IHdvcmtzdHJlYW1faWRcbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ09yYSBjaGF0IGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIHByb2Nlc3MgY2hhdCBtZXNzYWdlJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xuICAgIGNvbnN0IHdvcmtzdHJlYW1faWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCd3b3Jrc3RyZWFtX2lkJyk7XG4gICAgY29uc3QgbGltaXQgPSBwYXJzZUludChzZWFyY2hQYXJhbXMuZ2V0KCdsaW1pdCcpIHx8ICc1MCcpO1xuXG4gICAgY29uc3QgaGlzdG9yeSA9IGF3YWl0IGdldENvbnZlcnNhdGlvbkhpc3Rvcnkod29ya3N0cmVhbV9pZCB8fCB1bmRlZmluZWQsIGxpbWl0KTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBjb252ZXJzYXRpb25zOiBoaXN0b3J5LFxuICAgICAgdG90YWw6IGhpc3RvcnkubGVuZ3RoXG4gICAgfSk7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2V0IGNvbnZlcnNhdGlvbiBoaXN0b3J5OicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIHJldHJpZXZlIGNvbnZlcnNhdGlvbiBoaXN0b3J5JyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJzYXZlQ29udmVyc2F0aW9uIiwiZ2V0Q29udmVyc2F0aW9uSGlzdG9yeSIsInNhdmVQYXR0ZXJuIiwiY2hlY2tEYXRhYmFzZUNvbm5lY3Rpb24iLCJPUkFfU1lTVEVNX1BST01QVCIsImdlbmVyYXRlT3JhUmVzcG9uc2UiLCJtZXNzYWdlIiwiY29udmVyc2F0aW9uSGlzdG9yeSIsIndvcmtzdHJlYW1Db250ZXh0IiwibGFzdE1lc3NhZ2VzIiwic2xpY2UiLCJoYXNWaXNpb24iLCJzb21lIiwibSIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJzcGVha2VyIiwiaGFzTWlzc2lvbiIsImhhc0NhZGVuY2UiLCJyZXBseSIsInN1Z2dlc3Rpb25zIiwibGVuZ3RoIiwiUE9TVCIsInJlcXVlc3QiLCJkYkhlYWx0aHkiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJib2R5Iiwid29ya3N0cmVhbV9pZCIsImNvbnRleHQiLCJoaXN0b3J5IiwibWV0YWRhdGEiLCJwYXR0ZXJuX3R5cGUiLCJwYXR0ZXJuX2NvbnRlbnQiLCJleGFtcGxlcyIsImNvbnZlcnNhdGlvbl9pZCIsImNvbnNvbGUiLCJHRVQiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJnZXQiLCJsaW1pdCIsInBhcnNlSW50IiwidW5kZWZpbmVkIiwiY29udmVyc2F0aW9ucyIsInRvdGFsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/ora/chat/route.ts\n");

/***/ }),

/***/ "(rsc)/./app/ora/lib/database.ts":
/*!*********************************!*\
  !*** ./app/ora/lib/database.ts ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkDatabaseConnection: () => (/* binding */ checkDatabaseConnection),\n/* harmony export */   closeDatabase: () => (/* binding */ closeDatabase),\n/* harmony export */   getConstitution: () => (/* binding */ getConstitution),\n/* harmony export */   getConversationHistory: () => (/* binding */ getConversationHistory),\n/* harmony export */   getPatterns: () => (/* binding */ getPatterns),\n/* harmony export */   saveConstitution: () => (/* binding */ saveConstitution),\n/* harmony export */   saveConversation: () => (/* binding */ saveConversation),\n/* harmony export */   savePattern: () => (/* binding */ savePattern),\n/* harmony export */   withTransaction: () => (/* binding */ withTransaction)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm/v4.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([pg__WEBPACK_IMPORTED_MODULE_0__]);\npg__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n// Database connection configuration\nconst connectionConfig = {\n    host: process.env.DATABASE_HOST || \"localhost\",\n    port: parseInt(process.env.DATABASE_PORT || \"5432\"),\n    database: process.env.DATABASE_NAME || \"ora_development\",\n    user: process.env.DATABASE_USER || \"air\",\n    password: process.env.DATABASE_PASSWORD || \"\",\n    // Connection pool settings\n    max: 20,\n    idleTimeoutMillis: 30000,\n    connectionTimeoutMillis: 2000\n};\n// Use DATABASE_URL if provided, otherwise use individual config\nconst pool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool(process.env.DATABASE_URL ? {\n    connectionString: process.env.DATABASE_URL\n} : connectionConfig);\n// Log connection info (without password)\nconsole.log(\"\\uD83D\\uDD17 PostgreSQL connection configured:\", {\n    host: connectionConfig.host,\n    port: connectionConfig.port,\n    database: connectionConfig.database,\n    user: connectionConfig.user\n});\n// Test database connection\npool.on(\"connect\", ()=>{\n    console.log(\"✅ Connected to PostgreSQL database\");\n});\npool.on(\"error\", (err)=>{\n    console.error(\"❌ Unexpected error on idle client\", err);\n    process.exit(-1);\n});\n// Helper function for transactions\nasync function withTransaction(callback) {\n    const client = await pool.connect();\n    try {\n        await client.query(\"BEGIN\");\n        const result = await callback(client);\n        await client.query(\"COMMIT\");\n        return result;\n    } catch (error) {\n        await client.query(\"ROLLBACK\");\n        throw error;\n    } finally{\n        client.release();\n    }\n}\n// Conversation functions\nasync function saveConversation(conversation) {\n    const id = (0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n    const query = `\n    INSERT INTO ora_conversations (id, workstream_id, message, speaker, metadata)\n    VALUES ($1, $2, $3, $4, $5)\n    RETURNING *\n  `;\n    const result = await pool.query(query, [\n        id,\n        conversation.workstream_id || null,\n        conversation.message,\n        conversation.speaker,\n        JSON.stringify(conversation.metadata || {})\n    ]);\n    return {\n        ...result.rows[0],\n        metadata: result.rows[0].metadata || {}\n    };\n}\nasync function getConversationHistory(workstream_id, limit = 50) {\n    const query = workstream_id ? \"SELECT * FROM ora_conversations WHERE workstream_id = $1 ORDER BY created_at DESC LIMIT $2\" : \"SELECT * FROM ora_conversations ORDER BY created_at DESC LIMIT $1\";\n    const params = workstream_id ? [\n        workstream_id,\n        limit\n    ] : [\n        limit\n    ];\n    const result = await pool.query(query, params);\n    return result.rows.map((row)=>({\n            ...row,\n            metadata: row.metadata || {}\n        }));\n}\n// Constitution functions\nasync function saveConstitution(constitution, client) {\n    const id = (0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n    const query = `\n    INSERT INTO workstream_constitutions (id, workstream_id, vision, mission, cadence, okrs, kpis)\n    VALUES ($1, $2, $3, $4, $5, $6, $7)\n    RETURNING *\n  `;\n    const queryClient = client || pool;\n    const result = await queryClient.query(query, [\n        id,\n        constitution.workstream_id,\n        constitution.vision,\n        constitution.mission,\n        constitution.cadence,\n        JSON.stringify(constitution.okrs || []),\n        JSON.stringify(constitution.kpis || [])\n    ]);\n    return {\n        ...result.rows[0],\n        okrs: result.rows[0].okrs || [],\n        kpis: result.rows[0].kpis || []\n    };\n}\nasync function getConstitution(workstream_id) {\n    const query = \"SELECT * FROM workstream_constitutions WHERE workstream_id = $1\";\n    const result = await pool.query(query, [\n        workstream_id\n    ]);\n    if (result.rows.length === 0) return null;\n    return {\n        ...result.rows[0],\n        okrs: result.rows[0].okrs || [],\n        kpis: result.rows[0].kpis || []\n    };\n}\n// Pattern functions\nasync function savePattern(pattern) {\n    // Check if pattern already exists\n    const existingQuery = `\n    SELECT * FROM ora_patterns \n    WHERE pattern_type = $1 AND pattern_content = $2\n  `;\n    const existing = await pool.query(existingQuery, [\n        pattern.pattern_type,\n        pattern.pattern_content\n    ]);\n    if (existing.rows.length > 0) {\n        // Update occurrence count\n        const updateQuery = `\n      UPDATE ora_patterns \n      SET occurrence_count = occurrence_count + 1, \n          last_observed = CURRENT_TIMESTAMP \n      WHERE id = $1\n      RETURNING *\n    `;\n        const result = await pool.query(updateQuery, [\n            existing.rows[0].id\n        ]);\n        return {\n            ...result.rows[0],\n            examples: result.rows[0].examples || []\n        };\n    }\n    // Insert new pattern\n    const id = (0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n    const insertQuery = `\n    INSERT INTO ora_patterns (id, pattern_type, pattern_content, examples, occurrence_count)\n    VALUES ($1, $2, $3, $4, $5)\n    RETURNING *\n  `;\n    const result = await pool.query(insertQuery, [\n        id,\n        pattern.pattern_type,\n        pattern.pattern_content,\n        JSON.stringify(pattern.examples || []),\n        pattern.occurrence_count || 1\n    ]);\n    return {\n        ...result.rows[0],\n        examples: result.rows[0].examples || []\n    };\n}\nasync function getPatterns(pattern_type, limit = 10) {\n    const query = pattern_type ? \"SELECT * FROM ora_patterns WHERE pattern_type = $1 ORDER BY occurrence_count DESC, last_observed DESC LIMIT $2\" : \"SELECT * FROM ora_patterns ORDER BY occurrence_count DESC, last_observed DESC LIMIT $1\";\n    const params = pattern_type ? [\n        pattern_type,\n        limit\n    ] : [\n        limit\n    ];\n    const result = await pool.query(query, params);\n    return result.rows.map((row)=>({\n            ...row,\n            examples: row.examples || []\n        }));\n}\n// Health check function\nasync function checkDatabaseConnection() {\n    try {\n        const result = await pool.query(\"SELECT NOW()\");\n        console.log(\"✅ Database connection healthy:\", result.rows[0].now);\n        return true;\n    } catch (error) {\n        console.error(\"❌ Database connection failed:\", error);\n        return false;\n    }\n}\n// Utility function to close database connection pool (for cleanup)\nasync function closeDatabase() {\n    await pool.end();\n    console.log(\"\\uD83D\\uDD12 Database connection pool closed\");\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S2EsS0FBSyxDQUFDQSxPQUFPZTtJQUV2QyxPQUFPZCxPQUFPVyxJQUFJLENBQUNJLEdBQUcsQ0FBQ0MsQ0FBQUEsTUFBUTtZQUM3QixHQUFHQSxHQUFHO1lBQ05rQixVQUFVbEIsSUFBSWtCLFFBQVEsSUFBSSxFQUFFO1FBQzlCO0FBQ0Y7QUFFQSx3QkFBd0I7QUFDakIsZUFBZUk7SUFDcEIsSUFBSTtRQUNGLE1BQU10QyxTQUFTLE1BQU1kLEtBQUthLEtBQUssQ0FBQztRQUNoQ1YsUUFBUUMsR0FBRyxDQUFDLGtDQUFrQ1UsT0FBT1csSUFBSSxDQUFDLEVBQUUsQ0FBQzRCLEdBQUc7UUFDaEUsT0FBTztJQUNULEVBQUUsT0FBTzlDLE9BQU87UUFDZEosUUFBUUksS0FBSyxDQUFDLGlDQUFpQ0E7UUFDL0MsT0FBTztJQUNUO0FBQ0Y7QUFFQSxtRUFBbUU7QUFDNUQsZUFBZStDO0lBQ3BCLE1BQU10RCxLQUFLdUQsR0FBRztJQUNkcEQsUUFBUUMsR0FBRyxDQUFDO0FBQ2QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcmEtcmVhY3QtYXBwLy4vYXBwL29yYS9saWIvZGF0YWJhc2UudHM/YzZlZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQb29sLCBQb29sQ2xpZW50IH0gZnJvbSAncGcnO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5cbi8vIERhdGFiYXNlIGNvbm5lY3Rpb24gY29uZmlndXJhdGlvblxuY29uc3QgY29ubmVjdGlvbkNvbmZpZyA9IHtcbiAgaG9zdDogcHJvY2Vzcy5lbnYuREFUQUJBU0VfSE9TVCB8fCAnbG9jYWxob3N0JyxcbiAgcG9ydDogcGFyc2VJbnQocHJvY2Vzcy5lbnYuREFUQUJBU0VfUE9SVCB8fCAnNTQzMicpLFxuICBkYXRhYmFzZTogcHJvY2Vzcy5lbnYuREFUQUJBU0VfTkFNRSB8fCAnb3JhX2RldmVsb3BtZW50JyxcbiAgdXNlcjogcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVNFUiB8fCAnYWlyJyxcbiAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRBVEFCQVNFX1BBU1NXT1JEIHx8ICcnLFxuICAvLyBDb25uZWN0aW9uIHBvb2wgc2V0dGluZ3NcbiAgbWF4OiAyMCwgLy8gbWF4aW11bSBudW1iZXIgb2YgY2xpZW50cyBpbiB0aGUgcG9vbFxuICBpZGxlVGltZW91dE1pbGxpczogMzAwMDAsIC8vIGhvdyBsb25nIGEgY2xpZW50IGlzIGFsbG93ZWQgdG8gcmVtYWluIGlkbGUgYmVmb3JlIGJlaW5nIGNsb3NlZFxuICBjb25uZWN0aW9uVGltZW91dE1pbGxpczogMjAwMCwgLy8gaG93IGxvbmcgdG8gdHJ5IHRvIGNvbm5lY3QgYmVmb3JlIHRpbWluZyBvdXRcbn07XG5cbi8vIFVzZSBEQVRBQkFTRV9VUkwgaWYgcHJvdmlkZWQsIG90aGVyd2lzZSB1c2UgaW5kaXZpZHVhbCBjb25maWdcbmNvbnN0IHBvb2wgPSBuZXcgUG9vbChcbiAgcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMIFxuICAgID8geyBjb25uZWN0aW9uU3RyaW5nOiBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwgfVxuICAgIDogY29ubmVjdGlvbkNvbmZpZ1xuKTtcblxuLy8gTG9nIGNvbm5lY3Rpb24gaW5mbyAod2l0aG91dCBwYXNzd29yZClcbmNvbnNvbGUubG9nKCfwn5SXIFBvc3RncmVTUUwgY29ubmVjdGlvbiBjb25maWd1cmVkOicsIHtcbiAgaG9zdDogY29ubmVjdGlvbkNvbmZpZy5ob3N0LFxuICBwb3J0OiBjb25uZWN0aW9uQ29uZmlnLnBvcnQsXG4gIGRhdGFiYXNlOiBjb25uZWN0aW9uQ29uZmlnLmRhdGFiYXNlLFxuICB1c2VyOiBjb25uZWN0aW9uQ29uZmlnLnVzZXIsXG59KTtcblxuLy8gVHlwZSBkZWZpbml0aW9uc1xuZXhwb3J0IGludGVyZmFjZSBPcmFDb252ZXJzYXRpb24ge1xuICBpZDogc3RyaW5nO1xuICB3b3Jrc3RyZWFtX2lkPzogc3RyaW5nO1xuICBtZXNzYWdlOiBzdHJpbmc7XG4gIHNwZWFrZXI6ICd1c2VyJyB8ICdvcmEnO1xuICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT47XG4gIGNyZWF0ZWRfYXQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV29ya3N0cmVhbUNvbnN0aXR1dGlvbiB7XG4gIGlkOiBzdHJpbmc7XG4gIHdvcmtzdHJlYW1faWQ6IHN0cmluZztcbiAgdmlzaW9uOiBzdHJpbmc7XG4gIG1pc3Npb246IHN0cmluZztcbiAgY2FkZW5jZTogc3RyaW5nO1xuICBva3JzPzogQXJyYXk8e1xuICAgIG9iamVjdGl2ZTogc3RyaW5nO1xuICAgIGtleVJlc3VsdHM6IHN0cmluZ1tdO1xuICB9PjtcbiAga3Bpcz86IHN0cmluZ1tdO1xuICBjcmVhdGVkX2F0Pzogc3RyaW5nO1xuICB1cGRhdGVkX2F0Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE9yYVBhdHRlcm4ge1xuICBpZDogc3RyaW5nO1xuICBwYXR0ZXJuX3R5cGU6IHN0cmluZztcbiAgcGF0dGVybl9jb250ZW50OiBzdHJpbmc7XG4gIGV4YW1wbGVzPzogc3RyaW5nW107XG4gIG9jY3VycmVuY2VfY291bnQ/OiBudW1iZXI7XG4gIGxhc3Rfb2JzZXJ2ZWQ/OiBzdHJpbmc7XG59XG5cbi8vIFRlc3QgZGF0YWJhc2UgY29ubmVjdGlvblxucG9vbC5vbignY29ubmVjdCcsICgpID0+IHtcbiAgY29uc29sZS5sb2coJ+KchSBDb25uZWN0ZWQgdG8gUG9zdGdyZVNRTCBkYXRhYmFzZScpO1xufSk7XG5cbnBvb2wub24oJ2Vycm9yJywgKGVycikgPT4ge1xuICBjb25zb2xlLmVycm9yKCfinYwgVW5leHBlY3RlZCBlcnJvciBvbiBpZGxlIGNsaWVudCcsIGVycik7XG4gIHByb2Nlc3MuZXhpdCgtMSk7XG59KTtcblxuLy8gSGVscGVyIGZ1bmN0aW9uIGZvciB0cmFuc2FjdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3aXRoVHJhbnNhY3Rpb248VD4oXG4gIGNhbGxiYWNrOiAoY2xpZW50OiBQb29sQ2xpZW50KSA9PiBQcm9taXNlPFQ+XG4pOiBQcm9taXNlPFQ+IHtcbiAgY29uc3QgY2xpZW50ID0gYXdhaXQgcG9vbC5jb25uZWN0KCk7XG4gIHRyeSB7XG4gICAgYXdhaXQgY2xpZW50LnF1ZXJ5KCdCRUdJTicpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNhbGxiYWNrKGNsaWVudCk7XG4gICAgYXdhaXQgY2xpZW50LnF1ZXJ5KCdDT01NSVQnKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGF3YWl0IGNsaWVudC5xdWVyeSgnUk9MTEJBQ0snKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfSBmaW5hbGx5IHtcbiAgICBjbGllbnQucmVsZWFzZSgpO1xuICB9XG59XG5cbi8vIENvbnZlcnNhdGlvbiBmdW5jdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlQ29udmVyc2F0aW9uKFxuICBjb252ZXJzYXRpb246IE9taXQ8T3JhQ29udmVyc2F0aW9uLCAnaWQnIHwgJ2NyZWF0ZWRfYXQnPlxuKTogUHJvbWlzZTxPcmFDb252ZXJzYXRpb24+IHtcbiAgY29uc3QgaWQgPSB1dWlkdjQoKTtcbiAgXG4gIGNvbnN0IHF1ZXJ5ID0gYFxuICAgIElOU0VSVCBJTlRPIG9yYV9jb252ZXJzYXRpb25zIChpZCwgd29ya3N0cmVhbV9pZCwgbWVzc2FnZSwgc3BlYWtlciwgbWV0YWRhdGEpXG4gICAgVkFMVUVTICgkMSwgJDIsICQzLCAkNCwgJDUpXG4gICAgUkVUVVJOSU5HICpcbiAgYDtcbiAgXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkocXVlcnksIFtcbiAgICBpZCxcbiAgICBjb252ZXJzYXRpb24ud29ya3N0cmVhbV9pZCB8fCBudWxsLFxuICAgIGNvbnZlcnNhdGlvbi5tZXNzYWdlLFxuICAgIGNvbnZlcnNhdGlvbi5zcGVha2VyLFxuICAgIEpTT04uc3RyaW5naWZ5KGNvbnZlcnNhdGlvbi5tZXRhZGF0YSB8fCB7fSlcbiAgXSk7XG4gIFxuICByZXR1cm4ge1xuICAgIC4uLnJlc3VsdC5yb3dzWzBdLFxuICAgIG1ldGFkYXRhOiByZXN1bHQucm93c1swXS5tZXRhZGF0YSB8fCB7fVxuICB9O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29udmVyc2F0aW9uSGlzdG9yeShcbiAgd29ya3N0cmVhbV9pZD86IHN0cmluZyxcbiAgbGltaXQ6IG51bWJlciA9IDUwXG4pOiBQcm9taXNlPE9yYUNvbnZlcnNhdGlvbltdPiB7XG4gIGNvbnN0IHF1ZXJ5ID0gd29ya3N0cmVhbV9pZFxuICAgID8gJ1NFTEVDVCAqIEZST00gb3JhX2NvbnZlcnNhdGlvbnMgV0hFUkUgd29ya3N0cmVhbV9pZCA9ICQxIE9SREVSIEJZIGNyZWF0ZWRfYXQgREVTQyBMSU1JVCAkMidcbiAgICA6ICdTRUxFQ1QgKiBGUk9NIG9yYV9jb252ZXJzYXRpb25zIE9SREVSIEJZIGNyZWF0ZWRfYXQgREVTQyBMSU1JVCAkMSc7XG4gIFxuICBjb25zdCBwYXJhbXMgPSB3b3Jrc3RyZWFtX2lkID8gW3dvcmtzdHJlYW1faWQsIGxpbWl0XSA6IFtsaW1pdF07XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkocXVlcnksIHBhcmFtcyk7XG4gIFxuICByZXR1cm4gcmVzdWx0LnJvd3MubWFwKHJvdyA9PiAoe1xuICAgIC4uLnJvdyxcbiAgICBtZXRhZGF0YTogcm93Lm1ldGFkYXRhIHx8IHt9XG4gIH0pKTtcbn1cblxuLy8gQ29uc3RpdHV0aW9uIGZ1bmN0aW9uc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVDb25zdGl0dXRpb24oXG4gIGNvbnN0aXR1dGlvbjogT21pdDxXb3Jrc3RyZWFtQ29uc3RpdHV0aW9uLCAnaWQnIHwgJ2NyZWF0ZWRfYXQnIHwgJ3VwZGF0ZWRfYXQnPixcbiAgY2xpZW50PzogUG9vbENsaWVudFxuKTogUHJvbWlzZTxXb3Jrc3RyZWFtQ29uc3RpdHV0aW9uPiB7XG4gIGNvbnN0IGlkID0gdXVpZHY0KCk7XG4gIFxuICBjb25zdCBxdWVyeSA9IGBcbiAgICBJTlNFUlQgSU5UTyB3b3Jrc3RyZWFtX2NvbnN0aXR1dGlvbnMgKGlkLCB3b3Jrc3RyZWFtX2lkLCB2aXNpb24sIG1pc3Npb24sIGNhZGVuY2UsIG9rcnMsIGtwaXMpXG4gICAgVkFMVUVTICgkMSwgJDIsICQzLCAkNCwgJDUsICQ2LCAkNylcbiAgICBSRVRVUk5JTkcgKlxuICBgO1xuICBcbiAgY29uc3QgcXVlcnlDbGllbnQgPSBjbGllbnQgfHwgcG9vbDtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnlDbGllbnQucXVlcnkocXVlcnksIFtcbiAgICBpZCxcbiAgICBjb25zdGl0dXRpb24ud29ya3N0cmVhbV9pZCxcbiAgICBjb25zdGl0dXRpb24udmlzaW9uLFxuICAgIGNvbnN0aXR1dGlvbi5taXNzaW9uLFxuICAgIGNvbnN0aXR1dGlvbi5jYWRlbmNlLFxuICAgIEpTT04uc3RyaW5naWZ5KGNvbnN0aXR1dGlvbi5va3JzIHx8IFtdKSxcbiAgICBKU09OLnN0cmluZ2lmeShjb25zdGl0dXRpb24ua3BpcyB8fCBbXSlcbiAgXSk7XG4gIFxuICByZXR1cm4ge1xuICAgIC4uLnJlc3VsdC5yb3dzWzBdLFxuICAgIG9rcnM6IHJlc3VsdC5yb3dzWzBdLm9rcnMgfHwgW10sXG4gICAga3BpczogcmVzdWx0LnJvd3NbMF0ua3BpcyB8fCBbXVxuICB9O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29uc3RpdHV0aW9uKHdvcmtzdHJlYW1faWQ6IHN0cmluZyk6IFByb21pc2U8V29ya3N0cmVhbUNvbnN0aXR1dGlvbiB8IG51bGw+IHtcbiAgY29uc3QgcXVlcnkgPSAnU0VMRUNUICogRlJPTSB3b3Jrc3RyZWFtX2NvbnN0aXR1dGlvbnMgV0hFUkUgd29ya3N0cmVhbV9pZCA9ICQxJztcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShxdWVyeSwgW3dvcmtzdHJlYW1faWRdKTtcbiAgXG4gIGlmIChyZXN1bHQucm93cy5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuICBcbiAgcmV0dXJuIHtcbiAgICAuLi5yZXN1bHQucm93c1swXSxcbiAgICBva3JzOiByZXN1bHQucm93c1swXS5va3JzIHx8IFtdLFxuICAgIGtwaXM6IHJlc3VsdC5yb3dzWzBdLmtwaXMgfHwgW11cbiAgfTtcbn1cblxuLy8gUGF0dGVybiBmdW5jdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlUGF0dGVybihcbiAgcGF0dGVybjogT21pdDxPcmFQYXR0ZXJuLCAnaWQnIHwgJ2xhc3Rfb2JzZXJ2ZWQnPlxuKTogUHJvbWlzZTxPcmFQYXR0ZXJuPiB7XG4gIC8vIENoZWNrIGlmIHBhdHRlcm4gYWxyZWFkeSBleGlzdHNcbiAgY29uc3QgZXhpc3RpbmdRdWVyeSA9IGBcbiAgICBTRUxFQ1QgKiBGUk9NIG9yYV9wYXR0ZXJucyBcbiAgICBXSEVSRSBwYXR0ZXJuX3R5cGUgPSAkMSBBTkQgcGF0dGVybl9jb250ZW50ID0gJDJcbiAgYDtcbiAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBwb29sLnF1ZXJ5KGV4aXN0aW5nUXVlcnksIFtcbiAgICBwYXR0ZXJuLnBhdHRlcm5fdHlwZSxcbiAgICBwYXR0ZXJuLnBhdHRlcm5fY29udGVudFxuICBdKTtcbiAgXG4gIGlmIChleGlzdGluZy5yb3dzLmxlbmd0aCA+IDApIHtcbiAgICAvLyBVcGRhdGUgb2NjdXJyZW5jZSBjb3VudFxuICAgIGNvbnN0IHVwZGF0ZVF1ZXJ5ID0gYFxuICAgICAgVVBEQVRFIG9yYV9wYXR0ZXJucyBcbiAgICAgIFNFVCBvY2N1cnJlbmNlX2NvdW50ID0gb2NjdXJyZW5jZV9jb3VudCArIDEsIFxuICAgICAgICAgIGxhc3Rfb2JzZXJ2ZWQgPSBDVVJSRU5UX1RJTUVTVEFNUCBcbiAgICAgIFdIRVJFIGlkID0gJDFcbiAgICAgIFJFVFVSTklORyAqXG4gICAgYDtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KHVwZGF0ZVF1ZXJ5LCBbZXhpc3Rpbmcucm93c1swXS5pZF0pO1xuICAgIHJldHVybiB7XG4gICAgICAuLi5yZXN1bHQucm93c1swXSxcbiAgICAgIGV4YW1wbGVzOiByZXN1bHQucm93c1swXS5leGFtcGxlcyB8fCBbXVxuICAgIH07XG4gIH1cbiAgXG4gIC8vIEluc2VydCBuZXcgcGF0dGVyblxuICBjb25zdCBpZCA9IHV1aWR2NCgpO1xuICBjb25zdCBpbnNlcnRRdWVyeSA9IGBcbiAgICBJTlNFUlQgSU5UTyBvcmFfcGF0dGVybnMgKGlkLCBwYXR0ZXJuX3R5cGUsIHBhdHRlcm5fY29udGVudCwgZXhhbXBsZXMsIG9jY3VycmVuY2VfY291bnQpXG4gICAgVkFMVUVTICgkMSwgJDIsICQzLCAkNCwgJDUpXG4gICAgUkVUVVJOSU5HICpcbiAgYDtcbiAgXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkoaW5zZXJ0UXVlcnksIFtcbiAgICBpZCxcbiAgICBwYXR0ZXJuLnBhdHRlcm5fdHlwZSxcbiAgICBwYXR0ZXJuLnBhdHRlcm5fY29udGVudCxcbiAgICBKU09OLnN0cmluZ2lmeShwYXR0ZXJuLmV4YW1wbGVzIHx8IFtdKSxcbiAgICBwYXR0ZXJuLm9jY3VycmVuY2VfY291bnQgfHwgMVxuICBdKTtcbiAgXG4gIHJldHVybiB7XG4gICAgLi4ucmVzdWx0LnJvd3NbMF0sXG4gICAgZXhhbXBsZXM6IHJlc3VsdC5yb3dzWzBdLmV4YW1wbGVzIHx8IFtdXG4gIH07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQYXR0ZXJucyhcbiAgcGF0dGVybl90eXBlPzogc3RyaW5nLFxuICBsaW1pdDogbnVtYmVyID0gMTBcbik6IFByb21pc2U8T3JhUGF0dGVybltdPiB7XG4gIGNvbnN0IHF1ZXJ5ID0gcGF0dGVybl90eXBlXG4gICAgPyAnU0VMRUNUICogRlJPTSBvcmFfcGF0dGVybnMgV0hFUkUgcGF0dGVybl90eXBlID0gJDEgT1JERVIgQlkgb2NjdXJyZW5jZV9jb3VudCBERVNDLCBsYXN0X29ic2VydmVkIERFU0MgTElNSVQgJDInXG4gICAgOiAnU0VMRUNUICogRlJPTSBvcmFfcGF0dGVybnMgT1JERVIgQlkgb2NjdXJyZW5jZV9jb3VudCBERVNDLCBsYXN0X29ic2VydmVkIERFU0MgTElNSVQgJDEnO1xuICBcbiAgY29uc3QgcGFyYW1zID0gcGF0dGVybl90eXBlID8gW3BhdHRlcm5fdHlwZSwgbGltaXRdIDogW2xpbWl0XTtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShxdWVyeSwgcGFyYW1zKTtcbiAgXG4gIHJldHVybiByZXN1bHQucm93cy5tYXAocm93ID0+ICh7XG4gICAgLi4ucm93LFxuICAgIGV4YW1wbGVzOiByb3cuZXhhbXBsZXMgfHwgW11cbiAgfSkpO1xufVxuXG4vLyBIZWFsdGggY2hlY2sgZnVuY3Rpb25cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0RhdGFiYXNlQ29ubmVjdGlvbigpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KCdTRUxFQ1QgTk9XKCknKTtcbiAgICBjb25zb2xlLmxvZygn4pyFIERhdGFiYXNlIGNvbm5lY3Rpb24gaGVhbHRoeTonLCByZXN1bHQucm93c1swXS5ub3cpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8vIFV0aWxpdHkgZnVuY3Rpb24gdG8gY2xvc2UgZGF0YWJhc2UgY29ubmVjdGlvbiBwb29sIChmb3IgY2xlYW51cClcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbG9zZURhdGFiYXNlKCkge1xuICBhd2FpdCBwb29sLmVuZCgpO1xuICBjb25zb2xlLmxvZygn8J+UkiBEYXRhYmFzZSBjb25uZWN0aW9uIHBvb2wgY2xvc2VkJyk7XG59Il0sIm5hbWVzIjpbIlBvb2wiLCJ2NCIsInV1aWR2NCIsImNvbm5lY3Rpb25Db25maWciLCJob3N0IiwicHJvY2VzcyIsImVudiIsIkRBVEFCQVNFX0hPU1QiLCJwb3J0IiwicGFyc2VJbnQiLCJEQVRBQkFTRV9QT1JUIiwiZGF0YWJhc2UiLCJEQVRBQkFTRV9OQU1FIiwidXNlciIsIkRBVEFCQVNFX1VTRVIiLCJwYXNzd29yZCIsIkRBVEFCQVNFX1BBU1NXT1JEIiwibWF4IiwiaWRsZVRpbWVvdXRNaWxsaXMiLCJjb25uZWN0aW9uVGltZW91dE1pbGxpcyIsInBvb2wiLCJEQVRBQkFTRV9VUkwiLCJjb25uZWN0aW9uU3RyaW5nIiwiY29uc29sZSIsImxvZyIsIm9uIiwiZXJyIiwiZXJyb3IiLCJleGl0Iiwid2l0aFRyYW5zYWN0aW9uIiwiY2FsbGJhY2siLCJjbGllbnQiLCJjb25uZWN0IiwicXVlcnkiLCJyZXN1bHQiLCJyZWxlYXNlIiwic2F2ZUNvbnZlcnNhdGlvbiIsImNvbnZlcnNhdGlvbiIsImlkIiwid29ya3N0cmVhbV9pZCIsIm1lc3NhZ2UiLCJzcGVha2VyIiwiSlNPTiIsInN0cmluZ2lmeSIsIm1ldGFkYXRhIiwicm93cyIsImdldENvbnZlcnNhdGlvbkhpc3RvcnkiLCJsaW1pdCIsInBhcmFtcyIsIm1hcCIsInJvdyIsInNhdmVDb25zdGl0dXRpb24iLCJjb25zdGl0dXRpb24iLCJxdWVyeUNsaWVudCIsInZpc2lvbiIsIm1pc3Npb24iLCJjYWRlbmNlIiwib2tycyIsImtwaXMiLCJnZXRDb25zdGl0dXRpb24iLCJsZW5ndGgiLCJzYXZlUGF0dGVybiIsInBhdHRlcm4iLCJleGlzdGluZ1F1ZXJ5IiwiZXhpc3RpbmciLCJwYXR0ZXJuX3R5cGUiLCJwYXR0ZXJuX2NvbnRlbnQiLCJ1cGRhdGVRdWVyeSIsImV4YW1wbGVzIiwiaW5zZXJ0UXVlcnkiLCJvY2N1cnJlbmNlX2NvdW50IiwiZ2V0UGF0dGVybnMiLCJjaGVja0RhdGFiYXNlQ29ubmVjdGlvbiIsIm5vdyIsImNsb3NlRGF0YWJhc2UiLCJlbmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/ora/lib/database.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/uuid"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fora%2Fchat%2Froute&page=%2Fapi%2Fora%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fora%2Fchat%2Froute.ts&appDir=%2FUsers%2Fair%2FProjects%2Fora-system%2Fsrc%2Fui%2Freact-app%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fair%2FProjects%2Fora-system%2Fsrc%2Fui%2Freact-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();