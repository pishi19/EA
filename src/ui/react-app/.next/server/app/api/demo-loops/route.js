"use strict";(()=>{var e={};e.id=296,e.ids=[296],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{e.exports=require("buffer")},2048:e=>{e.exports=require("fs")},629:e=>{e.exports=require("fs/promises")},5315:e=>{e.exports=require("path")},440:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>R,patchFetch:()=>k,requestAsyncStorage:()=>v,routeModule:()=>j,serverHooks:()=>q,staticGenerationAsyncStorage:()=>P});var o={};t.r(o),t.d(o,{GET:()=>y,dynamic:()=>f});var s=t(9303),a=t(8716),n=t(3131),i=t(7070),u=t(629),p=t.n(u),l=t(5315),d=t.n(l),c=t(3673),m=t.n(c);let f="force-dynamic",h=d().resolve(process.cwd(),"../../.."),x=d().join(h,"runtime/loops");async function g(e){try{let r=d().join(x,e),t=await p().readFile(r,"utf-8"),{data:o,content:s}=m()(t),a=s.trim().split("\n").slice(0,3).join(" ").replace(/#+\s*/g,"").substring(0,200)+"...",n=e.replace(".md","");return{id:n,name:n,title:o.title||n,phase:o.phase||"0.0",workstream:o.workstream||"unknown",status:o.status||"unknown",score:o.score||0,tags:o.tags||[],created:o.created||new Date().toISOString().split("T")[0],uuid:o.uuid||n,summary:o.summary||a,filePath:`runtime/loops/${e}`}}catch(r){return console.error(`Failed to load loop metadata for ${e}:`,r),null}}async function w(){try{let e=(await p().readdir(x)).filter(e=>e.startsWith("loop-")&&e.endsWith(".md"));return(await Promise.all(e.map(e=>g(e)))).filter(e=>null!==e)}catch(e){return console.error("Failed to load loops directory:",e),[]}}async function y(e){try{let{searchParams:r}=new URL(e.url),t=r.get("id");if(t){let e=t.endsWith(".md")?t:`${t}.md`,r=await g(e);if(!r)return i.NextResponse.json({message:`Loop not found: ${t}`},{status:404});return i.NextResponse.json(r)}{let e=await w();return i.NextResponse.json(e)}}catch(e){return console.error("Error in demo-loops API:",e),i.NextResponse.json({message:"Internal server error"},{status:500})}}let j=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/demo-loops/route",pathname:"/api/demo-loops",filename:"route",bundlePath:"app/api/demo-loops/route"},resolvedPagePath:"/Users/air/Projects/ora-system/src/ui/react-app/app/api/demo-loops/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:v,staticGenerationAsyncStorage:P,serverHooks:q}=j,R="/api/demo-loops/route";function k(){return(0,n.patchFetch)({serverHooks:q,staticGenerationAsyncStorage:P})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[276,972,673],()=>t(440));module.exports=o})();