"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/plan-tasks/route";
exports.ids = ["app/api/plan-tasks/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fplan-tasks%2Froute&page=%2Fapi%2Fplan-tasks%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fplan-tasks%2Froute.ts&appDir=%2FUsers%2Fair%2FProjects%2Fora-system%2Fsrc%2Fui%2Freact-app%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fair%2FProjects%2Fora-system%2Fsrc%2Fui%2Freact-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fplan-tasks%2Froute&page=%2Fapi%2Fplan-tasks%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fplan-tasks%2Froute.ts&appDir=%2FUsers%2Fair%2FProjects%2Fora-system%2Fsrc%2Fui%2Freact-app%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fair%2FProjects%2Fora-system%2Fsrc%2Fui%2Freact-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_air_Projects_ora_system_src_ui_react_app_app_api_plan_tasks_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/plan-tasks/route.ts */ \"(rsc)/./app/api/plan-tasks/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/plan-tasks/route\",\n        pathname: \"/api/plan-tasks\",\n        filename: \"route\",\n        bundlePath: \"app/api/plan-tasks/route\"\n    },\n    resolvedPagePath: \"/Users/air/Projects/ora-system/src/ui/react-app/app/api/plan-tasks/route.ts\",\n    nextConfigOutput,\n    userland: _Users_air_Projects_ora_system_src_ui_react_app_app_api_plan_tasks_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/plan-tasks/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwbGFuLXRhc2tzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZwbGFuLXRhc2tzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGcGxhbi10YXNrcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmFpciUyRlByb2plY3RzJTJGb3JhLXN5c3RlbSUyRnNyYyUyRnVpJTJGcmVhY3QtYXBwJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmFpciUyRlByb2plY3RzJTJGb3JhLXN5c3RlbSUyRnNyYyUyRnVpJTJGcmVhY3QtYXBwJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUMyQjtBQUN4RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL29yYS1yZWFjdC1hcHAvPzZhOTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2Fpci9Qcm9qZWN0cy9vcmEtc3lzdGVtL3NyYy91aS9yZWFjdC1hcHAvYXBwL2FwaS9wbGFuLXRhc2tzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wbGFuLXRhc2tzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcGxhbi10YXNrc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcGxhbi10YXNrcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9haXIvUHJvamVjdHMvb3JhLXN5c3RlbS9zcmMvdWkvcmVhY3QtYXBwL2FwcC9hcGkvcGxhbi10YXNrcy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvcGxhbi10YXNrcy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fplan-tasks%2Froute&page=%2Fapi%2Fplan-tasks%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fplan-tasks%2Froute.ts&appDir=%2FUsers%2Fair%2FProjects%2Fora-system%2Fsrc%2Fui%2Freact-app%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fair%2FProjects%2Fora-system%2Fsrc%2Fui%2Freact-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/../../system/mutation-engine.ts":
/*!***************************************!*\
  !*** ../../system/mutation-engine.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mutationEngine: () => (/* binding */ mutationEngine)\n/* harmony export */ });\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var gray_matter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gray-matter */ \"(rsc)/../../../node_modules/gray-matter/index.js\");\n/* harmony import */ var gray_matter__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(gray_matter__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _ui_react_app_lib_yaml_engine__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../ui/react-app/lib/yaml-engine */ \"(rsc)/./lib/yaml-engine.ts\");\n\n\n\n // Re-using our safe engine\n// Default sections for loop files\nconst DEFAULT_LOOP_SECTIONS = [\n    \"## Purpose\",\n    \"## âœ… Objectives\",\n    \"## \\uD83D\\uDD27 Tasks\",\n    \"## \\uD83E\\uDDFE Execution Log\",\n    \"## \\uD83E\\uDDE0 Memory Trace\"\n];\n// --- Constants ---\nconst BASE_DIR = path__WEBPACK_IMPORTED_MODULE_1___default().resolve(__dirname, \"../../\");\nconst MUTATION_LOG_PATH = path__WEBPACK_IMPORTED_MODULE_1___default().join(BASE_DIR, \"runtime\", \"logs\", \"mutation-log.json\");\nconst MUTATION_ERROR_LOG_PATH = path__WEBPACK_IMPORTED_MODULE_1___default().join(BASE_DIR, \"runtime\", \"logs\", \"mutation-errors.json\");\n// --- Core Functions ---\nasync function readMatter(filePath) {\n    const content = await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().readFile(filePath, \"utf-8\");\n    return gray_matter__WEBPACK_IMPORTED_MODULE_2___default()(content, _ui_react_app_lib_yaml_engine__WEBPACK_IMPORTED_MODULE_3__.matterOptions);\n}\nasync function writeMatter(filePath, file) {\n    const newContent = gray_matter__WEBPACK_IMPORTED_MODULE_2___default().stringify(file.content, file.data);\n    await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().writeFile(filePath, newContent, \"utf-8\");\n}\nasync function logMutation(log) {\n    const newLog = {\n        timestamp: new Date().toISOString(),\n        ...log\n    };\n    let logs = [];\n    try {\n        const content = await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().readFile(MUTATION_LOG_PATH, \"utf-8\");\n        logs = JSON.parse(content);\n    } catch (error) {\n    // File might not exist yet, which is fine.\n    }\n    logs.push(newLog);\n    // Ensure the directory exists before writing\n    try {\n        await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().mkdir(path__WEBPACK_IMPORTED_MODULE_1___default().dirname(MUTATION_LOG_PATH), {\n            recursive: true\n        });\n        await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().writeFile(MUTATION_LOG_PATH, JSON.stringify(logs, null, 2), \"utf-8\");\n    } catch (error) {\n        // Log to console if file system logging fails\n        console.log(\"Mutation logged (file logging failed):\", newLog);\n    }\n}\nasync function logError(log) {\n    const newErrorLog = {\n        timestamp: new Date().toISOString(),\n        ...log\n    };\n    let logs = [];\n    try {\n        const content = await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().readFile(MUTATION_ERROR_LOG_PATH, \"utf-8\");\n        logs = JSON.parse(content);\n    } catch (error) {}\n    logs.push(newErrorLog);\n    // Ensure the directory exists before writing\n    try {\n        await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().mkdir(path__WEBPACK_IMPORTED_MODULE_1___default().dirname(MUTATION_ERROR_LOG_PATH), {\n            recursive: true\n        });\n        await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().writeFile(MUTATION_ERROR_LOG_PATH, JSON.stringify(logs, null, 2), \"utf-8\");\n    } catch (error) {\n        // Log to console if file system logging fails\n        console.error(\"Error logged (file logging failed):\", newErrorLog);\n    }\n}\n// --- Mutation Engine ---\nconst mutationEngine = {\n    /**\n     * Updates the frontmatter of a markdown file.\n     */ async patchFrontmatter (filePath, patchObject, uuid) {\n        const file = await readMatter(filePath);\n        const originalData = {\n            ...file.data\n        };\n        file.data = {\n            ...file.data,\n            ...patchObject\n        };\n        await writeMatter(filePath, file);\n        await logMutation({\n            filePath,\n            mutationType: \"PATCH_FRONTMATTER\",\n            summary: `Updated frontmatter. Changes: ${JSON.stringify(patchObject)}`,\n            loopOrTaskUuid: uuid\n        });\n    },\n    /**\n     * Appends content to a specific section of a markdown file.\n     * Throws an error if the section does not exist.\n     */ async appendToSection (filePath, sectionHeader, contentToAppend, uuid) {\n        const file = await readMatter(filePath);\n        const sectionRegex = new RegExp(`(^${sectionHeader.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\")}[\\\\s\\\\S]*?)(?=\\\\n## |$)`, \"m\");\n        if (!file.content.includes(sectionHeader)) {\n            throw new Error(`Validation Error: Section \"${sectionHeader}\" not found in ${filePath}.`);\n        }\n        file.content = file.content.replace(sectionHeader, `${sectionHeader}\\n${contentToAppend}`);\n        await writeMatter(filePath, file);\n        await logMutation({\n            filePath,\n            mutationType: \"APPEND_TO_SECTION\",\n            summary: `Appended content to section \"${sectionHeader}\".`,\n            loopOrTaskUuid: uuid\n        });\n    },\n    /**\n     * Replaces content within a specific section of a markdown file.\n     */ async replaceInSection (filePath, sectionHeader, match, replacement, uuid) {\n        const file = await readMatter(filePath);\n        const sectionRegex = new RegExp(`(^${sectionHeader.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\")}[\\\\s\\\\S]*?)(?=\\\\n## |$)`, \"m\");\n        const sectionMatch = file.content.match(sectionRegex);\n        if (!sectionMatch) {\n            const err = new Error(`Validation Error: Section \"${sectionHeader}\" not found in ${filePath}.`);\n            await logError({\n                filePath,\n                mutationType: \"REPLACE_IN_SECTION\",\n                error: err.message,\n                loopOrTaskUuid: uuid\n            });\n            throw err;\n        }\n        const originalSection = sectionMatch[0];\n        const newSection = originalSection.replace(match, replacement);\n        if (originalSection === newSection) return; // No change\n        file.content = file.content.replace(originalSection, newSection);\n        await writeMatter(filePath, file);\n        await logMutation({\n            filePath,\n            mutationType: \"REPLACE_IN_SECTION\",\n            summary: `Replaced content in section \"${sectionHeader}\".`,\n            loopOrTaskUuid: uuid\n        });\n    },\n    /**\n     * Appends a structured log entry to the ## ðŸ§¾ Execution Log section.\n     */ async appendToLog (filePath, logEntry) {\n        const file = await readMatter(filePath);\n        const sectionHeader = \"## \\uD83E\\uDDFE Execution Log\";\n        if (!file.content.includes(sectionHeader)) {\n            throw new Error(`Validation Error: Section \"${sectionHeader}\" not found in ${filePath}.`);\n        }\n        // Format log entry consistently with existing entries\n        const formattedEntry = `- ${logEntry.timestamp}: ${logEntry.actor === \"ora\" ? \"\\uD83E\\uDD16\" : \"\\uD83D\\uDC64\"} ${logEntry.action}`;\n        // Find the section and append the log entry\n        const sectionRegex = new RegExp(`(${sectionHeader.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\")}[\\\\s\\\\S]*?)(?=\\\\n## |$)`, \"m\");\n        const sectionMatch = file.content.match(sectionRegex);\n        if (!sectionMatch) {\n            throw new Error(`Validation Error: Section \"${sectionHeader}\" malformed in ${filePath}.`);\n        }\n        const originalSection = sectionMatch[0];\n        const newSection = originalSection.endsWith(\"\\n\") ? `${originalSection}${formattedEntry}\\n` : `${originalSection}\\n${formattedEntry}\\n`;\n        file.content = file.content.replace(originalSection, newSection);\n        await writeMatter(filePath, file);\n        await logMutation({\n            filePath,\n            mutationType: \"APPEND_TO_LOG\",\n            summary: `Appended log entry: ${logEntry.action}`\n        });\n    },\n    /**\n     * Validates that a markdown file contains all required sections.\n     * Throws detailed errors if sections are missing, malformed, or duplicated.\n     */ async validateMarkdownSchema (filePath, requiredSections = DEFAULT_LOOP_SECTIONS) {\n        let content;\n        try {\n            content = await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().readFile(filePath, \"utf-8\");\n        } catch (error) {\n            throw new Error(`Validation Error: File not found or unreadable at ${filePath}`);\n        }\n        const errors = [];\n        const sectionsFound = {};\n        // Count occurrences of each section\n        for (const section of requiredSections){\n            const regex = new RegExp(`^${section.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\")}`, \"gm\");\n            const matches = content.match(regex);\n            const count = matches ? matches.length : 0;\n            sectionsFound[section] = count;\n            if (count === 0) {\n                errors.push(`Missing required section: \"${section}\"`);\n            } else if (count > 1) {\n                errors.push(`Duplicated section: \"${section}\" (found ${count} times)`);\n            }\n        }\n        // Check for malformed sections (sections that don't start with ##)\n        const allSectionHeaders = content.match(/^## .+$/gm) || [];\n        for (const header of allSectionHeaders){\n            if (requiredSections.includes(header)) {\n                // Check if section has content or is followed by another section\n                const sectionRegex = new RegExp(`(^${header.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\")}[\\\\s\\\\S]*?)(?=\\\\n## |$)`, \"m\");\n                const sectionMatch = content.match(sectionRegex);\n                if (!sectionMatch || sectionMatch[0].trim() === header.trim()) {\n                // Section exists but might be malformed (empty or immediately followed by another section)\n                // This is not necessarily an error, so we'll allow it\n                }\n            }\n        }\n        if (errors.length > 0) {\n            throw new Error(`Validation Error in ${filePath}:\\n${errors.join(\"\\n\")}`);\n        }\n    },\n    /**\n     * Previews a mutation without writing to disk.\n     * Returns preImage, postImage, and optionally a diff.\n     */ async dryRunMutation (filePath, mutationFn) {\n        let preImage;\n        try {\n            preImage = await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().readFile(filePath, \"utf-8\");\n        } catch (error) {\n            throw new Error(`Dry Run Error: Cannot read file at ${filePath}`);\n        }\n        let postImage;\n        try {\n            postImage = mutationFn(preImage);\n        } catch (error) {\n            throw new Error(`Dry Run Error: Mutation function failed: ${error}`);\n        }\n        // Simple diff calculation (could be enhanced with a proper diff library)\n        const diff = preImage === postImage ? undefined : \"Content changed\";\n        return {\n            preImage,\n            postImage,\n            diff\n        };\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0o7SUFFQTs7O0tBR0MsR0FDRCxNQUFNdUUsZ0JBQWVwRSxRQUFnQixFQUFFcUUsVUFBdUM7UUFDMUUsSUFBSUM7UUFDSixJQUFJO1lBQ0FBLFdBQVcsTUFBTWxGLDJEQUFXLENBQUNZLFVBQVU7UUFDM0MsRUFBRSxPQUFPa0IsT0FBTztZQUNaLE1BQU0sSUFBSXVCLE1BQU0sQ0FBQyxtQ0FBbUMsRUFBRXpDLFNBQVMsQ0FBQztRQUNwRTtRQUVBLElBQUl1RTtRQUNKLElBQUk7WUFDQUEsWUFBWUYsV0FBV0M7UUFDM0IsRUFBRSxPQUFPcEQsT0FBTztZQUNaLE1BQU0sSUFBSXVCLE1BQU0sQ0FBQyx5Q0FBeUMsRUFBRXZCLE1BQU0sQ0FBQztRQUN2RTtRQUVBLHlFQUF5RTtRQUN6RSxNQUFNc0QsT0FBT0YsYUFBYUMsWUFBWUUsWUFBWTtRQUVsRCxPQUFPO1lBQ0hIO1lBQ0FDO1lBQ0FDO1FBQ0o7SUFDSjtBQUNKLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcmEtcmVhY3QtYXBwLy4uLy4uL3N5c3RlbS9tdXRhdGlvbi1lbmdpbmUudHM/Zjc5ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZnMgZnJvbSAnZnMvcHJvbWlzZXMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgbWF0dGVyIGZyb20gJ2dyYXktbWF0dGVyJztcbmltcG9ydCB7IG1hdHRlck9wdGlvbnMgfSBmcm9tICcuLi91aS9yZWFjdC1hcHAvbGliL3lhbWwtZW5naW5lJzsgLy8gUmUtdXNpbmcgb3VyIHNhZmUgZW5naW5lXG5cbi8vIC0tLSBUeXBlcyBhbmQgSW50ZXJmYWNlcyAtLS1cbnR5cGUgTXV0YXRpb25UeXBlID0gJ0FQUEVORF9UT19TRUNUSU9OJyB8ICdSRVBMQUNFX0lOX1NFQ1RJT04nIHwgJ1BBVENIX0ZST05UTUFUVEVSJyB8ICdBUFBFTkRfVE9fTE9HJztcblxuaW50ZXJmYWNlIE11dGF0aW9uTG9nIHtcbiAgICB0aW1lc3RhbXA6IHN0cmluZztcbiAgICBmaWxlUGF0aDogc3RyaW5nO1xuICAgIG11dGF0aW9uVHlwZTogTXV0YXRpb25UeXBlO1xuICAgIHN1bW1hcnk6IHN0cmluZztcbiAgICBsb29wT3JUYXNrVXVpZD86IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIE11dGF0aW9uRXJyb3JMb2cgZXh0ZW5kcyBPbWl0PE11dGF0aW9uTG9nLCAnc3VtbWFyeSc+IHtcbiAgICBlcnJvcjogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgTG9nRW50cnkge1xuICAgIHRpbWVzdGFtcDogc3RyaW5nO1xuICAgIGFjdG9yOiAndXNlcicgfCAnb3JhJztcbiAgICBhY3Rpb246IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIERyeVJ1blJlc3VsdCB7XG4gICAgcHJlSW1hZ2U6IHN0cmluZztcbiAgICBwb3N0SW1hZ2U6IHN0cmluZztcbiAgICBkaWZmPzogc3RyaW5nO1xufVxuXG4vLyBEZWZhdWx0IHNlY3Rpb25zIGZvciBsb29wIGZpbGVzXG5jb25zdCBERUZBVUxUX0xPT1BfU0VDVElPTlMgPSBbXG4gICAgJyMjIFB1cnBvc2UnLFxuICAgICcjIyDinIUgT2JqZWN0aXZlcycsXG4gICAgJyMjIPCflKcgVGFza3MnLFxuICAgICcjIyDwn6e+IEV4ZWN1dGlvbiBMb2cnLFxuICAgICcjIyDwn6egIE1lbW9yeSBUcmFjZSdcbl07XG5cbi8vIC0tLSBDb25zdGFudHMgLS0tXG5jb25zdCBCQVNFX0RJUiA9IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuLi8uLi8nKTtcbmNvbnN0IE1VVEFUSU9OX0xPR19QQVRIID0gcGF0aC5qb2luKEJBU0VfRElSLCAncnVudGltZScsICdsb2dzJywgJ211dGF0aW9uLWxvZy5qc29uJyk7XG5jb25zdCBNVVRBVElPTl9FUlJPUl9MT0dfUEFUSCA9IHBhdGguam9pbihCQVNFX0RJUiwgJ3J1bnRpbWUnLCAnbG9ncycsICdtdXRhdGlvbi1lcnJvcnMuanNvbicpO1xuXG5cbi8vIC0tLSBDb3JlIEZ1bmN0aW9ucyAtLS1cblxuYXN5bmMgZnVuY3Rpb24gcmVhZE1hdHRlcihmaWxlUGF0aDogc3RyaW5nKSB7XG4gICAgY29uc3QgY29udGVudCA9IGF3YWl0IGZzLnJlYWRGaWxlKGZpbGVQYXRoLCAndXRmLTgnKTtcbiAgICByZXR1cm4gbWF0dGVyKGNvbnRlbnQsIG1hdHRlck9wdGlvbnMpO1xufVxuXG5hc3luYyBmdW5jdGlvbiB3cml0ZU1hdHRlcihmaWxlUGF0aDogc3RyaW5nLCBmaWxlOiBtYXR0ZXIuR3JheU1hdHRlckZpbGU8c3RyaW5nPikge1xuICAgIGNvbnN0IG5ld0NvbnRlbnQgPSBtYXR0ZXIuc3RyaW5naWZ5KGZpbGUuY29udGVudCwgZmlsZS5kYXRhKTtcbiAgICBhd2FpdCBmcy53cml0ZUZpbGUoZmlsZVBhdGgsIG5ld0NvbnRlbnQsICd1dGYtOCcpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBsb2dNdXRhdGlvbihsb2c6IE9taXQ8TXV0YXRpb25Mb2csICd0aW1lc3RhbXAnPikge1xuICAgIGNvbnN0IG5ld0xvZzogTXV0YXRpb25Mb2cgPSB7XG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAuLi5sb2csXG4gICAgfTtcblxuICAgIGxldCBsb2dzOiBNdXRhdGlvbkxvZ1tdID0gW107XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IGZzLnJlYWRGaWxlKE1VVEFUSU9OX0xPR19QQVRILCAndXRmLTgnKTtcbiAgICAgICAgbG9ncyA9IEpTT04ucGFyc2UoY29udGVudCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gRmlsZSBtaWdodCBub3QgZXhpc3QgeWV0LCB3aGljaCBpcyBmaW5lLlxuICAgIH1cbiAgICBsb2dzLnB1c2gobmV3TG9nKTtcbiAgICBcbiAgICAvLyBFbnN1cmUgdGhlIGRpcmVjdG9yeSBleGlzdHMgYmVmb3JlIHdyaXRpbmdcbiAgICB0cnkge1xuICAgICAgICBhd2FpdCBmcy5ta2RpcihwYXRoLmRpcm5hbWUoTVVUQVRJT05fTE9HX1BBVEgpLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICAgICAgYXdhaXQgZnMud3JpdGVGaWxlKE1VVEFUSU9OX0xPR19QQVRILCBKU09OLnN0cmluZ2lmeShsb2dzLCBudWxsLCAyKSwgJ3V0Zi04Jyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gTG9nIHRvIGNvbnNvbGUgaWYgZmlsZSBzeXN0ZW0gbG9nZ2luZyBmYWlsc1xuICAgICAgICBjb25zb2xlLmxvZygnTXV0YXRpb24gbG9nZ2VkIChmaWxlIGxvZ2dpbmcgZmFpbGVkKTonLCBuZXdMb2cpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gbG9nRXJyb3IobG9nOiBPbWl0PE11dGF0aW9uRXJyb3JMb2csICd0aW1lc3RhbXAnPikge1xuICAgIGNvbnN0IG5ld0Vycm9yTG9nOiBNdXRhdGlvbkVycm9yTG9nID0ge1xuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgLi4ubG9nLFxuICAgIH07XG4gICAgbGV0IGxvZ3M6IE11dGF0aW9uRXJyb3JMb2dbXSA9IFtdO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBmcy5yZWFkRmlsZShNVVRBVElPTl9FUlJPUl9MT0dfUEFUSCwgJ3V0Zi04Jyk7XG4gICAgICAgIGxvZ3MgPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7IC8qIEZpbGUgbWlnaHQgbm90IGV4aXN0IHlldCAqLyB9XG4gICAgbG9ncy5wdXNoKG5ld0Vycm9yTG9nKTtcbiAgICBcbiAgICAvLyBFbnN1cmUgdGhlIGRpcmVjdG9yeSBleGlzdHMgYmVmb3JlIHdyaXRpbmdcbiAgICB0cnkge1xuICAgICAgICBhd2FpdCBmcy5ta2RpcihwYXRoLmRpcm5hbWUoTVVUQVRJT05fRVJST1JfTE9HX1BBVEgpLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICAgICAgYXdhaXQgZnMud3JpdGVGaWxlKE1VVEFUSU9OX0VSUk9SX0xPR19QQVRILCBKU09OLnN0cmluZ2lmeShsb2dzLCBudWxsLCAyKSwgJ3V0Zi04Jyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gTG9nIHRvIGNvbnNvbGUgaWYgZmlsZSBzeXN0ZW0gbG9nZ2luZyBmYWlsc1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2dnZWQgKGZpbGUgbG9nZ2luZyBmYWlsZWQpOicsIG5ld0Vycm9yTG9nKTtcbiAgICB9XG59XG5cblxuLy8gLS0tIE11dGF0aW9uIEVuZ2luZSAtLS1cblxuZXhwb3J0IGNvbnN0IG11dGF0aW9uRW5naW5lID0ge1xuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGZyb250bWF0dGVyIG9mIGEgbWFya2Rvd24gZmlsZS5cbiAgICAgKi9cbiAgICBhc3luYyBwYXRjaEZyb250bWF0dGVyKGZpbGVQYXRoOiBzdHJpbmcsIHBhdGNoT2JqZWN0OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCB1dWlkPzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGZpbGUgPSBhd2FpdCByZWFkTWF0dGVyKGZpbGVQYXRoKTtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxEYXRhID0geyAuLi5maWxlLmRhdGEgfTtcbiAgICAgICAgXG4gICAgICAgIGZpbGUuZGF0YSA9IHsgLi4uZmlsZS5kYXRhLCAuLi5wYXRjaE9iamVjdCB9O1xuICAgICAgICBcbiAgICAgICAgYXdhaXQgd3JpdGVNYXR0ZXIoZmlsZVBhdGgsIGZpbGUpO1xuXG4gICAgICAgIGF3YWl0IGxvZ011dGF0aW9uKHtcbiAgICAgICAgICAgIGZpbGVQYXRoLFxuICAgICAgICAgICAgbXV0YXRpb25UeXBlOiAnUEFUQ0hfRlJPTlRNQVRURVInLFxuICAgICAgICAgICAgc3VtbWFyeTogYFVwZGF0ZWQgZnJvbnRtYXR0ZXIuIENoYW5nZXM6ICR7SlNPTi5zdHJpbmdpZnkocGF0Y2hPYmplY3QpfWAsXG4gICAgICAgICAgICBsb29wT3JUYXNrVXVpZDogdXVpZCxcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFwcGVuZHMgY29udGVudCB0byBhIHNwZWNpZmljIHNlY3Rpb24gb2YgYSBtYXJrZG93biBmaWxlLlxuICAgICAqIFRocm93cyBhbiBlcnJvciBpZiB0aGUgc2VjdGlvbiBkb2VzIG5vdCBleGlzdC5cbiAgICAgKi9cbiAgICBhc3luYyBhcHBlbmRUb1NlY3Rpb24oZmlsZVBhdGg6IHN0cmluZywgc2VjdGlvbkhlYWRlcjogc3RyaW5nLCBjb250ZW50VG9BcHBlbmQ6IHN0cmluZywgdXVpZD86IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBmaWxlID0gYXdhaXQgcmVhZE1hdHRlcihmaWxlUGF0aCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzZWN0aW9uUmVnZXggPSBuZXcgUmVnRXhwKGAoXiR7c2VjdGlvbkhlYWRlci5yZXBsYWNlKC9bLVxcL1xcXFxeJCorPy4oKXxbXFxde31dL2csICdcXFxcJCYnKX1bXFxcXHNcXFxcU10qPykoPz1cXFxcbiMjIHwkKWAsICdtJyk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWZpbGUuY29udGVudC5pbmNsdWRlcyhzZWN0aW9uSGVhZGVyKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBWYWxpZGF0aW9uIEVycm9yOiBTZWN0aW9uIFwiJHtzZWN0aW9uSGVhZGVyfVwiIG5vdCBmb3VuZCBpbiAke2ZpbGVQYXRofS5gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZpbGUuY29udGVudCA9IGZpbGUuY29udGVudC5yZXBsYWNlKHNlY3Rpb25IZWFkZXIsIGAke3NlY3Rpb25IZWFkZXJ9XFxuJHtjb250ZW50VG9BcHBlbmR9YCk7XG4gICAgICAgIFxuICAgICAgICBhd2FpdCB3cml0ZU1hdHRlcihmaWxlUGF0aCwgZmlsZSk7XG5cbiAgICAgICAgYXdhaXQgbG9nTXV0YXRpb24oe1xuICAgICAgICAgICAgZmlsZVBhdGgsXG4gICAgICAgICAgICBtdXRhdGlvblR5cGU6ICdBUFBFTkRfVE9fU0VDVElPTicsXG4gICAgICAgICAgICBzdW1tYXJ5OiBgQXBwZW5kZWQgY29udGVudCB0byBzZWN0aW9uIFwiJHtzZWN0aW9uSGVhZGVyfVwiLmAsXG4gICAgICAgICAgICBsb29wT3JUYXNrVXVpZDogdXVpZCxcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlcGxhY2VzIGNvbnRlbnQgd2l0aGluIGEgc3BlY2lmaWMgc2VjdGlvbiBvZiBhIG1hcmtkb3duIGZpbGUuXG4gICAgICovXG4gICAgYXN5bmMgcmVwbGFjZUluU2VjdGlvbihmaWxlUGF0aDogc3RyaW5nLCBzZWN0aW9uSGVhZGVyOiBzdHJpbmcsIG1hdGNoOiBzdHJpbmcgfCBSZWdFeHAsIHJlcGxhY2VtZW50OiBzdHJpbmcsIHV1aWQ/OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgZmlsZSA9IGF3YWl0IHJlYWRNYXR0ZXIoZmlsZVBhdGgpO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc2VjdGlvblJlZ2V4ID0gbmV3IFJlZ0V4cChgKF4ke3NlY3Rpb25IZWFkZXIucmVwbGFjZSgvWy1cXC9cXFxcXiQqKz8uKCl8W1xcXXt9XS9nLCAnXFxcXCQmJyl9W1xcXFxzXFxcXFNdKj8pKD89XFxcXG4jIyB8JClgLCAnbScpO1xuICAgICAgICBjb25zdCBzZWN0aW9uTWF0Y2ggPSBmaWxlLmNvbnRlbnQubWF0Y2goc2VjdGlvblJlZ2V4KTtcblxuICAgICAgICBpZiAoIXNlY3Rpb25NYXRjaCkge1xuICAgICAgICAgICAgY29uc3QgZXJyID0gbmV3IEVycm9yKGBWYWxpZGF0aW9uIEVycm9yOiBTZWN0aW9uIFwiJHtzZWN0aW9uSGVhZGVyfVwiIG5vdCBmb3VuZCBpbiAke2ZpbGVQYXRofS5gKTtcbiAgICAgICAgICAgIGF3YWl0IGxvZ0Vycm9yKHsgZmlsZVBhdGgsIG11dGF0aW9uVHlwZTogJ1JFUExBQ0VfSU5fU0VDVElPTicsIGVycm9yOiBlcnIubWVzc2FnZSwgbG9vcE9yVGFza1V1aWQ6IHV1aWQgfSk7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBvcmlnaW5hbFNlY3Rpb24gPSBzZWN0aW9uTWF0Y2hbMF07XG4gICAgICAgIGNvbnN0IG5ld1NlY3Rpb24gPSBvcmlnaW5hbFNlY3Rpb24ucmVwbGFjZShtYXRjaCwgcmVwbGFjZW1lbnQpO1xuXG4gICAgICAgIGlmIChvcmlnaW5hbFNlY3Rpb24gPT09IG5ld1NlY3Rpb24pIHJldHVybjsgLy8gTm8gY2hhbmdlXG5cbiAgICAgICAgZmlsZS5jb250ZW50ID0gZmlsZS5jb250ZW50LnJlcGxhY2Uob3JpZ2luYWxTZWN0aW9uLCBuZXdTZWN0aW9uKTtcbiAgICAgICAgYXdhaXQgd3JpdGVNYXR0ZXIoZmlsZVBhdGgsIGZpbGUpO1xuXG4gICAgICAgIGF3YWl0IGxvZ011dGF0aW9uKHtcbiAgICAgICAgICAgIGZpbGVQYXRoLFxuICAgICAgICAgICAgbXV0YXRpb25UeXBlOiAnUkVQTEFDRV9JTl9TRUNUSU9OJyxcbiAgICAgICAgICAgIHN1bW1hcnk6IGBSZXBsYWNlZCBjb250ZW50IGluIHNlY3Rpb24gXCIke3NlY3Rpb25IZWFkZXJ9XCIuYCxcbiAgICAgICAgICAgIGxvb3BPclRhc2tVdWlkOiB1dWlkLFxuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQXBwZW5kcyBhIHN0cnVjdHVyZWQgbG9nIGVudHJ5IHRvIHRoZSAjIyDwn6e+IEV4ZWN1dGlvbiBMb2cgc2VjdGlvbi5cbiAgICAgKi9cbiAgICBhc3luYyBhcHBlbmRUb0xvZyhmaWxlUGF0aDogc3RyaW5nLCBsb2dFbnRyeTogTG9nRW50cnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgZmlsZSA9IGF3YWl0IHJlYWRNYXR0ZXIoZmlsZVBhdGgpO1xuICAgICAgICBjb25zdCBzZWN0aW9uSGVhZGVyID0gJyMjIPCfp74gRXhlY3V0aW9uIExvZyc7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWZpbGUuY29udGVudC5pbmNsdWRlcyhzZWN0aW9uSGVhZGVyKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBWYWxpZGF0aW9uIEVycm9yOiBTZWN0aW9uIFwiJHtzZWN0aW9uSGVhZGVyfVwiIG5vdCBmb3VuZCBpbiAke2ZpbGVQYXRofS5gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZvcm1hdCBsb2cgZW50cnkgY29uc2lzdGVudGx5IHdpdGggZXhpc3RpbmcgZW50cmllc1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRFbnRyeSA9IGAtICR7bG9nRW50cnkudGltZXN0YW1wfTogJHtsb2dFbnRyeS5hY3RvciA9PT0gJ29yYScgPyAn8J+klicgOiAn8J+RpCd9ICR7bG9nRW50cnkuYWN0aW9ufWA7XG4gICAgICAgIFxuICAgICAgICAvLyBGaW5kIHRoZSBzZWN0aW9uIGFuZCBhcHBlbmQgdGhlIGxvZyBlbnRyeVxuICAgICAgICBjb25zdCBzZWN0aW9uUmVnZXggPSBuZXcgUmVnRXhwKGAoJHtzZWN0aW9uSGVhZGVyLnJlcGxhY2UoL1stXFwvXFxcXF4kKis/LigpfFtcXF17fV0vZywgJ1xcXFwkJicpfVtcXFxcc1xcXFxTXSo/KSg/PVxcXFxuIyMgfCQpYCwgJ20nKTtcbiAgICAgICAgY29uc3Qgc2VjdGlvbk1hdGNoID0gZmlsZS5jb250ZW50Lm1hdGNoKHNlY3Rpb25SZWdleCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXNlY3Rpb25NYXRjaCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBWYWxpZGF0aW9uIEVycm9yOiBTZWN0aW9uIFwiJHtzZWN0aW9uSGVhZGVyfVwiIG1hbGZvcm1lZCBpbiAke2ZpbGVQYXRofS5gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsU2VjdGlvbiA9IHNlY3Rpb25NYXRjaFswXTtcbiAgICAgICAgY29uc3QgbmV3U2VjdGlvbiA9IG9yaWdpbmFsU2VjdGlvbi5lbmRzV2l0aCgnXFxuJykgXG4gICAgICAgICAgICA/IGAke29yaWdpbmFsU2VjdGlvbn0ke2Zvcm1hdHRlZEVudHJ5fVxcbmBcbiAgICAgICAgICAgIDogYCR7b3JpZ2luYWxTZWN0aW9ufVxcbiR7Zm9ybWF0dGVkRW50cnl9XFxuYDtcblxuICAgICAgICBmaWxlLmNvbnRlbnQgPSBmaWxlLmNvbnRlbnQucmVwbGFjZShvcmlnaW5hbFNlY3Rpb24sIG5ld1NlY3Rpb24pO1xuICAgICAgICBhd2FpdCB3cml0ZU1hdHRlcihmaWxlUGF0aCwgZmlsZSk7XG5cbiAgICAgICAgYXdhaXQgbG9nTXV0YXRpb24oe1xuICAgICAgICAgICAgZmlsZVBhdGgsXG4gICAgICAgICAgICBtdXRhdGlvblR5cGU6ICdBUFBFTkRfVE9fTE9HJyxcbiAgICAgICAgICAgIHN1bW1hcnk6IGBBcHBlbmRlZCBsb2cgZW50cnk6ICR7bG9nRW50cnkuYWN0aW9ufWAsXG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBWYWxpZGF0ZXMgdGhhdCBhIG1hcmtkb3duIGZpbGUgY29udGFpbnMgYWxsIHJlcXVpcmVkIHNlY3Rpb25zLlxuICAgICAqIFRocm93cyBkZXRhaWxlZCBlcnJvcnMgaWYgc2VjdGlvbnMgYXJlIG1pc3NpbmcsIG1hbGZvcm1lZCwgb3IgZHVwbGljYXRlZC5cbiAgICAgKi9cbiAgICBhc3luYyB2YWxpZGF0ZU1hcmtkb3duU2NoZW1hKGZpbGVQYXRoOiBzdHJpbmcsIHJlcXVpcmVkU2VjdGlvbnM6IHN0cmluZ1tdID0gREVGQVVMVF9MT09QX1NFQ1RJT05TKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGxldCBjb250ZW50OiBzdHJpbmc7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb250ZW50ID0gYXdhaXQgZnMucmVhZEZpbGUoZmlsZVBhdGgsICd1dGYtOCcpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBWYWxpZGF0aW9uIEVycm9yOiBGaWxlIG5vdCBmb3VuZCBvciB1bnJlYWRhYmxlIGF0ICR7ZmlsZVBhdGh9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGNvbnN0IHNlY3Rpb25zRm91bmQ6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcblxuICAgICAgICAvLyBDb3VudCBvY2N1cnJlbmNlcyBvZiBlYWNoIHNlY3Rpb25cbiAgICAgICAgZm9yIChjb25zdCBzZWN0aW9uIG9mIHJlcXVpcmVkU2VjdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgXiR7c2VjdGlvbi5yZXBsYWNlKC9bLVxcL1xcXFxeJCorPy4oKXxbXFxde31dL2csICdcXFxcJCYnKX1gLCAnZ20nKTtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSBjb250ZW50Lm1hdGNoKHJlZ2V4KTtcbiAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gbWF0Y2hlcyA/IG1hdGNoZXMubGVuZ3RoIDogMDtcbiAgICAgICAgICAgIHNlY3Rpb25zRm91bmRbc2VjdGlvbl0gPSBjb3VudDtcblxuICAgICAgICAgICAgaWYgKGNvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goYE1pc3NpbmcgcmVxdWlyZWQgc2VjdGlvbjogXCIke3NlY3Rpb259XCJgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY291bnQgPiAxKSB7XG4gICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goYER1cGxpY2F0ZWQgc2VjdGlvbjogXCIke3NlY3Rpb259XCIgKGZvdW5kICR7Y291bnR9IHRpbWVzKWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgZm9yIG1hbGZvcm1lZCBzZWN0aW9ucyAoc2VjdGlvbnMgdGhhdCBkb24ndCBzdGFydCB3aXRoICMjKVxuICAgICAgICBjb25zdCBhbGxTZWN0aW9uSGVhZGVycyA9IGNvbnRlbnQubWF0Y2goL14jIyAuKyQvZ20pIHx8IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGhlYWRlciBvZiBhbGxTZWN0aW9uSGVhZGVycykge1xuICAgICAgICAgICAgaWYgKHJlcXVpcmVkU2VjdGlvbnMuaW5jbHVkZXMoaGVhZGVyKSkge1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHNlY3Rpb24gaGFzIGNvbnRlbnQgb3IgaXMgZm9sbG93ZWQgYnkgYW5vdGhlciBzZWN0aW9uXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VjdGlvblJlZ2V4ID0gbmV3IFJlZ0V4cChgKF4ke2hlYWRlci5yZXBsYWNlKC9bLVxcL1xcXFxeJCorPy4oKXxbXFxde31dL2csICdcXFxcJCYnKX1bXFxcXHNcXFxcU10qPykoPz1cXFxcbiMjIHwkKWAsICdtJyk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VjdGlvbk1hdGNoID0gY29udGVudC5tYXRjaChzZWN0aW9uUmVnZXgpO1xuICAgICAgICAgICAgICAgIGlmICghc2VjdGlvbk1hdGNoIHx8IHNlY3Rpb25NYXRjaFswXS50cmltKCkgPT09IGhlYWRlci50cmltKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2VjdGlvbiBleGlzdHMgYnV0IG1pZ2h0IGJlIG1hbGZvcm1lZCAoZW1wdHkgb3IgaW1tZWRpYXRlbHkgZm9sbG93ZWQgYnkgYW5vdGhlciBzZWN0aW9uKVxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIG5vdCBuZWNlc3NhcmlseSBhbiBlcnJvciwgc28gd2UnbGwgYWxsb3cgaXRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVmFsaWRhdGlvbiBFcnJvciBpbiAke2ZpbGVQYXRofTpcXG4ke2Vycm9ycy5qb2luKCdcXG4nKX1gKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQcmV2aWV3cyBhIG11dGF0aW9uIHdpdGhvdXQgd3JpdGluZyB0byBkaXNrLlxuICAgICAqIFJldHVybnMgcHJlSW1hZ2UsIHBvc3RJbWFnZSwgYW5kIG9wdGlvbmFsbHkgYSBkaWZmLlxuICAgICAqL1xuICAgIGFzeW5jIGRyeVJ1bk11dGF0aW9uKGZpbGVQYXRoOiBzdHJpbmcsIG11dGF0aW9uRm46IChjb250ZW50OiBzdHJpbmcpID0+IHN0cmluZyk6IFByb21pc2U8RHJ5UnVuUmVzdWx0PiB7XG4gICAgICAgIGxldCBwcmVJbWFnZTogc3RyaW5nO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcHJlSW1hZ2UgPSBhd2FpdCBmcy5yZWFkRmlsZShmaWxlUGF0aCwgJ3V0Zi04Jyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERyeSBSdW4gRXJyb3I6IENhbm5vdCByZWFkIGZpbGUgYXQgJHtmaWxlUGF0aH1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBwb3N0SW1hZ2U6IHN0cmluZztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHBvc3RJbWFnZSA9IG11dGF0aW9uRm4ocHJlSW1hZ2UpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBEcnkgUnVuIEVycm9yOiBNdXRhdGlvbiBmdW5jdGlvbiBmYWlsZWQ6ICR7ZXJyb3J9YCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTaW1wbGUgZGlmZiBjYWxjdWxhdGlvbiAoY291bGQgYmUgZW5oYW5jZWQgd2l0aCBhIHByb3BlciBkaWZmIGxpYnJhcnkpXG4gICAgICAgIGNvbnN0IGRpZmYgPSBwcmVJbWFnZSA9PT0gcG9zdEltYWdlID8gdW5kZWZpbmVkIDogJ0NvbnRlbnQgY2hhbmdlZCc7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHByZUltYWdlLFxuICAgICAgICAgICAgcG9zdEltYWdlLFxuICAgICAgICAgICAgZGlmZlxuICAgICAgICB9O1xuICAgIH1cbn07ICJdLCJuYW1lcyI6WyJmcyIsInBhdGgiLCJtYXR0ZXIiLCJtYXR0ZXJPcHRpb25zIiwiREVGQVVMVF9MT09QX1NFQ1RJT05TIiwiQkFTRV9ESVIiLCJyZXNvbHZlIiwiX19kaXJuYW1lIiwiTVVUQVRJT05fTE9HX1BBVEgiLCJqb2luIiwiTVVUQVRJT05fRVJST1JfTE9HX1BBVEgiLCJyZWFkTWF0dGVyIiwiZmlsZVBhdGgiLCJjb250ZW50IiwicmVhZEZpbGUiLCJ3cml0ZU1hdHRlciIsImZpbGUiLCJuZXdDb250ZW50Iiwic3RyaW5naWZ5IiwiZGF0YSIsIndyaXRlRmlsZSIsImxvZ011dGF0aW9uIiwibG9nIiwibmV3TG9nIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwibG9ncyIsIkpTT04iLCJwYXJzZSIsImVycm9yIiwicHVzaCIsIm1rZGlyIiwiZGlybmFtZSIsInJlY3Vyc2l2ZSIsImNvbnNvbGUiLCJsb2dFcnJvciIsIm5ld0Vycm9yTG9nIiwibXV0YXRpb25FbmdpbmUiLCJwYXRjaEZyb250bWF0dGVyIiwicGF0Y2hPYmplY3QiLCJ1dWlkIiwib3JpZ2luYWxEYXRhIiwibXV0YXRpb25UeXBlIiwic3VtbWFyeSIsImxvb3BPclRhc2tVdWlkIiwiYXBwZW5kVG9TZWN0aW9uIiwic2VjdGlvbkhlYWRlciIsImNvbnRlbnRUb0FwcGVuZCIsInNlY3Rpb25SZWdleCIsIlJlZ0V4cCIsInJlcGxhY2UiLCJpbmNsdWRlcyIsIkVycm9yIiwicmVwbGFjZUluU2VjdGlvbiIsIm1hdGNoIiwicmVwbGFjZW1lbnQiLCJzZWN0aW9uTWF0Y2giLCJlcnIiLCJtZXNzYWdlIiwib3JpZ2luYWxTZWN0aW9uIiwibmV3U2VjdGlvbiIsImFwcGVuZFRvTG9nIiwibG9nRW50cnkiLCJmb3JtYXR0ZWRFbnRyeSIsImFjdG9yIiwiYWN0aW9uIiwiZW5kc1dpdGgiLCJ2YWxpZGF0ZU1hcmtkb3duU2NoZW1hIiwicmVxdWlyZWRTZWN0aW9ucyIsImVycm9ycyIsInNlY3Rpb25zRm91bmQiLCJzZWN0aW9uIiwicmVnZXgiLCJtYXRjaGVzIiwiY291bnQiLCJsZW5ndGgiLCJhbGxTZWN0aW9uSGVhZGVycyIsImhlYWRlciIsInRyaW0iLCJkcnlSdW5NdXRhdGlvbiIsIm11dGF0aW9uRm4iLCJwcmVJbWFnZSIsInBvc3RJbWFnZSIsImRpZmYiLCJ1bmRlZmluZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../system/mutation-engine.ts\n");

/***/ }),

/***/ "(rsc)/./app/api/plan-tasks/route.ts":
/*!*************************************!*\
  !*** ./app/api/plan-tasks/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _lib_plan_parser__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/plan-parser */ \"(rsc)/./lib/plan-parser.ts\");\n/* harmony import */ var _system_mutation_engine__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/system/mutation-engine */ \"(rsc)/../../system/mutation-engine.ts\");\n/* harmony import */ var _lib_interaction_logger__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/interaction-logger */ \"(rsc)/./lib/interaction-logger.ts\");\n\n\n\n\n\n\nconst dynamic = \"force-dynamic\";\nconst BASE_DIR = path__WEBPACK_IMPORTED_MODULE_2___default().resolve(process.cwd(), \"../../..\");\nconst PLAN_PATH = path__WEBPACK_IMPORTED_MODULE_2___default().join(BASE_DIR, \"runtime\", \"workstreams\", \"roadmap\", \"workstream_plan.md\");\nconst BACKUP_DIR = path__WEBPACK_IMPORTED_MODULE_2___default().join(BASE_DIR, \"runtime\", \"backups\");\nasync function safeWriteTasks(tasks, existingContent) {\n    // 1. Create a backup\n    await fs_promises__WEBPACK_IMPORTED_MODULE_1___default().mkdir(BACKUP_DIR, {\n        recursive: true\n    });\n    const timestamp = new Date().toISOString().replace(/:/g, \"-\");\n    const backupPath = path__WEBPACK_IMPORTED_MODULE_2___default().join(BACKUP_DIR, `workstream_plan.md.${timestamp}.bak`);\n    await fs_promises__WEBPACK_IMPORTED_MODULE_1___default().copyFile(PLAN_PATH, backupPath);\n    // 2. Perform a sanity check before writing\n    const originalTasks = (0,_lib_plan_parser__WEBPACK_IMPORTED_MODULE_3__.parsePlan)(existingContent);\n    if (originalTasks.length > 5 && tasks.length < originalTasks.length / 2) {\n        throw new Error(`Potential data loss detected. Aborting write. Original tasks: ${originalTasks.length}, New tasks: ${tasks.length}`);\n    }\n    // 3. Write the new content\n    const newContent = (0,_lib_plan_parser__WEBPACK_IMPORTED_MODULE_3__.stringifyPlan)(tasks, existingContent);\n    await fs_promises__WEBPACK_IMPORTED_MODULE_1___default().writeFile(PLAN_PATH, newContent, \"utf-8\");\n}\nasync function GET() {\n    try {\n        const planContent = await fs_promises__WEBPACK_IMPORTED_MODULE_1___default().readFile(PLAN_PATH, \"utf-8\");\n        const tasks = (0,_lib_plan_parser__WEBPACK_IMPORTED_MODULE_3__.parsePlan)(planContent);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(tasks);\n    } catch (error) {\n        if (error instanceof Error && error.code === \"ENOENT\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json([]);\n        }\n        console.error(\"Failed to get plan tasks:\", error);\n        const errorMessage = error instanceof Error ? error.message : \"Internal Server Error\";\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Failed to get plan tasks\",\n            error: errorMessage\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { description, added_by, context } = body;\n        if (!description || !added_by) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: \"Missing required fields\"\n            }, {\n                status: 400\n            });\n        }\n        const sectionHeader = added_by === \"user\" ? \"### User-Defined Tasks\" : \"### Ora-Suggested Tasks\";\n        const newTask = {\n            description,\n            added_by,\n            status: \"pending\",\n            source: `plan: ${path__WEBPACK_IMPORTED_MODULE_2___default().basename(PLAN_PATH)}`,\n            context\n        };\n        const taskString = (0,_lib_plan_parser__WEBPACK_IMPORTED_MODULE_3__.stringifyPlan)([\n            {\n                ...newTask,\n                id: \"\",\n                section: \"User-Defined Tasks\"\n            }\n        ], \"\"); // Create the string representation\n        await _system_mutation_engine__WEBPACK_IMPORTED_MODULE_4__.mutationEngine.appendToSection(PLAN_PATH, sectionHeader, taskString);\n        // Log the interaction\n        try {\n            await (0,_lib_interaction_logger__WEBPACK_IMPORTED_MODULE_5__.logTaskInteraction)(\"create\", newTask.description, newTask.added_by, `Task successfully created and added to ${sectionHeader}.`, context);\n        } catch (logError) {\n            console.error(\"Failed to log task creation interaction:\", logError);\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(newTask, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"Failed to add task:\", error);\n        const errorMessage = error instanceof Error ? error.message : \"Internal Server Error\";\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Failed to add task\",\n            error: errorMessage\n        }, {\n            status: 500\n        });\n    }\n}\nasync function PUT(request) {\n    try {\n        const taskToUpdate = await request.json();\n        const fileContent = await fs_promises__WEBPACK_IMPORTED_MODULE_1___default().readFile(PLAN_PATH, \"utf-8\");\n        const tasks = (0,_lib_plan_parser__WEBPACK_IMPORTED_MODULE_3__.parsePlan)(fileContent);\n        const originalTask = tasks.find((t)=>t.id === taskToUpdate.id);\n        if (!originalTask) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: \"Task not found\"\n            }, {\n                status: 404\n            });\n        }\n        const originalTaskString = (0,_lib_plan_parser__WEBPACK_IMPORTED_MODULE_3__.stringifyPlan)([\n            originalTask\n        ], \"\");\n        const updatedTaskString = (0,_lib_plan_parser__WEBPACK_IMPORTED_MODULE_3__.stringifyPlan)([\n            taskToUpdate\n        ], \"\");\n        const sectionHeader = taskToUpdate.section === \"User-Defined Tasks\" ? \"### User-Defined Tasks\" : \"### Ora-Suggested Tasks\";\n        await _system_mutation_engine__WEBPACK_IMPORTED_MODULE_4__.mutationEngine.replaceInSection(PLAN_PATH, sectionHeader, originalTaskString, updatedTaskString, taskToUpdate.id);\n        // Log the interaction\n        try {\n            await (0,_lib_interaction_logger__WEBPACK_IMPORTED_MODULE_5__.logTaskInteraction)(\"update\", taskToUpdate.description, \"user\", `Task successfully updated in ${sectionHeader}.`, taskToUpdate.id);\n        } catch (logError) {\n            console.error(\"Failed to log task update interaction:\", logError);\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(taskToUpdate);\n    } catch (error) {\n        console.error(\"Failed to update task:\", error);\n        const errorMessage = error instanceof Error ? error.message : \"Internal Server Error\";\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Failed to update task\",\n            error: errorMessage\n        }, {\n            status: 500\n        });\n    }\n}\nasync function DELETE(request) {\n    try {\n        const { id } = await request.json();\n        if (!id) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Missing task id\"\n        }, {\n            status: 400\n        });\n        const fileContent = await fs_promises__WEBPACK_IMPORTED_MODULE_1___default().readFile(PLAN_PATH, \"utf-8\");\n        const tasks = (0,_lib_plan_parser__WEBPACK_IMPORTED_MODULE_3__.parsePlan)(fileContent);\n        const taskToDelete = tasks.find((t)=>t.id === id);\n        if (!taskToDelete) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: \"Task not found\"\n            }, {\n                status: 404\n            });\n        }\n        const taskString = (0,_lib_plan_parser__WEBPACK_IMPORTED_MODULE_3__.stringifyPlan)([\n            taskToDelete\n        ], \"\");\n        const sectionHeader = taskToDelete.section === \"User-Defined Tasks\" ? \"### User-Defined Tasks\" : \"### Ora-Suggested Tasks\";\n        await _system_mutation_engine__WEBPACK_IMPORTED_MODULE_4__.mutationEngine.replaceInSection(PLAN_PATH, sectionHeader, taskString, \"\", id);\n        // Log the interaction\n        try {\n            await (0,_lib_interaction_logger__WEBPACK_IMPORTED_MODULE_5__.logTaskInteraction)(\"delete\", taskToDelete.description, \"user\", `Task successfully deleted from ${sectionHeader}.`, id);\n        } catch (logError) {\n            console.error(\"Failed to log task deletion interaction:\", logError);\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Task deleted successfully\"\n        });\n    } catch (error) {\n        console.error(\"Failed to delete task:\", error);\n        const errorMessage = error instanceof Error ? error.message : \"Internal Server Error\";\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Failed to delete task\",\n            error: errorMessage\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFFSyxTQUFTO1lBQWlCLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUMzRTtRQUVBLE1BQU1XLGFBQWEvQywrREFBYUEsQ0FBQztZQUFDOEQ7U0FBYSxFQUFFO1FBQ2pELE1BQU1uQixnQkFBZ0JtQixhQUFhYixPQUFPLEtBQUssdUJBQXVCLDJCQUEyQjtRQUVqRyxNQUFNaEQsbUVBQWNBLENBQUMyRCxnQkFBZ0IsQ0FBQ3BELFdBQVdtQyxlQUFlSSxZQUFZLElBQUlDO1FBRWhGLHNCQUFzQjtRQUN0QixJQUFJO1lBQ0EsTUFBTTlDLDJFQUFrQkEsQ0FDcEIsVUFDQTRELGFBQWF0QixXQUFXLEVBQ3hCLFFBQ0EsQ0FBQywrQkFBK0IsRUFBRUcsY0FBYyxDQUFDLENBQUMsRUFDbERLO1FBRVIsRUFBRSxPQUFPRyxVQUFVO1lBQ2ZsQixRQUFRRixLQUFLLENBQUMsNENBQTRDb0I7UUFDOUQ7UUFFQSxPQUFPdkQscURBQVlBLENBQUNrQyxJQUFJLENBQUM7WUFBRUssU0FBUztRQUE0QjtJQUVwRSxFQUFFLE9BQU9KLE9BQU87UUFDWkUsUUFBUUYsS0FBSyxDQUFDLDBCQUEwQkE7UUFDeEMsTUFBTUcsZUFBZUgsaUJBQWlCUCxRQUFRTyxNQUFNSSxPQUFPLEdBQUc7UUFDOUQsT0FBT3ZDLHFEQUFZQSxDQUFDa0MsSUFBSSxDQUFDO1lBQUVLLFNBQVM7WUFBeUJKLE9BQU9HO1FBQWEsR0FBRztZQUFFRSxRQUFRO1FBQUk7SUFDdEc7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL29yYS1yZWFjdC1hcHAvLi9hcHAvYXBpL3BsYW4tdGFza3Mvcm91dGUudHM/YmVlMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgZnMgZnJvbSAnZnMvcHJvbWlzZXMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBwYXJzZVBsYW4sIHN0cmluZ2lmeVBsYW4sIFRhc2sgfSBmcm9tICdAL2xpYi9wbGFuLXBhcnNlcic7XG5pbXBvcnQgeyBtdXRhdGlvbkVuZ2luZSB9IGZyb20gJ0Avc3lzdGVtL211dGF0aW9uLWVuZ2luZSc7XG5pbXBvcnQgeyBsb2dUYXNrSW50ZXJhY3Rpb24gfSBmcm9tICdAL2xpYi9pbnRlcmFjdGlvbi1sb2dnZXInO1xuXG5leHBvcnQgY29uc3QgZHluYW1pYyA9ICdmb3JjZS1keW5hbWljJztcblxuY29uc3QgQkFTRV9ESVIgPSBwYXRoLnJlc29sdmUocHJvY2Vzcy5jd2QoKSwgJy4uLy4uLy4uJyk7XG5jb25zdCBQTEFOX1BBVEggPSBwYXRoLmpvaW4oQkFTRV9ESVIsICdydW50aW1lJywgJ3dvcmtzdHJlYW1zJywgJ3JvYWRtYXAnLCAnd29ya3N0cmVhbV9wbGFuLm1kJyk7XG5jb25zdCBCQUNLVVBfRElSID0gcGF0aC5qb2luKEJBU0VfRElSLCAncnVudGltZScsICdiYWNrdXBzJyk7XG5cbmFzeW5jIGZ1bmN0aW9uIHNhZmVXcml0ZVRhc2tzKHRhc2tzOiBUYXNrW10sIGV4aXN0aW5nQ29udGVudDogc3RyaW5nKSB7XG4gICAgLy8gMS4gQ3JlYXRlIGEgYmFja3VwXG4gICAgYXdhaXQgZnMubWtkaXIoQkFDS1VQX0RJUiwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnJlcGxhY2UoLzovZywgJy0nKTtcbiAgICBjb25zdCBiYWNrdXBQYXRoID0gcGF0aC5qb2luKEJBQ0tVUF9ESVIsIGB3b3Jrc3RyZWFtX3BsYW4ubWQuJHt0aW1lc3RhbXB9LmJha2ApO1xuICAgIGF3YWl0IGZzLmNvcHlGaWxlKFBMQU5fUEFUSCwgYmFja3VwUGF0aCk7XG5cbiAgICAvLyAyLiBQZXJmb3JtIGEgc2FuaXR5IGNoZWNrIGJlZm9yZSB3cml0aW5nXG4gICAgY29uc3Qgb3JpZ2luYWxUYXNrcyA9IHBhcnNlUGxhbihleGlzdGluZ0NvbnRlbnQpO1xuICAgIGlmIChvcmlnaW5hbFRhc2tzLmxlbmd0aCA+IDUgJiYgdGFza3MubGVuZ3RoIDwgb3JpZ2luYWxUYXNrcy5sZW5ndGggLyAyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgUG90ZW50aWFsIGRhdGEgbG9zcyBkZXRlY3RlZC4gQWJvcnRpbmcgd3JpdGUuIE9yaWdpbmFsIHRhc2tzOiAke29yaWdpbmFsVGFza3MubGVuZ3RofSwgTmV3IHRhc2tzOiAke3Rhc2tzLmxlbmd0aH1gKTtcbiAgICB9XG5cbiAgICAvLyAzLiBXcml0ZSB0aGUgbmV3IGNvbnRlbnRcbiAgICBjb25zdCBuZXdDb250ZW50ID0gc3RyaW5naWZ5UGxhbih0YXNrcywgZXhpc3RpbmdDb250ZW50KTtcbiAgICBhd2FpdCBmcy53cml0ZUZpbGUoUExBTl9QQVRILCBuZXdDb250ZW50LCAndXRmLTgnKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVCgpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBwbGFuQ29udGVudCA9IGF3YWl0IGZzLnJlYWRGaWxlKFBMQU5fUEFUSCwgJ3V0Zi04Jyk7XG4gICAgICAgIGNvbnN0IHRhc2tzID0gcGFyc2VQbGFuKHBsYW5Db250ZW50KTtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHRhc2tzKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiAoZXJyb3IgYXMgTm9kZUpTLkVycm5vRXhjZXB0aW9uKS5jb2RlID09PSAnRU5PRU5UJykge1xuICAgICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFtdKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2V0IHBsYW4gdGFza3M6JywgZXJyb3IpO1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InO1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiAnRmFpbGVkIHRvIGdldCBwbGFuIHRhc2tzJywgZXJyb3I6IGVycm9yTWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pO1xuICAgIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogUmVxdWVzdCkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICAgICAgY29uc3QgeyBkZXNjcmlwdGlvbiwgYWRkZWRfYnksIGNvbnRleHQgfSA9IGJvZHk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWRlc2NyaXB0aW9uIHx8ICFhZGRlZF9ieSkge1xuICAgICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ01pc3NpbmcgcmVxdWlyZWQgZmllbGRzJyB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzZWN0aW9uSGVhZGVyID0gYWRkZWRfYnkgPT09ICd1c2VyJyA/ICcjIyMgVXNlci1EZWZpbmVkIFRhc2tzJyA6ICcjIyMgT3JhLVN1Z2dlc3RlZCBUYXNrcyc7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBuZXdUYXNrOiBPbWl0PFRhc2ssICdpZCcgfCAnc2VjdGlvbic+ID0ge1xuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBhZGRlZF9ieSxcbiAgICAgICAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgICAgICAgc291cmNlOiBgcGxhbjogJHtwYXRoLmJhc2VuYW1lKFBMQU5fUEFUSCl9YCxcbiAgICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICBjb25zdCB0YXNrU3RyaW5nID0gc3RyaW5naWZ5UGxhbihbey4uLm5ld1Rhc2ssIGlkOiAnJywgc2VjdGlvbjogJ1VzZXItRGVmaW5lZCBUYXNrcycgfV0sICcnKTsgLy8gQ3JlYXRlIHRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb25cbiAgICAgICAgXG4gICAgICAgIGF3YWl0IG11dGF0aW9uRW5naW5lLmFwcGVuZFRvU2VjdGlvbihQTEFOX1BBVEgsIHNlY3Rpb25IZWFkZXIsIHRhc2tTdHJpbmcpO1xuICAgICAgICBcbiAgICAgICAgLy8gTG9nIHRoZSBpbnRlcmFjdGlvblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgbG9nVGFza0ludGVyYWN0aW9uKFxuICAgICAgICAgICAgICAgICdjcmVhdGUnLFxuICAgICAgICAgICAgICAgIG5ld1Rhc2suZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgbmV3VGFzay5hZGRlZF9ieSxcbiAgICAgICAgICAgICAgICBgVGFzayBzdWNjZXNzZnVsbHkgY3JlYXRlZCBhbmQgYWRkZWQgdG8gJHtzZWN0aW9uSGVhZGVyfS5gLFxuICAgICAgICAgICAgICAgIGNvbnRleHRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gY2F0Y2ggKGxvZ0Vycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9nIHRhc2sgY3JlYXRpb24gaW50ZXJhY3Rpb246JywgbG9nRXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24obmV3VGFzaywgeyBzdGF0dXM6IDIwMSB9KTtcbiAgICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGFkZCB0YXNrOicsIGVycm9yKTtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnSW50ZXJuYWwgU2VydmVyIEVycm9yJztcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ0ZhaWxlZCB0byBhZGQgdGFzaycsIGVycm9yOiBlcnJvck1lc3NhZ2UgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQVVQocmVxdWVzdDogUmVxdWVzdCkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRhc2tUb1VwZGF0ZTogVGFzayA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCBmcy5yZWFkRmlsZShQTEFOX1BBVEgsICd1dGYtOCcpO1xuICAgICAgICBjb25zdCB0YXNrcyA9IHBhcnNlUGxhbihmaWxlQ29udGVudCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBvcmlnaW5hbFRhc2sgPSB0YXNrcy5maW5kKHQgPT4gdC5pZCA9PT0gdGFza1RvVXBkYXRlLmlkKTtcbiAgICAgICAgaWYgKCFvcmlnaW5hbFRhc2spIHtcbiAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG1lc3NhZ2U6ICdUYXNrIG5vdCBmb3VuZCcgfSwgeyBzdGF0dXM6IDQwNCB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsVGFza1N0cmluZyA9IHN0cmluZ2lmeVBsYW4oW29yaWdpbmFsVGFza10sICcnKTtcbiAgICAgICAgY29uc3QgdXBkYXRlZFRhc2tTdHJpbmcgPSBzdHJpbmdpZnlQbGFuKFt0YXNrVG9VcGRhdGVdLCAnJyk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzZWN0aW9uSGVhZGVyID0gdGFza1RvVXBkYXRlLnNlY3Rpb24gPT09ICdVc2VyLURlZmluZWQgVGFza3MnID8gJyMjIyBVc2VyLURlZmluZWQgVGFza3MnIDogJyMjIyBPcmEtU3VnZ2VzdGVkIFRhc2tzJztcblxuICAgICAgICBhd2FpdCBtdXRhdGlvbkVuZ2luZS5yZXBsYWNlSW5TZWN0aW9uKFBMQU5fUEFUSCwgc2VjdGlvbkhlYWRlciwgb3JpZ2luYWxUYXNrU3RyaW5nLCB1cGRhdGVkVGFza1N0cmluZywgdGFza1RvVXBkYXRlLmlkKTtcblxuICAgICAgICAvLyBMb2cgdGhlIGludGVyYWN0aW9uXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBsb2dUYXNrSW50ZXJhY3Rpb24oXG4gICAgICAgICAgICAgICAgJ3VwZGF0ZScsXG4gICAgICAgICAgICAgICAgdGFza1RvVXBkYXRlLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgICd1c2VyJywgLy8gQXNzdW1lIHVzZXIgdXBkYXRlcyB0YXNrcyB0aHJvdWdoIFVJXG4gICAgICAgICAgICAgICAgYFRhc2sgc3VjY2Vzc2Z1bGx5IHVwZGF0ZWQgaW4gJHtzZWN0aW9uSGVhZGVyfS5gLFxuICAgICAgICAgICAgICAgIHRhc2tUb1VwZGF0ZS5pZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBjYXRjaCAobG9nRXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2cgdGFzayB1cGRhdGUgaW50ZXJhY3Rpb246JywgbG9nRXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHRhc2tUb1VwZGF0ZSk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gdXBkYXRlIHRhc2s6JywgZXJyb3IpO1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InO1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiAnRmFpbGVkIHRvIHVwZGF0ZSB0YXNrJywgZXJyb3I6IGVycm9yTWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pO1xuICAgIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIERFTEVURShyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBpZCB9ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgICAgIGlmICghaWQpIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG1lc3NhZ2U6ICdNaXNzaW5nIHRhc2sgaWQnIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IGZzLnJlYWRGaWxlKFBMQU5fUEFUSCwgJ3V0Zi04Jyk7XG4gICAgICAgIGNvbnN0IHRhc2tzID0gcGFyc2VQbGFuKGZpbGVDb250ZW50KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRhc2tUb0RlbGV0ZSA9IHRhc2tzLmZpbmQodCA9PiB0LmlkID09PSBpZCk7XG4gICAgICAgIGlmICghdGFza1RvRGVsZXRlKSB7XG4gICAgICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ1Rhc2sgbm90IGZvdW5kJyB9LCB7IHN0YXR1czogNDA0IH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCB0YXNrU3RyaW5nID0gc3RyaW5naWZ5UGxhbihbdGFza1RvRGVsZXRlXSwgJycpO1xuICAgICAgICBjb25zdCBzZWN0aW9uSGVhZGVyID0gdGFza1RvRGVsZXRlLnNlY3Rpb24gPT09ICdVc2VyLURlZmluZWQgVGFza3MnID8gJyMjIyBVc2VyLURlZmluZWQgVGFza3MnIDogJyMjIyBPcmEtU3VnZ2VzdGVkIFRhc2tzJztcblxuICAgICAgICBhd2FpdCBtdXRhdGlvbkVuZ2luZS5yZXBsYWNlSW5TZWN0aW9uKFBMQU5fUEFUSCwgc2VjdGlvbkhlYWRlciwgdGFza1N0cmluZywgJycsIGlkKTtcblxuICAgICAgICAvLyBMb2cgdGhlIGludGVyYWN0aW9uXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBsb2dUYXNrSW50ZXJhY3Rpb24oXG4gICAgICAgICAgICAgICAgJ2RlbGV0ZScsXG4gICAgICAgICAgICAgICAgdGFza1RvRGVsZXRlLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgICd1c2VyJywgLy8gQXNzdW1lIHVzZXIgZGVsZXRlcyB0YXNrcyB0aHJvdWdoIFVJXG4gICAgICAgICAgICAgICAgYFRhc2sgc3VjY2Vzc2Z1bGx5IGRlbGV0ZWQgZnJvbSAke3NlY3Rpb25IZWFkZXJ9LmAsXG4gICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gY2F0Y2ggKGxvZ0Vycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9nIHRhc2sgZGVsZXRpb24gaW50ZXJhY3Rpb246JywgbG9nRXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ1Rhc2sgZGVsZXRlZCBzdWNjZXNzZnVsbHknIH0pO1xuICAgICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZGVsZXRlIHRhc2s6JywgZXJyb3IpO1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InO1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiAnRmFpbGVkIHRvIGRlbGV0ZSB0YXNrJywgZXJyb3I6IGVycm9yTWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pO1xuICAgIH1cbn0gIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImZzIiwicGF0aCIsInBhcnNlUGxhbiIsInN0cmluZ2lmeVBsYW4iLCJtdXRhdGlvbkVuZ2luZSIsImxvZ1Rhc2tJbnRlcmFjdGlvbiIsImR5bmFtaWMiLCJCQVNFX0RJUiIsInJlc29sdmUiLCJwcm9jZXNzIiwiY3dkIiwiUExBTl9QQVRIIiwiam9pbiIsIkJBQ0tVUF9ESVIiLCJzYWZlV3JpdGVUYXNrcyIsInRhc2tzIiwiZXhpc3RpbmdDb250ZW50IiwibWtkaXIiLCJyZWN1cnNpdmUiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJyZXBsYWNlIiwiYmFja3VwUGF0aCIsImNvcHlGaWxlIiwib3JpZ2luYWxUYXNrcyIsImxlbmd0aCIsIkVycm9yIiwibmV3Q29udGVudCIsIndyaXRlRmlsZSIsIkdFVCIsInBsYW5Db250ZW50IiwicmVhZEZpbGUiLCJqc29uIiwiZXJyb3IiLCJjb2RlIiwiY29uc29sZSIsImVycm9yTWVzc2FnZSIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJQT1NUIiwicmVxdWVzdCIsImJvZHkiLCJkZXNjcmlwdGlvbiIsImFkZGVkX2J5IiwiY29udGV4dCIsInNlY3Rpb25IZWFkZXIiLCJuZXdUYXNrIiwic291cmNlIiwiYmFzZW5hbWUiLCJ0YXNrU3RyaW5nIiwiaWQiLCJzZWN0aW9uIiwiYXBwZW5kVG9TZWN0aW9uIiwibG9nRXJyb3IiLCJQVVQiLCJ0YXNrVG9VcGRhdGUiLCJmaWxlQ29udGVudCIsIm9yaWdpbmFsVGFzayIsImZpbmQiLCJ0Iiwib3JpZ2luYWxUYXNrU3RyaW5nIiwidXBkYXRlZFRhc2tTdHJpbmciLCJyZXBsYWNlSW5TZWN0aW9uIiwiREVMRVRFIiwidGFza1RvRGVsZXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/plan-tasks/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/interaction-logger.ts":
/*!***********************************!*\
  !*** ./lib/interaction-logger.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logChatInteraction: () => (/* binding */ logChatInteraction),\n/* harmony export */   logInteraction: () => (/* binding */ logInteraction),\n/* harmony export */   logMemoryExecutionInteraction: () => (/* binding */ logMemoryExecutionInteraction),\n/* harmony export */   logTaskInteraction: () => (/* binding */ logTaskInteraction),\n/* harmony export */   logUIInteraction: () => (/* binding */ logUIInteraction)\n/* harmony export */ });\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm/v4.js\");\n\n\n\n// --- Path Resolution ---\nconst BASE_DIR = path__WEBPACK_IMPORTED_MODULE_1___default().resolve(process.cwd(), \"../../..\");\nconst INTERACTIONS_DIR = path__WEBPACK_IMPORTED_MODULE_1___default().join(BASE_DIR, \"runtime\", \"interactions\");\n// --- Utility Functions ---\n/**\n * Generates a unique interaction UUID\n */ function generateInteractionUuid() {\n    return `interaction-${Date.now()}-${(0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])().slice(0, 8)}`;\n}\n/**\n * Formats timestamp for filename\n */ function formatTimestampForFilename(timestamp) {\n    return timestamp.toISOString().replace(/T/, \"-\").replace(/:/g, \"\").replace(/\\..+/, \"\").slice(0, 15); // YYYY-MM-DD-HHMM\n}\n/**\n * Generates interaction filename\n */ function generateInteractionFilename(timestamp, contextId) {\n    const timestampStr = formatTimestampForFilename(timestamp);\n    const suffix = contextId ? `-${contextId}` : \"\";\n    return `interaction-${timestampStr}${suffix}.md`;\n}\n/**\n * Creates the frontmatter and content for an interaction log\n */ function createInteractionContent(data, uuid, timestamp) {\n    return `---\nuuid: ${uuid}\ntimestamp: ${timestamp}\nactor: ${data.actor}\nsource: ${data.source}\ncontext: ${data.context}\ntags: [${data.tags.join(\", \")}]\n---\n\n## ðŸ’¬ Message\n\n${data.message}\n\n## ðŸ”„ Outcome\n\n${data.outcome}\n`;\n}\n/**\n * Determines context and tags from interaction details\n */ function deriveContextAndTags(interactionType, context, actor) {\n    const { contextType, contextId, action } = context;\n    let contextStr = contextId || \"unknown\";\n    let tags = [\n        \"interaction\"\n    ];\n    // Add context-specific tags\n    if (contextType) {\n        tags.push(contextType);\n        if (contextType === \"loop\" && contextId) {\n            contextStr = contextId;\n            tags.push(\"loop-interaction\");\n        } else if (contextType === \"task\" && contextId) {\n            contextStr = contextId;\n            tags.push(\"task-management\");\n        } else if (contextType === \"phase\" && contextId) {\n            contextStr = contextId;\n            tags.push(\"phase-interaction\");\n        }\n    }\n    // Add interaction type tags\n    tags.push(interactionType);\n    // Add action-specific tags\n    if (action) {\n        tags.push(action);\n    }\n    // Add actor-specific tags\n    tags.push(`${actor}-action`);\n    return {\n        contextStr,\n        tags\n    };\n}\n// --- Main Logging Function ---\n/**\n * Logs an interaction to the interactions directory\n */ async function logInteraction(interactionType, message, outcome, actor, source, context = {}) {\n    try {\n        // Ensure interactions directory exists\n        await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().mkdir(INTERACTIONS_DIR, {\n            recursive: true\n        });\n        // Generate interaction metadata\n        const uuid = generateInteractionUuid();\n        const timestamp = new Date();\n        const timestampIso = timestamp.toISOString();\n        // Derive context and tags\n        const { contextStr, tags } = deriveContextAndTags(interactionType, context, actor);\n        // Create interaction data\n        const interactionData = {\n            actor,\n            source,\n            context: contextStr,\n            tags,\n            message,\n            outcome\n        };\n        // Generate filename and content\n        const filename = generateInteractionFilename(timestamp, context.contextId);\n        const content = createInteractionContent(interactionData, uuid, timestampIso);\n        const filePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(INTERACTIONS_DIR, filename);\n        // Write the interaction log\n        await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().writeFile(filePath, content, \"utf-8\");\n        console.log(`âœ… Interaction logged: ${uuid} -> ${filename}`);\n        return uuid;\n    } catch (error) {\n        console.error(\"âŒ Failed to log interaction:\", error);\n        throw error;\n    }\n}\n// --- Convenience Functions ---\n/**\n * Logs a chat message interaction\n */ async function logChatInteraction(message, actor, contextType, contextId, filePath) {\n    const interactionMessage = `Chat message in ${contextType} ${contextId}: \"${message.substring(0, 100)}${message.length > 100 ? \"...\" : \"\"}\"`;\n    const outcome = `Message successfully posted to ${filePath ? filePath : `${contextType}/${contextId}`} chat history.`;\n    return logInteraction(\"chat-message\", interactionMessage, outcome, actor, \"chat\", {\n        contextType: contextType,\n        contextId,\n        filePath,\n        action: \"post-message\"\n    });\n}\n/**\n * Logs a task management interaction\n */ async function logTaskInteraction(action, taskDescription, actor, outcome, contextId) {\n    const interactionMessage = `Task ${action}: \"${taskDescription.substring(0, 100)}${taskDescription.length > 100 ? \"...\" : \"\"}\"`;\n    return logInteraction(\"task-management\", interactionMessage, outcome, actor, \"ui\", {\n        contextType: \"task\",\n        contextId,\n        action: `task-${action}`\n    });\n}\n/**\n * Logs a memory/execution log interaction\n */ async function logMemoryExecutionInteraction(section, message, contextType, contextId, filePath) {\n    const interactionMessage = `${section === \"memory\" ? \"Memory trace\" : \"Execution log\"} entry: \"${message.substring(0, 100)}${message.length > 100 ? \"...\" : \"\"}\"`;\n    const outcome = `Successfully logged to ${section} section in ${filePath || `${contextType}/${contextId}`}.`;\n    return logInteraction(`${section}-log`, interactionMessage, outcome, \"ora\", \"api\", {\n        contextType: contextType,\n        contextId,\n        filePath,\n        action: `log-${section}`\n    });\n}\n/**\n * Logs a UI interaction (form submission, button click, etc.)\n */ async function logUIInteraction(action, details, outcome, contextId) {\n    const interactionMessage = `UI ${action}: ${details}`;\n    return logInteraction(\"ui-interaction\", interactionMessage, outcome, \"user\", \"ui\", {\n        contextId,\n        action\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YUFBYUE7UUFBb0JkO1FBQVd5QjtRQUFVVixRQUFRLENBQUMsSUFBSSxFQUFFc0IsUUFBUSxDQUFDO0lBQUM7QUFFekY7QUFFQTs7Q0FFQyxHQUNNLGVBQWVDLGlCQUNsQnZCLE1BQWMsRUFDZHdCLE9BQWUsRUFDZjVCLE9BQWUsRUFDZlgsU0FBa0I7SUFFbEIsTUFBTStCLHFCQUFxQixDQUFDLEdBQUcsRUFBRWhCLE9BQU8sRUFBRSxFQUFFd0IsUUFBUSxDQUFDO0lBRXJELE9BQU9yQixlQUNILGtCQUNBYSxvQkFDQXBCLFNBQ0EsUUFDQSxNQUNBO1FBQUVYO1FBQVdlO0lBQU87QUFFNUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcmEtcmVhY3QtYXBwLy4vbGliL2ludGVyYWN0aW9uLWxvZ2dlci50cz9iNTQ1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmcyBmcm9tICdmcy9wcm9taXNlcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuXG4vLyAtLS0gVHlwZXMgLS0tXG5leHBvcnQgaW50ZXJmYWNlIEludGVyYWN0aW9uTG9nRGF0YSB7XG4gICAgYWN0b3I6ICd1c2VyJyB8ICdvcmEnO1xuICAgIHNvdXJjZTogJ2xvb3AnIHwgJ3VpJyB8ICdhcGknIHwgJ2NoYXQnIHwgJ2dtYWlsJyB8ICdzbGFjaycgfCAnc3lzdGVtJztcbiAgICBjb250ZXh0OiBzdHJpbmc7IC8vIGxvb3AtdXVpZCwgcGhhc2UsIHRhc2stdXVpZCwgZXRjLlxuICAgIHRhZ3M6IHN0cmluZ1tdO1xuICAgIG1lc3NhZ2U6IHN0cmluZztcbiAgICBvdXRjb21lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW50ZXJhY3Rpb25Db250ZXh0IHtcbiAgICBjb250ZXh0VHlwZT86ICdsb29wJyB8ICdwaGFzZScgfCAndGFzaycgfCAnc3lzdGVtJztcbiAgICBjb250ZXh0SWQ/OiBzdHJpbmc7XG4gICAgZmlsZVBhdGg/OiBzdHJpbmc7XG4gICAgYWN0aW9uPzogc3RyaW5nO1xufVxuXG4vLyAtLS0gUGF0aCBSZXNvbHV0aW9uIC0tLVxuY29uc3QgQkFTRV9ESVIgPSBwYXRoLnJlc29sdmUocHJvY2Vzcy5jd2QoKSwgJy4uLy4uLy4uJyk7XG5jb25zdCBJTlRFUkFDVElPTlNfRElSID0gcGF0aC5qb2luKEJBU0VfRElSLCAncnVudGltZScsICdpbnRlcmFjdGlvbnMnKTtcblxuLy8gLS0tIFV0aWxpdHkgRnVuY3Rpb25zIC0tLVxuXG4vKipcbiAqIEdlbmVyYXRlcyBhIHVuaXF1ZSBpbnRlcmFjdGlvbiBVVUlEXG4gKi9cbmZ1bmN0aW9uIGdlbmVyYXRlSW50ZXJhY3Rpb25VdWlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBpbnRlcmFjdGlvbi0ke0RhdGUubm93KCl9LSR7dXVpZHY0KCkuc2xpY2UoMCwgOCl9YDtcbn1cblxuLyoqXG4gKiBGb3JtYXRzIHRpbWVzdGFtcCBmb3IgZmlsZW5hbWVcbiAqL1xuZnVuY3Rpb24gZm9ybWF0VGltZXN0YW1wRm9yRmlsZW5hbWUodGltZXN0YW1wOiBEYXRlKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGltZXN0YW1wLnRvSVNPU3RyaW5nKClcbiAgICAgICAgLnJlcGxhY2UoL1QvLCAnLScpXG4gICAgICAgIC5yZXBsYWNlKC86L2csICcnKVxuICAgICAgICAucmVwbGFjZSgvXFwuLisvLCAnJylcbiAgICAgICAgLnNsaWNlKDAsIDE1KTsgLy8gWVlZWS1NTS1ERC1ISE1NXG59XG5cbi8qKlxuICogR2VuZXJhdGVzIGludGVyYWN0aW9uIGZpbGVuYW1lXG4gKi9cbmZ1bmN0aW9uIGdlbmVyYXRlSW50ZXJhY3Rpb25GaWxlbmFtZSh0aW1lc3RhbXA6IERhdGUsIGNvbnRleHRJZD86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgdGltZXN0YW1wU3RyID0gZm9ybWF0VGltZXN0YW1wRm9yRmlsZW5hbWUodGltZXN0YW1wKTtcbiAgICBjb25zdCBzdWZmaXggPSBjb250ZXh0SWQgPyBgLSR7Y29udGV4dElkfWAgOiAnJztcbiAgICByZXR1cm4gYGludGVyYWN0aW9uLSR7dGltZXN0YW1wU3RyfSR7c3VmZml4fS5tZGA7XG59XG5cbi8qKlxuICogQ3JlYXRlcyB0aGUgZnJvbnRtYXR0ZXIgYW5kIGNvbnRlbnQgZm9yIGFuIGludGVyYWN0aW9uIGxvZ1xuICovXG5mdW5jdGlvbiBjcmVhdGVJbnRlcmFjdGlvbkNvbnRlbnQoZGF0YTogSW50ZXJhY3Rpb25Mb2dEYXRhLCB1dWlkOiBzdHJpbmcsIHRpbWVzdGFtcDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYC0tLVxudXVpZDogJHt1dWlkfVxudGltZXN0YW1wOiAke3RpbWVzdGFtcH1cbmFjdG9yOiAke2RhdGEuYWN0b3J9XG5zb3VyY2U6ICR7ZGF0YS5zb3VyY2V9XG5jb250ZXh0OiAke2RhdGEuY29udGV4dH1cbnRhZ3M6IFske2RhdGEudGFncy5qb2luKCcsICcpfV1cbi0tLVxuXG4jIyDwn5KsIE1lc3NhZ2VcblxuJHtkYXRhLm1lc3NhZ2V9XG5cbiMjIPCflIQgT3V0Y29tZVxuXG4ke2RhdGEub3V0Y29tZX1cbmA7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lcyBjb250ZXh0IGFuZCB0YWdzIGZyb20gaW50ZXJhY3Rpb24gZGV0YWlsc1xuICovXG5mdW5jdGlvbiBkZXJpdmVDb250ZXh0QW5kVGFncyhcbiAgICBpbnRlcmFjdGlvblR5cGU6IHN0cmluZyxcbiAgICBjb250ZXh0OiBJbnRlcmFjdGlvbkNvbnRleHQsXG4gICAgYWN0b3I6ICd1c2VyJyB8ICdvcmEnXG4pOiB7IGNvbnRleHRTdHI6IHN0cmluZzsgdGFnczogc3RyaW5nW10gfSB7XG4gICAgY29uc3QgeyBjb250ZXh0VHlwZSwgY29udGV4dElkLCBhY3Rpb24gfSA9IGNvbnRleHQ7XG4gICAgXG4gICAgbGV0IGNvbnRleHRTdHIgPSBjb250ZXh0SWQgfHwgJ3Vua25vd24nO1xuICAgIGxldCB0YWdzID0gWydpbnRlcmFjdGlvbiddO1xuXG4gICAgLy8gQWRkIGNvbnRleHQtc3BlY2lmaWMgdGFnc1xuICAgIGlmIChjb250ZXh0VHlwZSkge1xuICAgICAgICB0YWdzLnB1c2goY29udGV4dFR5cGUpO1xuICAgICAgICBpZiAoY29udGV4dFR5cGUgPT09ICdsb29wJyAmJiBjb250ZXh0SWQpIHtcbiAgICAgICAgICAgIGNvbnRleHRTdHIgPSBjb250ZXh0SWQ7XG4gICAgICAgICAgICB0YWdzLnB1c2goJ2xvb3AtaW50ZXJhY3Rpb24nKTtcbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0VHlwZSA9PT0gJ3Rhc2snICYmIGNvbnRleHRJZCkge1xuICAgICAgICAgICAgY29udGV4dFN0ciA9IGNvbnRleHRJZDtcbiAgICAgICAgICAgIHRhZ3MucHVzaCgndGFzay1tYW5hZ2VtZW50Jyk7XG4gICAgICAgIH0gZWxzZSBpZiAoY29udGV4dFR5cGUgPT09ICdwaGFzZScgJiYgY29udGV4dElkKSB7XG4gICAgICAgICAgICBjb250ZXh0U3RyID0gY29udGV4dElkO1xuICAgICAgICAgICAgdGFncy5wdXNoKCdwaGFzZS1pbnRlcmFjdGlvbicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWRkIGludGVyYWN0aW9uIHR5cGUgdGFnc1xuICAgIHRhZ3MucHVzaChpbnRlcmFjdGlvblR5cGUpO1xuICAgIFxuICAgIC8vIEFkZCBhY3Rpb24tc3BlY2lmaWMgdGFnc1xuICAgIGlmIChhY3Rpb24pIHtcbiAgICAgICAgdGFncy5wdXNoKGFjdGlvbik7XG4gICAgfVxuXG4gICAgLy8gQWRkIGFjdG9yLXNwZWNpZmljIHRhZ3NcbiAgICB0YWdzLnB1c2goYCR7YWN0b3J9LWFjdGlvbmApO1xuXG4gICAgcmV0dXJuIHsgY29udGV4dFN0ciwgdGFncyB9O1xufVxuXG4vLyAtLS0gTWFpbiBMb2dnaW5nIEZ1bmN0aW9uIC0tLVxuXG4vKipcbiAqIExvZ3MgYW4gaW50ZXJhY3Rpb24gdG8gdGhlIGludGVyYWN0aW9ucyBkaXJlY3RvcnlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ0ludGVyYWN0aW9uKFxuICAgIGludGVyYWN0aW9uVHlwZTogc3RyaW5nLFxuICAgIG1lc3NhZ2U6IHN0cmluZyxcbiAgICBvdXRjb21lOiBzdHJpbmcsXG4gICAgYWN0b3I6ICd1c2VyJyB8ICdvcmEnLFxuICAgIHNvdXJjZTogSW50ZXJhY3Rpb25Mb2dEYXRhWydzb3VyY2UnXSxcbiAgICBjb250ZXh0OiBJbnRlcmFjdGlvbkNvbnRleHQgPSB7fVxuKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICB0cnkge1xuICAgICAgICAvLyBFbnN1cmUgaW50ZXJhY3Rpb25zIGRpcmVjdG9yeSBleGlzdHNcbiAgICAgICAgYXdhaXQgZnMubWtkaXIoSU5URVJBQ1RJT05TX0RJUiwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG5cbiAgICAgICAgLy8gR2VuZXJhdGUgaW50ZXJhY3Rpb24gbWV0YWRhdGFcbiAgICAgICAgY29uc3QgdXVpZCA9IGdlbmVyYXRlSW50ZXJhY3Rpb25VdWlkKCk7XG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcElzbyA9IHRpbWVzdGFtcC50b0lTT1N0cmluZygpO1xuICAgICAgICBcbiAgICAgICAgLy8gRGVyaXZlIGNvbnRleHQgYW5kIHRhZ3NcbiAgICAgICAgY29uc3QgeyBjb250ZXh0U3RyLCB0YWdzIH0gPSBkZXJpdmVDb250ZXh0QW5kVGFncyhpbnRlcmFjdGlvblR5cGUsIGNvbnRleHQsIGFjdG9yKTtcblxuICAgICAgICAvLyBDcmVhdGUgaW50ZXJhY3Rpb24gZGF0YVxuICAgICAgICBjb25zdCBpbnRlcmFjdGlvbkRhdGE6IEludGVyYWN0aW9uTG9nRGF0YSA9IHtcbiAgICAgICAgICAgIGFjdG9yLFxuICAgICAgICAgICAgc291cmNlLFxuICAgICAgICAgICAgY29udGV4dDogY29udGV4dFN0cixcbiAgICAgICAgICAgIHRhZ3MsXG4gICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgb3V0Y29tZVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEdlbmVyYXRlIGZpbGVuYW1lIGFuZCBjb250ZW50XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gZ2VuZXJhdGVJbnRlcmFjdGlvbkZpbGVuYW1lKHRpbWVzdGFtcCwgY29udGV4dC5jb250ZXh0SWQpO1xuICAgICAgICBjb25zdCBjb250ZW50ID0gY3JlYXRlSW50ZXJhY3Rpb25Db250ZW50KGludGVyYWN0aW9uRGF0YSwgdXVpZCwgdGltZXN0YW1wSXNvKTtcbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4oSU5URVJBQ1RJT05TX0RJUiwgZmlsZW5hbWUpO1xuXG4gICAgICAgIC8vIFdyaXRlIHRoZSBpbnRlcmFjdGlvbiBsb2dcbiAgICAgICAgYXdhaXQgZnMud3JpdGVGaWxlKGZpbGVQYXRoLCBjb250ZW50LCAndXRmLTgnKTtcblxuICAgICAgICBjb25zb2xlLmxvZyhg4pyFIEludGVyYWN0aW9uIGxvZ2dlZDogJHt1dWlkfSAtPiAke2ZpbGVuYW1lfWApO1xuICAgICAgICByZXR1cm4gdXVpZDtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gbG9nIGludGVyYWN0aW9uOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufVxuXG4vLyAtLS0gQ29udmVuaWVuY2UgRnVuY3Rpb25zIC0tLVxuXG4vKipcbiAqIExvZ3MgYSBjaGF0IG1lc3NhZ2UgaW50ZXJhY3Rpb25cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ0NoYXRJbnRlcmFjdGlvbihcbiAgICBtZXNzYWdlOiBzdHJpbmcsXG4gICAgYWN0b3I6ICd1c2VyJyB8ICdvcmEnLFxuICAgIGNvbnRleHRUeXBlOiBzdHJpbmcsXG4gICAgY29udGV4dElkOiBzdHJpbmcsXG4gICAgZmlsZVBhdGg/OiBzdHJpbmdcbik6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgaW50ZXJhY3Rpb25NZXNzYWdlID0gYENoYXQgbWVzc2FnZSBpbiAke2NvbnRleHRUeXBlfSAke2NvbnRleHRJZH06IFwiJHttZXNzYWdlLnN1YnN0cmluZygwLCAxMDApfSR7bWVzc2FnZS5sZW5ndGggPiAxMDAgPyAnLi4uJyA6ICcnfVwiYDtcbiAgICBjb25zdCBvdXRjb21lID0gYE1lc3NhZ2Ugc3VjY2Vzc2Z1bGx5IHBvc3RlZCB0byAke2ZpbGVQYXRoID8gZmlsZVBhdGggOiBgJHtjb250ZXh0VHlwZX0vJHtjb250ZXh0SWR9YH0gY2hhdCBoaXN0b3J5LmA7XG4gICAgXG4gICAgcmV0dXJuIGxvZ0ludGVyYWN0aW9uKFxuICAgICAgICAnY2hhdC1tZXNzYWdlJyxcbiAgICAgICAgaW50ZXJhY3Rpb25NZXNzYWdlLFxuICAgICAgICBvdXRjb21lLFxuICAgICAgICBhY3RvcixcbiAgICAgICAgJ2NoYXQnLFxuICAgICAgICB7IGNvbnRleHRUeXBlOiBjb250ZXh0VHlwZSBhcyBhbnksIGNvbnRleHRJZCwgZmlsZVBhdGgsIGFjdGlvbjogJ3Bvc3QtbWVzc2FnZScgfVxuICAgICk7XG59XG5cbi8qKlxuICogTG9ncyBhIHRhc2sgbWFuYWdlbWVudCBpbnRlcmFjdGlvblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nVGFza0ludGVyYWN0aW9uKFxuICAgIGFjdGlvbjogJ2NyZWF0ZScgfCAndXBkYXRlJyB8ICdkZWxldGUnIHwgJ3Byb21vdGUnLFxuICAgIHRhc2tEZXNjcmlwdGlvbjogc3RyaW5nLFxuICAgIGFjdG9yOiAndXNlcicgfCAnb3JhJyxcbiAgICBvdXRjb21lOiBzdHJpbmcsXG4gICAgY29udGV4dElkPzogc3RyaW5nXG4pOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IGludGVyYWN0aW9uTWVzc2FnZSA9IGBUYXNrICR7YWN0aW9ufTogXCIke3Rhc2tEZXNjcmlwdGlvbi5zdWJzdHJpbmcoMCwgMTAwKX0ke3Rhc2tEZXNjcmlwdGlvbi5sZW5ndGggPiAxMDAgPyAnLi4uJyA6ICcnfVwiYDtcbiAgICBcbiAgICByZXR1cm4gbG9nSW50ZXJhY3Rpb24oXG4gICAgICAgICd0YXNrLW1hbmFnZW1lbnQnLFxuICAgICAgICBpbnRlcmFjdGlvbk1lc3NhZ2UsXG4gICAgICAgIG91dGNvbWUsXG4gICAgICAgIGFjdG9yLFxuICAgICAgICAndWknLFxuICAgICAgICB7IGNvbnRleHRUeXBlOiAndGFzaycsIGNvbnRleHRJZCwgYWN0aW9uOiBgdGFzay0ke2FjdGlvbn1gIH1cbiAgICApO1xufVxuXG4vKipcbiAqIExvZ3MgYSBtZW1vcnkvZXhlY3V0aW9uIGxvZyBpbnRlcmFjdGlvblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nTWVtb3J5RXhlY3V0aW9uSW50ZXJhY3Rpb24oXG4gICAgc2VjdGlvbjogJ21lbW9yeScgfCAnZXhlY3V0aW9uJyxcbiAgICBtZXNzYWdlOiBzdHJpbmcsXG4gICAgY29udGV4dFR5cGU6IHN0cmluZyxcbiAgICBjb250ZXh0SWQ6IHN0cmluZyxcbiAgICBmaWxlUGF0aD86IHN0cmluZ1xuKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBpbnRlcmFjdGlvbk1lc3NhZ2UgPSBgJHtzZWN0aW9uID09PSAnbWVtb3J5JyA/ICdNZW1vcnkgdHJhY2UnIDogJ0V4ZWN1dGlvbiBsb2cnfSBlbnRyeTogXCIke21lc3NhZ2Uuc3Vic3RyaW5nKDAsIDEwMCl9JHttZXNzYWdlLmxlbmd0aCA+IDEwMCA/ICcuLi4nIDogJyd9XCJgO1xuICAgIGNvbnN0IG91dGNvbWUgPSBgU3VjY2Vzc2Z1bGx5IGxvZ2dlZCB0byAke3NlY3Rpb259IHNlY3Rpb24gaW4gJHtmaWxlUGF0aCB8fCBgJHtjb250ZXh0VHlwZX0vJHtjb250ZXh0SWR9YH0uYDtcbiAgICBcbiAgICByZXR1cm4gbG9nSW50ZXJhY3Rpb24oXG4gICAgICAgIGAke3NlY3Rpb259LWxvZ2AsXG4gICAgICAgIGludGVyYWN0aW9uTWVzc2FnZSxcbiAgICAgICAgb3V0Y29tZSxcbiAgICAgICAgJ29yYScsXG4gICAgICAgICdhcGknLFxuICAgICAgICB7IGNvbnRleHRUeXBlOiBjb250ZXh0VHlwZSBhcyBhbnksIGNvbnRleHRJZCwgZmlsZVBhdGgsIGFjdGlvbjogYGxvZy0ke3NlY3Rpb259YCB9XG4gICAgKTtcbn1cblxuLyoqXG4gKiBMb2dzIGEgVUkgaW50ZXJhY3Rpb24gKGZvcm0gc3VibWlzc2lvbiwgYnV0dG9uIGNsaWNrLCBldGMuKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nVUlJbnRlcmFjdGlvbihcbiAgICBhY3Rpb246IHN0cmluZyxcbiAgICBkZXRhaWxzOiBzdHJpbmcsXG4gICAgb3V0Y29tZTogc3RyaW5nLFxuICAgIGNvbnRleHRJZD86IHN0cmluZ1xuKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBpbnRlcmFjdGlvbk1lc3NhZ2UgPSBgVUkgJHthY3Rpb259OiAke2RldGFpbHN9YDtcbiAgICBcbiAgICByZXR1cm4gbG9nSW50ZXJhY3Rpb24oXG4gICAgICAgICd1aS1pbnRlcmFjdGlvbicsXG4gICAgICAgIGludGVyYWN0aW9uTWVzc2FnZSxcbiAgICAgICAgb3V0Y29tZSxcbiAgICAgICAgJ3VzZXInLFxuICAgICAgICAndWknLFxuICAgICAgICB7IGNvbnRleHRJZCwgYWN0aW9uIH1cbiAgICApO1xufSAiXSwibmFtZXMiOlsiZnMiLCJwYXRoIiwidjQiLCJ1dWlkdjQiLCJCQVNFX0RJUiIsInJlc29sdmUiLCJwcm9jZXNzIiwiY3dkIiwiSU5URVJBQ1RJT05TX0RJUiIsImpvaW4iLCJnZW5lcmF0ZUludGVyYWN0aW9uVXVpZCIsIkRhdGUiLCJub3ciLCJzbGljZSIsImZvcm1hdFRpbWVzdGFtcEZvckZpbGVuYW1lIiwidGltZXN0YW1wIiwidG9JU09TdHJpbmciLCJyZXBsYWNlIiwiZ2VuZXJhdGVJbnRlcmFjdGlvbkZpbGVuYW1lIiwiY29udGV4dElkIiwidGltZXN0YW1wU3RyIiwic3VmZml4IiwiY3JlYXRlSW50ZXJhY3Rpb25Db250ZW50IiwiZGF0YSIsInV1aWQiLCJhY3RvciIsInNvdXJjZSIsImNvbnRleHQiLCJ0YWdzIiwibWVzc2FnZSIsIm91dGNvbWUiLCJkZXJpdmVDb250ZXh0QW5kVGFncyIsImludGVyYWN0aW9uVHlwZSIsImNvbnRleHRUeXBlIiwiYWN0aW9uIiwiY29udGV4dFN0ciIsInB1c2giLCJsb2dJbnRlcmFjdGlvbiIsIm1rZGlyIiwicmVjdXJzaXZlIiwidGltZXN0YW1wSXNvIiwiaW50ZXJhY3Rpb25EYXRhIiwiZmlsZW5hbWUiLCJjb250ZW50IiwiZmlsZVBhdGgiLCJ3cml0ZUZpbGUiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJsb2dDaGF0SW50ZXJhY3Rpb24iLCJpbnRlcmFjdGlvbk1lc3NhZ2UiLCJzdWJzdHJpbmciLCJsZW5ndGgiLCJsb2dUYXNrSW50ZXJhY3Rpb24iLCJ0YXNrRGVzY3JpcHRpb24iLCJsb2dNZW1vcnlFeGVjdXRpb25JbnRlcmFjdGlvbiIsInNlY3Rpb24iLCJsb2dVSUludGVyYWN0aW9uIiwiZGV0YWlscyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/interaction-logger.ts\n");

/***/ }),

/***/ "(rsc)/./lib/plan-parser.ts":
/*!****************************!*\
  !*** ./lib/plan-parser.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parsePlan: () => (/* binding */ parsePlan),\n/* harmony export */   stringifyPlan: () => (/* binding */ stringifyPlan)\n/* harmony export */ });\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_0__);\n\n// --- Constants ---\nconst PLAN_PATH = path__WEBPACK_IMPORTED_MODULE_0___default().resolve(process.cwd(), \"../../../runtime/workstreams/roadmap/workstream_plan.md\");\n// --- Functions ---\nconst parsePlan = (content)=>{\n    const tasks = [];\n    let currentSection = null;\n    const lines = content.split(\"\\n\");\n    for(let i = 0; i < lines.length; i++){\n        const line = lines[i];\n        const trimmedLine = line.trim();\n        const sectionMatch = trimmedLine.match(/^### (User-Defined Tasks|Ora-Suggested Tasks)/);\n        if (sectionMatch) {\n            currentSection = sectionMatch[1];\n            continue;\n        }\n        if (!currentSection) continue;\n        const taskMatch = trimmedLine.match(/^- \\[([ x-])\\] (.*)/);\n        if (taskMatch) {\n            const [_, statusChar, description] = taskMatch;\n            const task = {\n                description: description.trim(),\n                status: statusChar === \"x\" ? \"done\" : \"pending\",\n                section: currentSection,\n                id: Buffer.from(description.trim()).toString(\"base64\"),\n                added_by: \"user\",\n                source: `plan: ${path__WEBPACK_IMPORTED_MODULE_0___default().basename(PLAN_PATH)}` // Default value\n            };\n            // Look ahead for metadata lines\n            let nextLineIndex = i + 1;\n            while(nextLineIndex < lines.length){\n                const nextLine = lines[nextLineIndex].trim();\n                if (nextLine.startsWith(\"- [\") || nextLine.startsWith(\"###\") || nextLine === \"---\") {\n                    break; // Stop if we hit the next task, a new section, or a separator\n                }\n                const metadataMatch = nextLine.match(/`([^`]+?):\\s*([^`]+?)`/);\n                if (metadataMatch) {\n                    const [__, key, value] = metadataMatch;\n                    const cleanKey = key.trim();\n                    task[cleanKey] = value.trim();\n                } else if (nextLine) {\n                    // Append to description if it's not metadata or a separator\n                    task.description += \"\\n\" + lines[nextLineIndex];\n                }\n                nextLineIndex++;\n            }\n            if (task.status === \"promoted\") {\n                task.status = \"promoted\";\n            }\n            tasks.push(task);\n            i = nextLineIndex - 1; // Move parser to the last processed line\n        }\n    }\n    return tasks;\n};\nconst stringifyPlan = (tasks, existingContent)=>{\n    const userTasks = tasks.filter((t)=>t.section === \"User-Defined Tasks\" && t.status !== \"rejected\");\n    const oraTasks = tasks.filter((t)=>t.section === \"Ora-Suggested Tasks\" && t.status !== \"rejected\");\n    const formatTask = (task)=>{\n        const checkbox = task.status === \"done\" ? \"[x]\" : \"[ ]\";\n        let taskString = `- ${checkbox} ${task.description}\\n`;\n        taskString += `  \\`added_by: ${task.added_by}\\`\\n`;\n        taskString += `  \\`source: ${task.source}\\`\\n`;\n        if (task.context) {\n            taskString += `  \\`context: ${task.context}\\`\\n`;\n        }\n        if (task.promoted_to) {\n            taskString += `  \\`promoted_to: ${task.promoted_to}\\`\\n`;\n        }\n        if (task.status === \"promoted\") {\n            taskString += `  \\`status: promoted\\`\\n`;\n        }\n        return taskString;\n    };\n    const frontMatterMatch = existingContent.match(/---[\\\\s\\\\S]*?---/);\n    const frontMatter = frontMatterMatch ? frontMatterMatch[0] : \"\";\n    let newContent = frontMatter + \"\\n\\n\";\n    newContent += `### User-Defined Tasks\\n\\n`;\n    newContent += userTasks.map(formatTask).join(\"\\n\");\n    newContent += `\\n---\\n\\n`;\n    newContent += `### Ora-Suggested Tasks\\n\\n`;\n    newContent += oraTasks.map(formatTask).join(\"\\n\");\n    return newContent;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUM7UUFDdEQ0QixjQUFjLENBQUMsY0FBYyxFQUFFM0IsS0FBS08sUUFBUSxDQUFDLElBQUksQ0FBQztRQUNsRG9CLGNBQWMsQ0FBQyxZQUFZLEVBQUUzQixLQUFLUSxNQUFNLENBQUMsSUFBSSxDQUFDO1FBQzlDLElBQUlSLEtBQUs0QixPQUFPLEVBQUU7WUFDZEQsY0FBYyxDQUFDLGFBQWEsRUFBRTNCLEtBQUs0QixPQUFPLENBQUMsSUFBSSxDQUFDO1FBQ3BEO1FBQ0EsSUFBSTVCLEtBQUs2QixXQUFXLEVBQUU7WUFDbEJGLGNBQWMsQ0FBQyxpQkFBaUIsRUFBRTNCLEtBQUs2QixXQUFXLENBQUMsSUFBSSxDQUFDO1FBQzVEO1FBQ0EsSUFBSTdCLEtBQUtDLE1BQU0sS0FBSyxZQUFZO1lBQzVCMEIsY0FBYyxDQUFDLHdCQUF3QixDQUFDO1FBQzVDO1FBQ0EsT0FBT0E7SUFDWDtJQUVBLE1BQU1HLG1CQUFtQlYsZ0JBQWdCekIsS0FBSyxDQUFDO0lBQy9DLE1BQU1vQyxjQUFjRCxtQkFBbUJBLGdCQUFnQixDQUFDLEVBQUUsR0FBRztJQUU3RCxJQUFJRSxhQUFhRCxjQUFjO0lBRS9CQyxjQUFjLENBQUMsMEJBQTBCLENBQUM7SUFDMUNBLGNBQWNYLFVBQVVZLEdBQUcsQ0FBQ1IsWUFBWVMsSUFBSSxDQUFDO0lBRTdDRixjQUFjLENBQUMsU0FBUyxDQUFDO0lBRXpCQSxjQUFjLENBQUMsMkJBQTJCLENBQUM7SUFDM0NBLGNBQWNSLFNBQVNTLEdBQUcsQ0FBQ1IsWUFBWVMsSUFBSSxDQUFDO0lBRTVDLE9BQU9GO0FBQ1gsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL29yYS1yZWFjdC1hcHAvLi9saWIvcGxhbi1wYXJzZXIudHM/ODJjZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcblxuLy8gLS0tIFR5cGVzIC0tLVxuZXhwb3J0IGludGVyZmFjZSBUYXNrIHtcbiAgICBpZDogc3RyaW5nO1xuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gICAgYWRkZWRfYnk6ICd1c2VyJyB8ICdvcmEnO1xuICAgIHN0YXR1czogJ3BlbmRpbmcnIHwgJ2RvbmUnIHwgJ3JlamVjdGVkJyB8ICdwcm9tb3RlZCc7XG4gICAgc291cmNlOiBzdHJpbmc7XG4gICAgY29udGV4dD86IHN0cmluZztcbiAgICBzZWN0aW9uOiAnVXNlci1EZWZpbmVkIFRhc2tzJyB8ICdPcmEtU3VnZ2VzdGVkIFRhc2tzJztcbiAgICBwcm9tb3RlZF90bz86IHN0cmluZztcbn1cblxuLy8gLS0tIENvbnN0YW50cyAtLS1cbmNvbnN0IFBMQU5fUEFUSCA9IHBhdGgucmVzb2x2ZShwcm9jZXNzLmN3ZCgpLCAnLi4vLi4vLi4vcnVudGltZS93b3Jrc3RyZWFtcy9yb2FkbWFwL3dvcmtzdHJlYW1fcGxhbi5tZCcpO1xuXG5cbi8vIC0tLSBGdW5jdGlvbnMgLS0tXG5cbmV4cG9ydCBjb25zdCBwYXJzZVBsYW4gPSAoY29udGVudDogc3RyaW5nKTogVGFza1tdID0+IHtcbiAgICBjb25zdCB0YXNrczogVGFza1tdID0gW107XG4gICAgbGV0IGN1cnJlbnRTZWN0aW9uOiAnVXNlci1EZWZpbmVkIFRhc2tzJyB8ICdPcmEtU3VnZ2VzdGVkIFRhc2tzJyB8IG51bGwgPSBudWxsO1xuXG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2ldO1xuICAgICAgICBjb25zdCB0cmltbWVkTGluZSA9IGxpbmUudHJpbSgpO1xuXG4gICAgICAgIGNvbnN0IHNlY3Rpb25NYXRjaCA9IHRyaW1tZWRMaW5lLm1hdGNoKC9eIyMjIChVc2VyLURlZmluZWQgVGFza3N8T3JhLVN1Z2dlc3RlZCBUYXNrcykvKTtcbiAgICAgICAgaWYgKHNlY3Rpb25NYXRjaCkge1xuICAgICAgICAgICAgY3VycmVudFNlY3Rpb24gPSBzZWN0aW9uTWF0Y2hbMV0gYXMgJ1VzZXItRGVmaW5lZCBUYXNrcycgfCAnT3JhLVN1Z2dlc3RlZCBUYXNrcyc7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY3VycmVudFNlY3Rpb24pIGNvbnRpbnVlO1xuXG4gICAgICAgIGNvbnN0IHRhc2tNYXRjaCA9IHRyaW1tZWRMaW5lLm1hdGNoKC9eLSBcXFsoWyB4LV0pXFxdICguKikvKTtcbiAgICAgICAgaWYgKHRhc2tNYXRjaCkge1xuICAgICAgICAgICAgY29uc3QgW18sIHN0YXR1c0NoYXIsIGRlc2NyaXB0aW9uXSA9IHRhc2tNYXRjaDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdGFzazogVGFzayA9IHtcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24udHJpbSgpLFxuICAgICAgICAgICAgICAgIHN0YXR1czogc3RhdHVzQ2hhciA9PT0gJ3gnID8gJ2RvbmUnIDogJ3BlbmRpbmcnLFxuICAgICAgICAgICAgICAgIHNlY3Rpb246IGN1cnJlbnRTZWN0aW9uLFxuICAgICAgICAgICAgICAgIGlkOiBCdWZmZXIuZnJvbShkZXNjcmlwdGlvbi50cmltKCkpLnRvU3RyaW5nKCdiYXNlNjQnKSxcbiAgICAgICAgICAgICAgICBhZGRlZF9ieTogJ3VzZXInLCAvLyBEZWZhdWx0IHZhbHVlXG4gICAgICAgICAgICAgICAgc291cmNlOiBgcGxhbjogJHtwYXRoLmJhc2VuYW1lKFBMQU5fUEFUSCl9YCAvLyBEZWZhdWx0IHZhbHVlXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBMb29rIGFoZWFkIGZvciBtZXRhZGF0YSBsaW5lc1xuICAgICAgICAgICAgbGV0IG5leHRMaW5lSW5kZXggPSBpICsgMTtcbiAgICAgICAgICAgIHdoaWxlIChuZXh0TGluZUluZGV4IDwgbGluZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dExpbmUgPSBsaW5lc1tuZXh0TGluZUluZGV4XS50cmltKCk7XG4gICAgICAgICAgICAgICAgaWYgKG5leHRMaW5lLnN0YXJ0c1dpdGgoJy0gWycpIHx8IG5leHRMaW5lLnN0YXJ0c1dpdGgoJyMjIycpIHx8IG5leHRMaW5lID09PSAnLS0tJykge1xuICAgICAgICAgICAgICAgICAgICBicmVhazsgLy8gU3RvcCBpZiB3ZSBoaXQgdGhlIG5leHQgdGFzaywgYSBuZXcgc2VjdGlvbiwgb3IgYSBzZXBhcmF0b3JcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YU1hdGNoID0gbmV4dExpbmUubWF0Y2goL2AoW15gXSs/KTpcXHMqKFteYF0rPylgLyk7XG4gICAgICAgICAgICAgICAgaWYgKG1ldGFkYXRhTWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgW19fLCBrZXksIHZhbHVlXSA9IG1ldGFkYXRhTWF0Y2g7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuS2V5ID0ga2V5LnRyaW0oKSBhcyBrZXlvZiBUYXNrO1xuICAgICAgICAgICAgICAgICAgICAodGFzayBhcyBhbnkpW2NsZWFuS2V5XSA9IHZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5leHRMaW5lKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFwcGVuZCB0byBkZXNjcmlwdGlvbiBpZiBpdCdzIG5vdCBtZXRhZGF0YSBvciBhIHNlcGFyYXRvclxuICAgICAgICAgICAgICAgICAgICB0YXNrLmRlc2NyaXB0aW9uICs9ICdcXG4nICsgbGluZXNbbmV4dExpbmVJbmRleF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5leHRMaW5lSW5kZXgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRhc2suc3RhdHVzID09PSAncHJvbW90ZWQnKSB7IC8vIGNoZWNrIHN0YXR1cyBmcm9tIG1ldGFkYXRhXG4gICAgICAgICAgICAgICAgIHRhc2suc3RhdHVzID0gJ3Byb21vdGVkJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGFza3MucHVzaCh0YXNrKTtcbiAgICAgICAgICAgIGkgPSBuZXh0TGluZUluZGV4IC0gMTsgLy8gTW92ZSBwYXJzZXIgdG8gdGhlIGxhc3QgcHJvY2Vzc2VkIGxpbmVcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGFza3M7XG59O1xuXG5leHBvcnQgY29uc3Qgc3RyaW5naWZ5UGxhbiA9ICh0YXNrczogVGFza1tdLCBleGlzdGluZ0NvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gICAgY29uc3QgdXNlclRhc2tzID0gdGFza3MuZmlsdGVyKHQgPT4gdC5zZWN0aW9uID09PSAnVXNlci1EZWZpbmVkIFRhc2tzJyAmJiB0LnN0YXR1cyAhPT0gJ3JlamVjdGVkJyk7XG4gICAgY29uc3Qgb3JhVGFza3MgPSB0YXNrcy5maWx0ZXIodCA9PiB0LnNlY3Rpb24gPT09ICdPcmEtU3VnZ2VzdGVkIFRhc2tzJyAmJiB0LnN0YXR1cyAhPT0gJ3JlamVjdGVkJyk7XG5cbiAgICBjb25zdCBmb3JtYXRUYXNrID0gKHRhc2s6IFRhc2spID0+IHtcbiAgICAgICAgY29uc3QgY2hlY2tib3ggPSB0YXNrLnN0YXR1cyA9PT0gJ2RvbmUnID8gJ1t4XScgOiAnWyBdJztcbiAgICAgICAgbGV0IHRhc2tTdHJpbmcgPSBgLSAke2NoZWNrYm94fSAke3Rhc2suZGVzY3JpcHRpb259XFxuYDtcbiAgICAgICAgdGFza1N0cmluZyArPSBgICBcXGBhZGRlZF9ieTogJHt0YXNrLmFkZGVkX2J5fVxcYFxcbmA7XG4gICAgICAgIHRhc2tTdHJpbmcgKz0gYCAgXFxgc291cmNlOiAke3Rhc2suc291cmNlfVxcYFxcbmA7XG4gICAgICAgIGlmICh0YXNrLmNvbnRleHQpIHtcbiAgICAgICAgICAgIHRhc2tTdHJpbmcgKz0gYCAgXFxgY29udGV4dDogJHt0YXNrLmNvbnRleHR9XFxgXFxuYDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFzay5wcm9tb3RlZF90bykge1xuICAgICAgICAgICAgdGFza1N0cmluZyArPSBgICBcXGBwcm9tb3RlZF90bzogJHt0YXNrLnByb21vdGVkX3RvfVxcYFxcbmA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhc2suc3RhdHVzID09PSAncHJvbW90ZWQnKSB7XG4gICAgICAgICAgICB0YXNrU3RyaW5nICs9IGAgIFxcYHN0YXR1czogcHJvbW90ZWRcXGBcXG5gO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YXNrU3RyaW5nO1xuICAgIH07XG5cbiAgICBjb25zdCBmcm9udE1hdHRlck1hdGNoID0gZXhpc3RpbmdDb250ZW50Lm1hdGNoKC8tLS1bXFxcXHNcXFxcU10qPy0tLS8pO1xuICAgIGNvbnN0IGZyb250TWF0dGVyID0gZnJvbnRNYXR0ZXJNYXRjaCA/IGZyb250TWF0dGVyTWF0Y2hbMF0gOiAnJztcbiAgICBcbiAgICBsZXQgbmV3Q29udGVudCA9IGZyb250TWF0dGVyICsgJ1xcblxcbic7XG4gICAgXG4gICAgbmV3Q29udGVudCArPSBgIyMjIFVzZXItRGVmaW5lZCBUYXNrc1xcblxcbmA7XG4gICAgbmV3Q29udGVudCArPSB1c2VyVGFza3MubWFwKGZvcm1hdFRhc2spLmpvaW4oJ1xcbicpO1xuICAgIFxuICAgIG5ld0NvbnRlbnQgKz0gYFxcbi0tLVxcblxcbmA7XG4gICAgXG4gICAgbmV3Q29udGVudCArPSBgIyMjIE9yYS1TdWdnZXN0ZWQgVGFza3NcXG5cXG5gO1xuICAgIG5ld0NvbnRlbnQgKz0gb3JhVGFza3MubWFwKGZvcm1hdFRhc2spLmpvaW4oJ1xcbicpO1xuXG4gICAgcmV0dXJuIG5ld0NvbnRlbnQ7XG59OyAiXSwibmFtZXMiOlsicGF0aCIsIlBMQU5fUEFUSCIsInJlc29sdmUiLCJwcm9jZXNzIiwiY3dkIiwicGFyc2VQbGFuIiwiY29udGVudCIsInRhc2tzIiwiY3VycmVudFNlY3Rpb24iLCJsaW5lcyIsInNwbGl0IiwiaSIsImxlbmd0aCIsImxpbmUiLCJ0cmltbWVkTGluZSIsInRyaW0iLCJzZWN0aW9uTWF0Y2giLCJtYXRjaCIsInRhc2tNYXRjaCIsIl8iLCJzdGF0dXNDaGFyIiwiZGVzY3JpcHRpb24iLCJ0YXNrIiwic3RhdHVzIiwic2VjdGlvbiIsImlkIiwiQnVmZmVyIiwiZnJvbSIsInRvU3RyaW5nIiwiYWRkZWRfYnkiLCJzb3VyY2UiLCJiYXNlbmFtZSIsIm5leHRMaW5lSW5kZXgiLCJuZXh0TGluZSIsInN0YXJ0c1dpdGgiLCJtZXRhZGF0YU1hdGNoIiwiX18iLCJrZXkiLCJ2YWx1ZSIsImNsZWFuS2V5IiwicHVzaCIsInN0cmluZ2lmeVBsYW4iLCJleGlzdGluZ0NvbnRlbnQiLCJ1c2VyVGFza3MiLCJmaWx0ZXIiLCJ0Iiwib3JhVGFza3MiLCJmb3JtYXRUYXNrIiwiY2hlY2tib3giLCJ0YXNrU3RyaW5nIiwiY29udGV4dCIsInByb21vdGVkX3RvIiwiZnJvbnRNYXR0ZXJNYXRjaCIsImZyb250TWF0dGVyIiwibmV3Q29udGVudCIsIm1hcCIsImpvaW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/plan-parser.ts\n");

/***/ }),

/***/ "(rsc)/./lib/yaml-engine.ts":
/*!****************************!*\
  !*** ./lib/yaml-engine.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   matterOptions: () => (/* binding */ matterOptions),\n/* harmony export */   yamlEngine: () => (/* binding */ yamlEngine)\n/* harmony export */ });\n/* harmony import */ var js_yaml__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js-yaml */ \"(rsc)/./node_modules/js-yaml/dist/js-yaml.mjs\");\n\nconst yamlEngine = {\n    parse: (str)=>js_yaml__WEBPACK_IMPORTED_MODULE_0__[\"default\"].load(str, {\n            schema: js_yaml__WEBPACK_IMPORTED_MODULE_0__[\"default\"].JSON_SCHEMA\n        }),\n    stringify: (data)=>js_yaml__WEBPACK_IMPORTED_MODULE_0__[\"default\"].dump(data)\n};\nconst matterOptions = {\n    engines: {\n        // @ts-ignore\n        yaml: yamlEngine\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIveWFtbC1lbmdpbmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTJCO0FBRXBCLE1BQU1DLGFBQWE7SUFDeEJDLE9BQU8sQ0FBQ0MsTUFBZ0JILG9EQUFTLENBQUNHLEtBQUs7WUFBRUUsUUFBUUwsMkRBQWdCO1FBQUM7SUFDbEVPLFdBQVcsQ0FBQ0MsT0FBaUJSLG9EQUFTLENBQUNRO0FBQ3pDLEVBQUU7QUFFSyxNQUFNRSxnQkFBZ0I7SUFDM0JDLFNBQVM7UUFDUCxhQUFhO1FBQ2JYLE1BQU1DO0lBQ1I7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3JhLXJlYWN0LWFwcC8uL2xpYi95YW1sLWVuZ2luZS50cz9lMzZhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB5YW1sIGZyb20gJ2pzLXlhbWwnO1xuXG5leHBvcnQgY29uc3QgeWFtbEVuZ2luZSA9IHtcbiAgcGFyc2U6IChzdHI6IHN0cmluZykgPT4geWFtbC5sb2FkKHN0ciwgeyBzY2hlbWE6IHlhbWwuSlNPTl9TQ0hFTUEgfSkgYXMgb2JqZWN0LFxuICBzdHJpbmdpZnk6IChkYXRhOiBvYmplY3QpID0+IHlhbWwuZHVtcChkYXRhKSxcbn07XG5cbmV4cG9ydCBjb25zdCBtYXR0ZXJPcHRpb25zID0ge1xuICBlbmdpbmVzOiB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHlhbWw6IHlhbWxFbmdpbmUsXG4gIH1cbn07ICJdLCJuYW1lcyI6WyJ5YW1sIiwieWFtbEVuZ2luZSIsInBhcnNlIiwic3RyIiwibG9hZCIsInNjaGVtYSIsIkpTT05fU0NIRU1BIiwic3RyaW5naWZ5IiwiZGF0YSIsImR1bXAiLCJtYXR0ZXJPcHRpb25zIiwiZW5naW5lcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/yaml-engine.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/esprima","vendor-chunks/gray-matter","vendor-chunks/kind-of","vendor-chunks/section-matter","vendor-chunks/extend-shallow","vendor-chunks/is-extendable","vendor-chunks/strip-bom-string","vendor-chunks/js-yaml","vendor-chunks/uuid"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fplan-tasks%2Froute&page=%2Fapi%2Fplan-tasks%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fplan-tasks%2Froute.ts&appDir=%2FUsers%2Fair%2FProjects%2Fora-system%2Fsrc%2Fui%2Freact-app%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fair%2FProjects%2Fora-system%2Fsrc%2Fui%2Freact-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();