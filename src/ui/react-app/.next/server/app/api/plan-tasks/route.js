"use strict";(()=>{var e={};e.id=710,e.ids=[710],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{e.exports=require("buffer")},4770:e=>{e.exports=require("crypto")},2048:e=>{e.exports=require("fs")},629:e=>{e.exports=require("fs/promises")},5315:e=>{e.exports=require("path")},8473:(e,s,t)=>{t.r(s),t.d(s,{originalPathname:()=>N,patchFetch:()=>v,requestAsyncStorage:()=>E,routeModule:()=>h,serverHooks:()=>R,staticGenerationAsyncStorage:()=>F});var r={};t.r(r),t.d(r,{DELETE:()=>w,GET:()=>j,POST:()=>y,PUT:()=>T,dynamic:()=>m});var a=t(9303),n=t(8716),o=t(3131),i=t(7070),d=t(629),u=t.n(d),c=t(5315),l=t.n(c),p=t(7038),f=t(4027),k=t(4810);let m="force-dynamic",g=l().resolve(process.cwd(),"../../.."),x=l().join(g,"runtime","workstreams","roadmap","workstream_plan.md");async function j(){try{let e=await u().readFile(x,"utf-8"),s=(0,p.Y)(e);return i.NextResponse.json(s)}catch(s){if(s instanceof Error&&"ENOENT"===s.code)return i.NextResponse.json([]);console.error("Failed to get plan tasks:",s);let e=s instanceof Error?s.message:"Internal Server Error";return i.NextResponse.json({message:"Failed to get plan tasks",error:e},{status:500})}}async function y(e){try{let{description:s,added_by:t,context:r}=await e.json();if(!s||!t)return i.NextResponse.json({message:"Missing required fields"},{status:400});let a="user"===t?"### User-Defined Tasks":"### Ora-Suggested Tasks",n={description:s,added_by:t,status:"pending",source:`plan: ${l().basename(x)}`,context:r},o=(0,p.O)([{...n,id:"",section:"User-Defined Tasks"}],"");await f.n.appendToSection(x,a,o);try{await (0,k.A1)("create",n.description,n.added_by,`Task successfully created and added to ${a}.`,r)}catch(e){console.error("Failed to log task creation interaction:",e)}return i.NextResponse.json(n,{status:201})}catch(s){console.error("Failed to add task:",s);let e=s instanceof Error?s.message:"Internal Server Error";return i.NextResponse.json({message:"Failed to add task",error:e},{status:500})}}async function T(e){try{let s=await e.json(),t=await u().readFile(x,"utf-8"),r=(0,p.Y)(t).find(e=>e.id===s.id);if(!r)return i.NextResponse.json({message:"Task not found"},{status:404});let a=(0,p.O)([r],""),n=(0,p.O)([s],""),o="User-Defined Tasks"===s.section?"### User-Defined Tasks":"### Ora-Suggested Tasks";await f.n.replaceInSection(x,o,a,n,s.id);try{await (0,k.A1)("update",s.description,"user",`Task successfully updated in ${o}.`,s.id)}catch(e){console.error("Failed to log task update interaction:",e)}return i.NextResponse.json(s)}catch(s){console.error("Failed to update task:",s);let e=s instanceof Error?s.message:"Internal Server Error";return i.NextResponse.json({message:"Failed to update task",error:e},{status:500})}}async function w(e){try{let{id:s}=await e.json();if(!s)return i.NextResponse.json({message:"Missing task id"},{status:400});let t=await u().readFile(x,"utf-8"),r=(0,p.Y)(t).find(e=>e.id===s);if(!r)return i.NextResponse.json({message:"Task not found"},{status:404});let a=(0,p.O)([r],""),n="User-Defined Tasks"===r.section?"### User-Defined Tasks":"### Ora-Suggested Tasks";await f.n.replaceInSection(x,n,a,"",s);try{await (0,k.A1)("delete",r.description,"user",`Task successfully deleted from ${n}.`,s)}catch(e){console.error("Failed to log task deletion interaction:",e)}return i.NextResponse.json({message:"Task deleted successfully"})}catch(s){console.error("Failed to delete task:",s);let e=s instanceof Error?s.message:"Internal Server Error";return i.NextResponse.json({message:"Failed to delete task",error:e},{status:500})}}l().join(g,"runtime","backups");let h=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/plan-tasks/route",pathname:"/api/plan-tasks",filename:"route",bundlePath:"app/api/plan-tasks/route"},resolvedPagePath:"/Users/air/Projects/ora-system/src/ui/react-app/app/api/plan-tasks/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:E,staticGenerationAsyncStorage:F,serverHooks:R}=h,N="/api/plan-tasks/route";function v(){return(0,o.patchFetch)({serverHooks:R,staticGenerationAsyncStorage:F})}}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,972,366,127,229],()=>t(8473));module.exports=r})();